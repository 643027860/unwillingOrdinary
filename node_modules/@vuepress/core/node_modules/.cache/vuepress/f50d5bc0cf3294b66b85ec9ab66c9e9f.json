{"remainingRequest":"D:\\home\\vuepress-boke\\talent-baoda\\node_modules\\babel-loader\\lib\\index.js??ref--3-1!D:\\home\\vuepress-boke\\talent-baoda\\node_modules\\valine\\dist\\Valine.min.js","dependencies":[{"path":"D:\\home\\vuepress-boke\\talent-baoda\\node_modules\\valine\\dist\\Valine.min.js","mtime":499162500000},{"path":"D:\\home\\vuepress-boke\\talent-baoda\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\home\\vuepress-boke\\talent-baoda\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:cmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnN5bWJvbCIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnN5bWJvbC5kZXNjcmlwdGlvbiIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnN5bWJvbC5hc3luYy1pdGVyYXRvciIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnN5bWJvbC5pdGVyYXRvciIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnN5bWJvbC50by1zdHJpbmctdGFnIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0Iik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZCIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZvci1lYWNoIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5kZXgtb2YiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pcy1hcnJheSIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmpvaW4iKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5yZXZlcnNlIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc2xpY2UiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zcGxpY2UiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS1idWZmZXIuY29uc3RydWN0b3IiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS1idWZmZXIuc2xpY2UiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5kYXRhLXZpZXciKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5kYXRlLm5vdyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmRhdGUudG8tc3RyaW5nIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24uYmluZCIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5qc29uLnRvLXN0cmluZy10YWciKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5tYXAiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5tYXRoLnRvLXN0cmluZy10YWciKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5udW1iZXIuY29uc3RydWN0b3IiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuY3JlYXRlIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmRlZmluZS1wcm9wZXJ0eSIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3IiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuZ2V0LW93bi1wcm9wZXJ0eS1uYW1lcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5nZXQtcHJvdG90eXBlLW9mIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmtleXMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMucGFyc2UtZmxvYXQiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5wYXJzZS1pbnQiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuY29uc3RydWN0b3IiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC50by1zdHJpbmciKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5zZXQiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaXRlcmF0b3IiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcubWF0Y2giKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcucmVwbGFjZSIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5zcGxpdCIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy50cmltIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnRyaW0tZW5kIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLmxpbmsiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5mbG9hdDMyLWFycmF5Iik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuZmxvYXQ2NC1hcnJheSIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LmludDgtYXJyYXkiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5pbnQxNi1hcnJheSIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LmludDMyLWFycmF5Iik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkudWludDgtYXJyYXkiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS51aW50OC1jbGFtcGVkLWFycmF5Iik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkudWludDE2LWFycmF5Iik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkudWludDMyLWFycmF5Iik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuY29weS13aXRoaW4iKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5ldmVyeSIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LmZpbGwiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5maWx0ZXIiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5maW5kIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuZmluZC1pbmRleCIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LmZvci1lYWNoIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuaW5jbHVkZXMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5pbmRleC1vZiIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5Lml0ZXJhdG9yIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuam9pbiIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5Lmxhc3QtaW5kZXgtb2YiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5tYXAiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5yZWR1Y2UiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5yZWR1Y2UtcmlnaHQiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5yZXZlcnNlIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuc2V0Iik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuc2xpY2UiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5zb21lIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuc29ydCIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LnN1YmFycmF5Iik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkudG8tbG9jYWxlLXN0cmluZyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LnRvLXN0cmluZyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLndlYWstbWFwIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMud2Vhay1zZXQiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5pdGVyYXRvciIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL3dlYi50aW1lcnMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy93ZWIudXJsIik7Cgp2YXIgX3R5cGVvZiA9IHJlcXVpcmUoIkQ6L2hvbWUvdnVlcHJlc3MtYm9rZS90YWxlbnQtYmFvZGEvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvdHlwZW9mIik7CgovKiEKICogVmFsaW5lIHYxLjQuMTQKICogKGMpIDIwMTctMjAyMCB4Q3NzCiAqIFJlbGVhc2VkIHVuZGVyIHRoZSBHUEwtMi4wIExpY2Vuc2UuCiAqIExhc3QgVXBkYXRlOiAyMDIwLzQvMjYg5LiL5Y2IODozOTowOAogKi8KIWZ1bmN0aW9uIChlLCB0KSB7CiAgIm9iamVjdCIgPT0gKHR5cGVvZiBleHBvcnRzID09PSAidW5kZWZpbmVkIiA/ICJ1bmRlZmluZWQiIDogX3R5cGVvZihleHBvcnRzKSkgJiYgIm9iamVjdCIgPT0gKHR5cGVvZiBtb2R1bGUgPT09ICJ1bmRlZmluZWQiID8gInVuZGVmaW5lZCIgOiBfdHlwZW9mKG1vZHVsZSkpID8gbW9kdWxlLmV4cG9ydHMgPSB0KCkgOiAiZnVuY3Rpb24iID09IHR5cGVvZiBkZWZpbmUgJiYgZGVmaW5lLmFtZCA/IGRlZmluZShbXSwgdCkgOiAib2JqZWN0IiA9PSAodHlwZW9mIGV4cG9ydHMgPT09ICJ1bmRlZmluZWQiID8gInVuZGVmaW5lZCIgOiBfdHlwZW9mKGV4cG9ydHMpKSA/IGV4cG9ydHMuVmFsaW5lID0gdCgpIDogZS5WYWxpbmUgPSB0KCk7Cn0odGhpcywgZnVuY3Rpb24gKCkgewogIHJldHVybiBmdW5jdGlvbiAoZSkgewogICAgZnVuY3Rpb24gdChyKSB7CiAgICAgIGlmIChuW3JdKSByZXR1cm4gbltyXS5leHBvcnRzOwogICAgICB2YXIgbyA9IG5bcl0gPSB7CiAgICAgICAgaTogciwKICAgICAgICBsOiAhMSwKICAgICAgICBleHBvcnRzOiB7fQogICAgICB9OwogICAgICByZXR1cm4gZVtyXS5jYWxsKG8uZXhwb3J0cywgbywgby5leHBvcnRzLCB0KSwgby5sID0gITAsIG8uZXhwb3J0czsKICAgIH0KCiAgICB2YXIgbiA9IHt9OwogICAgcmV0dXJuIHQubSA9IGUsIHQuYyA9IG4sIHQuaSA9IGZ1bmN0aW9uIChlKSB7CiAgICAgIHJldHVybiBlOwogICAgfSwgdC5kID0gZnVuY3Rpb24gKGUsIG4sIHIpIHsKICAgICAgdC5vKGUsIG4pIHx8IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCBuLCB7CiAgICAgICAgY29uZmlndXJhYmxlOiAhMSwKICAgICAgICBlbnVtZXJhYmxlOiAhMCwKICAgICAgICBnZXQ6IHIKICAgICAgfSk7CiAgICB9LCB0Lm4gPSBmdW5jdGlvbiAoZSkgewogICAgICB2YXIgbiA9IGUgJiYgZS5fX2VzTW9kdWxlID8gZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiBlWyJkZWZhdWx0Il07CiAgICAgIH0gOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIGU7CiAgICAgIH07CiAgICAgIHJldHVybiB0LmQobiwgImEiLCBuKSwgbjsKICAgIH0sIHQubyA9IGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgIHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSwgdCk7CiAgICB9LCB0LnAgPSAiIiwgdCh0LnMgPSA2Myk7CiAgfShbZnVuY3Rpb24gKGUsIHQsIG4pIHsKICAgICJ1c2Ugc3RyaWN0IjsKCiAgICBmdW5jdGlvbiByKGUpIHsKICAgICAgcmV0dXJuIGUgJiYgZS5fX2VzTW9kdWxlID8gZSA6IHsKICAgICAgICAiZGVmYXVsdCI6IGUKICAgICAgfTsKICAgIH0KCiAgICB0Ll9fZXNNb2R1bGUgPSAhMDsKICAgIHZhciBvID0gImZ1bmN0aW9uIiA9PSB0eXBlb2YgU3ltYm9sICYmICJzeW1ib2wiID09IF90eXBlb2YoU3ltYm9sLml0ZXJhdG9yKSA/IGZ1bmN0aW9uIChlKSB7CiAgICAgIHJldHVybiBfdHlwZW9mKGUpOwogICAgfSA6IGZ1bmN0aW9uIChlKSB7CiAgICAgIHJldHVybiBlICYmICJmdW5jdGlvbiIgPT0gdHlwZW9mIFN5bWJvbCAmJiBlLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgZSAhPT0gU3ltYm9sLnByb3RvdHlwZSA/ICJzeW1ib2wiIDogX3R5cGVvZihlKTsKICAgIH0sCiAgICAgICAgaSA9IG4oMzgpLAogICAgICAgIGEgPSByKGkpLAogICAgICAgIHMgPSBuKDI4KSwKICAgICAgICBsID0gcihzKSwKICAgICAgICBjID0gbigyNyksCiAgICAgICAgdSA9IHIoYyksCiAgICAgICAgZCA9IG4oNDIpLAogICAgICAgIHAgPSByKGQpLAogICAgICAgIGYgPSBkb2N1bWVudCwKICAgICAgICBoID0gbmF2aWdhdG9yLAogICAgICAgIHYgPSAvWyY8PiInYFxcXS9nLAogICAgICAgIGcgPSBSZWdFeHAodi5zb3VyY2UpLAogICAgICAgIG0gPSAvJig/OmFtcHxsdHxndHxxdW90fCMzOXwjeDYwfCN4NWMpOy9nLAogICAgICAgIHkgPSBSZWdFeHAobS5zb3VyY2UpLAogICAgICAgIGIgPSB7CiAgICAgICImIjogIiZhbXA7IiwKICAgICAgIjwiOiAiJmx0OyIsCiAgICAgICI+IjogIiZndDsiLAogICAgICAnIic6ICImcXVvdDsiLAogICAgICAiJyI6ICImIzM5OyIsCiAgICAgICJgIjogIiYjeDYwOyIsCiAgICAgICJcXCI6ICImI3g1YzsiCiAgICB9LAogICAgICAgIHcgPSB7fTsKCiAgICBmb3IgKHZhciB4IGluIGIpIHsKICAgICAgd1tiW3hdXSA9IHg7CiAgICB9CgogICAgdmFyIGsgPSBudWxsOwogICAgQXJyYXkucHJvdG90eXBlLmZvckVhY2ggfHwgKEFycmF5LnByb3RvdHlwZS5mb3JFYWNoID0gZnVuY3Rpb24gKGUsIHQpIHsKICAgICAgdmFyIG4sIHI7CiAgICAgIGlmIChudWxsID09IHRoaXMpIHRocm93IG5ldyBUeXBlRXJyb3IoIiB0aGlzIGlzIG51bGwgb3Igbm90IGRlZmluZWQiKTsKICAgICAgdmFyIG8gPSBPYmplY3QodGhpcyksCiAgICAgICAgICBpID0gby5sZW5ndGggPj4+IDA7CiAgICAgIGlmICgiZnVuY3Rpb24iICE9IHR5cGVvZiBlKSB0aHJvdyBuZXcgVHlwZUVycm9yKGUgKyAiIGlzIG5vdCBhIGZ1bmN0aW9uIik7CgogICAgICBmb3IgKGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIChuID0gdCksIHIgPSAwOyByIDwgaTspIHsKICAgICAgICB2YXIgYTsKICAgICAgICByIGluIG8gJiYgKGEgPSBvW3JdLCBlLmNhbGwobiwgYSwgciwgbykpLCByKys7CiAgICAgIH0KICAgIH0pLCB3aW5kb3cuTm9kZUxpc3QgJiYgIU5vZGVMaXN0LnByb3RvdHlwZS5mb3JFYWNoICYmIChOb2RlTGlzdC5wcm90b3R5cGUuZm9yRWFjaCA9IEFycmF5LnByb3RvdHlwZS5mb3JFYWNoKSwgU3RyaW5nLnByb3RvdHlwZS50cmltIHx8IChTdHJpbmcucHJvdG90eXBlLnRyaW0gPSBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiB0aGlzLnJlcGxhY2UoL15bXHNcdUZFRkZceEEwXSt8W1xzXHVGRUZGXHhBMF0rJC9nLCAiIik7CiAgICB9KSwgKDAsIGFbImRlZmF1bHQiXSkobFsiZGVmYXVsdCJdLmZuLCB7CiAgICAgIHByZXBlbmQ6IGZ1bmN0aW9uIHByZXBlbmQoZSkgewogICAgICAgIHJldHVybiBlIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQgfHwgKGUgPSBlWzBdKSwgdGhpcy5mb3JFYWNoKGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICB0Lmluc2VydEFkamFjZW50RWxlbWVudCgiYWZ0ZXJCZWdpbiIsIGUpOwogICAgICAgIH0pLCB0aGlzOwogICAgICB9LAogICAgICBhcHBlbmQ6IGZ1bmN0aW9uIGFwcGVuZChlKSB7CiAgICAgICAgcmV0dXJuIGUgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCB8fCAoZSA9IGVbMF0pLCB0aGlzLmZvckVhY2goZnVuY3Rpb24gKHQpIHsKICAgICAgICAgIHQuaW5zZXJ0QWRqYWNlbnRFbGVtZW50KCJiZWZvcmVFbmQiLCBlKTsKICAgICAgICB9KSwgdGhpczsKICAgICAgfSwKICAgICAgcmVtb3ZlOiBmdW5jdGlvbiByZW1vdmUoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuZm9yRWFjaChmdW5jdGlvbiAoZSkgewogICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGUpOwogICAgICAgICAgfSBjYXRjaCAoZSkge30KICAgICAgICB9KSwgdGhpczsKICAgICAgfSwKICAgICAgZmluZDogZnVuY3Rpb24gZmluZChlKSB7CiAgICAgICAgcmV0dXJuICgwLCBsWyJkZWZhdWx0Il0pKGUsIHRoaXMpOwogICAgICB9LAogICAgICBzaG93OiBmdW5jdGlvbiBzaG93KCkgewogICAgICAgIHJldHVybiB0aGlzLmZvckVhY2goZnVuY3Rpb24gKGUpIHsKICAgICAgICAgIGUuc3R5bGUuZGlzcGxheSA9ICJibG9jayI7CiAgICAgICAgfSksIHRoaXM7CiAgICAgIH0sCiAgICAgIGhpZGU6IGZ1bmN0aW9uIGhpZGUoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuZm9yRWFjaChmdW5jdGlvbiAoZSkgewogICAgICAgICAgZS5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOwogICAgICAgIH0pLCB0aGlzOwogICAgICB9LAogICAgICBvbjogZnVuY3Rpb24gb24oZSwgdCwgbikgewogICAgICAgIHJldHVybiBsWyJkZWZhdWx0Il0uZm4ub2ZmKGUsIHQsIG4pLCB0aGlzLmZvckVhY2goZnVuY3Rpb24gKHIpIHsKICAgICAgICAgIGUuc3BsaXQoIiAiKS5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIHIuYWRkRXZlbnRMaXN0ZW5lciA/IHIuYWRkRXZlbnRMaXN0ZW5lcihlLCB0LCBuIHx8ICExKSA6IHIuYXR0YWNoRXZlbnQgPyByLmF0dGFjaEV2ZW50KCJvbiIgKyBlLCB0KSA6IHJbIm9uIiArIGVdID0gdDsKICAgICAgICAgIH0pOwogICAgICAgIH0pLCB0aGlzOwogICAgICB9LAogICAgICBvZmY6IGZ1bmN0aW9uIG9mZihlLCB0LCBuKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuZm9yRWFjaChmdW5jdGlvbiAocikgewogICAgICAgICAgZS5zcGxpdCgiICIpLmZvckVhY2goZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgci5yZW1vdmVFdmVudExpc3RlbmVyID8gci5yZW1vdmVFdmVudExpc3RlbmVyKGUsIHQsIG4gfHwgITEpIDogci5kZXRhY2hFdmVudCA/IHIuZGV0YWNoRXZlbnQoIm9uIiArIGUsIHQpIDogclsib24iICsgZV0gPSBudWxsOwogICAgICAgICAgfSk7CiAgICAgICAgfSksIHRoaXM7CiAgICAgIH0sCiAgICAgIGh0bWw6IGZ1bmN0aW9uIGh0bWwoZSkgewogICAgICAgIHJldHVybiB2b2lkIDAgIT09IGUgPyAodGhpcy5mb3JFYWNoKGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICB0LmlubmVySFRNTCA9IGU7CiAgICAgICAgfSksIHRoaXMpIDogdGhpc1swXS5pbm5lckhUTUw7CiAgICAgIH0sCiAgICAgIHRleHQ6IGZ1bmN0aW9uIHRleHQoZSkgewogICAgICAgIHJldHVybiB2b2lkIDAgIT09IGUgPyAodGhpcy5mb3JFYWNoKGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICB0LmlubmVyVGV4dCA9IGU7CiAgICAgICAgfSksIHRoaXMpIDogdGhpc1swXS5pbm5lclRleHQ7CiAgICAgIH0sCiAgICAgIGVtcHR5OiBmdW5jdGlvbiBlbXB0eShlKSB7CiAgICAgICAgcmV0dXJuIGUgPSBlIHx8IDAsIHRoaXMuZm9yRWFjaChmdW5jdGlvbiAodCkgewogICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoZSkgewogICAgICAgICAgICB0LmlubmVyVGV4dCA9ICIiOwogICAgICAgICAgfSwgZSk7CiAgICAgICAgfSksIHRoaXM7CiAgICAgIH0sCiAgICAgIHZhbDogZnVuY3Rpb24gdmFsKGUpIHsKICAgICAgICByZXR1cm4gdm9pZCAwICE9PSBlID8gKHRoaXMuZm9yRWFjaChmdW5jdGlvbiAodCkgewogICAgICAgICAgdC52YWx1ZSA9IGU7CiAgICAgICAgfSksIHRoaXMpIDogdGhpc1swXS52YWx1ZSB8fCAiIjsKICAgICAgfSwKICAgICAgYXR0cjogZnVuY3Rpb24gYXR0cigpIHsKICAgICAgICB2YXIgZSA9IGFyZ3VtZW50czsKCiAgICAgICAgaWYgKCJvYmplY3QiID09IG8oYXJndW1lbnRzWzBdKSkgewogICAgICAgICAgdmFyIHQgPSBhcmd1bWVudHNbMF0sCiAgICAgICAgICAgICAgbiA9IHRoaXM7CiAgICAgICAgICByZXR1cm4gT2JqZWN0LmtleXModCkuZm9yRWFjaChmdW5jdGlvbiAoZSkgewogICAgICAgICAgICBuLmZvckVhY2goZnVuY3Rpb24gKG4pIHsKICAgICAgICAgICAgICBuLnNldEF0dHJpYnV0ZShlLCB0W2VdKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9KSwgdGhpczsKICAgICAgICB9CgogICAgICAgIHJldHVybiAic3RyaW5nIiA9PSB0eXBlb2YgYXJndW1lbnRzWzBdICYmIGFyZ3VtZW50cy5sZW5ndGggPCAyID8gdGhpc1swXS5nZXRBdHRyaWJ1dGUoYXJndW1lbnRzWzBdKSB8fCAiIiA6ICh0aGlzLmZvckVhY2goZnVuY3Rpb24gKHQpIHsKICAgICAgICAgIHQuc2V0QXR0cmlidXRlKGVbMF0sIGVbMV0pOwogICAgICAgIH0pLCB0aGlzKTsKICAgICAgfSwKICAgICAgcmVtb3ZlQXR0cjogZnVuY3Rpb24gcmVtb3ZlQXR0cihlKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuZm9yRWFjaChmdW5jdGlvbiAodCkgewogICAgICAgICAgdmFyIG4sCiAgICAgICAgICAgICAgciA9IDAsCiAgICAgICAgICAgICAgbyA9IGUgJiYgZS5tYXRjaCgvW15ceDIwXHRcclxuXGZcKlwvXFxdKy9nKTsKICAgICAgICAgIGlmIChvICYmIDEgPT09IHQubm9kZVR5cGUpIGZvciAoOyBuID0gb1tyKytdOykgewogICAgICAgICAgICB0LnJlbW92ZUF0dHJpYnV0ZShuKTsKICAgICAgICAgIH0KICAgICAgICB9KSwgdGhpczsKICAgICAgfSwKICAgICAgaGFzQ2xhc3M6IGZ1bmN0aW9uIGhhc0NsYXNzKGUpIHsKICAgICAgICByZXR1cm4gISF0aGlzWzBdICYmIG5ldyBSZWdFeHAoIihcXHN8XikiICsgZSArICIoXFxzfCQpIikudGVzdCh0aGlzWzBdLmdldEF0dHJpYnV0ZSgiY2xhc3MiKSk7CiAgICAgIH0sCiAgICAgIGFkZENsYXNzOiBmdW5jdGlvbiBhZGRDbGFzcyhlKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuZm9yRWFjaChmdW5jdGlvbiAodCkgewogICAgICAgICAgdmFyIG4gPSAoMCwgbFsiZGVmYXVsdCJdKSh0KSwKICAgICAgICAgICAgICByID0gbi5hdHRyKCJjbGFzcyIpOwogICAgICAgICAgbi5oYXNDbGFzcyhlKSB8fCBuLmF0dHIoImNsYXNzIiwgciArPSAiICIgKyBlKTsKICAgICAgICB9KSwgdGhpczsKICAgICAgfSwKICAgICAgcmVtb3ZlQ2xhc3M6IGZ1bmN0aW9uIHJlbW92ZUNsYXNzKGUpIHsKICAgICAgICByZXR1cm4gdGhpcy5mb3JFYWNoKGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICB2YXIgbiA9ICgwLCBsWyJkZWZhdWx0Il0pKHQpLAogICAgICAgICAgICAgIHIgPSBuLmF0dHIoImNsYXNzIik7CgogICAgICAgICAgaWYgKG4uaGFzQ2xhc3MoZSkpIHsKICAgICAgICAgICAgdmFyIG8gPSBuZXcgUmVnRXhwKCIoXFxzfF4pIiArIGUgKyAiKFxcc3wkKSIpOwogICAgICAgICAgICBuLmF0dHIoImNsYXNzIiwgci5yZXBsYWNlKG8sICIiKSk7CiAgICAgICAgICB9CiAgICAgICAgfSksIHRoaXM7CiAgICAgIH0KICAgIH0pLCAoMCwgYVsiZGVmYXVsdCJdKShsWyJkZWZhdWx0Il0sIHsKICAgICAgZXh0ZW5kOiBhWyJkZWZhdWx0Il0sCiAgICAgIG5vb3A6IGZ1bmN0aW9uIG5vb3AoKSB7fSwKICAgICAgbmF2aTogaCwKICAgICAgdWE6IGgudXNlckFnZW50LAogICAgICBsYW5nOiBoLmxhbmd1YWdlIHx8IGgubGFuZ3VhZ2VzWzBdLAogICAgICBkZXRlY3Q6IHVbImRlZmF1bHQiXSwKICAgICAgc3RvcmU6IHBbImRlZmF1bHQiXSwKICAgICAgZXNjYXBlOiBmdW5jdGlvbiBlc2NhcGUoZSkgewogICAgICAgIHJldHVybiBlICYmIGcudGVzdChlKSA/IGUucmVwbGFjZSh2LCBmdW5jdGlvbiAoZSkgewogICAgICAgICAgcmV0dXJuIGJbZV07CiAgICAgICAgfSkgOiBlOwogICAgICB9LAogICAgICB1bmVzY2FwZTogZnVuY3Rpb24gdW5lc2NhcGUoZSkgewogICAgICAgIHJldHVybiBlICYmIHkudGVzdChlKSA/IGUucmVwbGFjZShtLCBmdW5jdGlvbiAoZSkgewogICAgICAgICAgcmV0dXJuIHdbZV07CiAgICAgICAgfSkgOiBlOwogICAgICB9LAogICAgICBkeW5hbWljTG9hZFNvdXJjZTogZnVuY3Rpb24gZHluYW1pY0xvYWRTb3VyY2UoZSwgdCkgewogICAgICAgIGlmICgoMCwgbFsiZGVmYXVsdCJdKSgnc2NyaXB0W3NyYz0iJyArIGUgKyAnIl0nKS5sZW5ndGgpIHQgJiYgdCgpO2Vsc2UgewogICAgICAgICAgdmFyIG4gPSBmLmNyZWF0ZUVsZW1lbnQoInNjcmlwdCIpOwogICAgICAgICAgbi5vbmxvYWQgPSBuLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIGUgPSB0aGlzOwogICAgICAgICAgICBlLm9ubG9hZCA9IGUub25yZWFkeXN0YXRlY2hhbmdlID0gbnVsbCwgdCAmJiB0KCksICgwLCBsWyJkZWZhdWx0Il0pKG4pLnJlbW92ZSgpOwogICAgICAgICAgfSwgbi5hc3luYyA9ICEwLCBuLnNldEF0dHJpYnV0ZSgicmVmZXJyZXJQb2xpY3kiLCAibm8tcmVmZXJyZXIiKTsKICAgICAgICAgICgwLCBsWyJkZWZhdWx0Il0pKCJoZWFkIilbMF0uYXBwZW5kQ2hpbGQobiksIG4uc3JjID0gZTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIHNka0xvYWRlcjogZnVuY3Rpb24gc2RrTG9hZGVyKGUsIHQsIG4pIHsKICAgICAgICB0IGluIHdpbmRvdyAmJiB3aW5kb3dbdF0gPyAoayAmJiBjbGVhclRpbWVvdXQoayksIG4gJiYgbigpKSA6IGxbImRlZmF1bHQiXS5keW5hbWljTG9hZFNvdXJjZShlLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBrID0gc2V0VGltZW91dChsWyJkZWZhdWx0Il0uc2RrTG9hZGVyKGUsIHQsIG4pLCAxMDApOwogICAgICAgIH0pOwogICAgICB9LAogICAgICBkZWxldGVJbldpbjogZnVuY3Rpb24gZGVsZXRlSW5XaW4oZSwgdCkgewogICAgICAgIHZhciBuID0gZnVuY3Rpb24gbih0KSB7CiAgICAgICAgICBpZiAoZSBpbiB3aW5kb3cpIHRyeSB7CiAgICAgICAgICAgIGRlbGV0ZSB3aW5kb3dbZV07CiAgICAgICAgICB9IGNhdGNoICh0KSB7CiAgICAgICAgICAgIHdpbmRvd1tlXSA9IG51bGw7CiAgICAgICAgICB9CiAgICAgICAgfTsKCiAgICAgICAgMCA9PT0gdCA/IG4oKSA6IHNldFRpbWVvdXQobiwgdCB8fCA1MDApOwogICAgICB9LAogICAgICBhamF4OiBmdW5jdGlvbiBhamF4KGUpIHsKICAgICAgICBlID0gZSB8fCB7fSwgZS50eXBlID0gKGUudHlwZSB8fCAiR0VUIikudG9VcHBlckNhc2UoKSwgZS5kYXRhVHlwZSA9IGUuZGF0YVR5cGUgfHwgImpzb24iLCBlLmFzeW5jID0gZS5hc3luYyB8fCAhMCwgZS50aW1lb3V0ID0gZS50aW1lb3V0IHx8IDhlMzsKICAgICAgICB2YXIgdCA9ICJbb2JqZWN0IEZvcm1EYXRhXSIgPT0ge30udG9TdHJpbmcuY2FsbChlLmRhdGEpID8gZS5kYXRhIDogZnVuY3Rpb24gKGUpIHsKICAgICAgICAgIHZhciB0ID0gW107CgogICAgICAgICAgZm9yICh2YXIgbiBpbiBlKSB7CiAgICAgICAgICAgIHQucHVzaChlbmNvZGVVUklDb21wb25lbnQobikgKyAiPSIgKyBlbmNvZGVVUklDb21wb25lbnQoZVtuXSkpOwogICAgICAgICAgfQoKICAgICAgICAgIHJldHVybiB0LnB1c2goInQ9IiArIERhdGUubm93KCkpLCB0LmpvaW4oIiYiKTsKICAgICAgICB9KGUuZGF0YSksCiAgICAgICAgICAgIG4gPSBudWxsLAogICAgICAgICAgICByID0gIlhNTEh0dHBSZXF1ZXN0IiBpbiB3aW5kb3cgPyBuZXcgWE1MSHR0cFJlcXVlc3QoKSA6IG5ldyBBY3RpdmVYT2JqZWN0KCJNaWNyb3NvZnQuWE1MSFRUUCIpOwogICAgICAgIHIub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKHQpIHsKICAgICAgICAgIGlmICg0ID09IHIucmVhZHlTdGF0ZSkgewogICAgICAgICAgICBjbGVhclRpbWVvdXQobik7CiAgICAgICAgICAgIHZhciBvID0gci5zdGF0dXM7CiAgICAgICAgICAgIG8gPj0gMjAwICYmIG8gPCAzMDAgPyBlLnN1Y2Nlc3MgJiYgZS5zdWNjZXNzKEpTT04ucGFyc2Uoci5yZXNwb25zZVRleHQpKSA6IGUuZmFpbCAmJiBlLmZhaWwobyk7CiAgICAgICAgICB9CiAgICAgICAgfSwgIkdFVCIgPT0gZS50eXBlID8gKHIub3BlbigiR0VUIiwgZS51cmwgKyAiPyIgKyB0LCBlLmFzeW5jKSwgci5zZW5kKG51bGwpKSA6ICJQT1NUIiA9PSBlLnR5cGUgJiYgKHIub3BlbigiUE9TVCIsIGUudXJsLCBlLmFzeW5jKSwgdm9pZCAwID09IGUuY29udGVudFR5cGUgfHwgbnVsbCA9PSBlLmNvbnRlbnRUeXBlID8gci5zZW5kKHQpIDogKHIuc2V0UmVxdWVzdEhlYWRlcigiQ29udGVudC1UeXBlIiwgZS5jb250ZW50VHlwZSksIHIuc2VuZChKU09OLnN0cmluZ2lmeShlLmRhdGEpKSkpLCBuID0gc2V0VGltZW91dChmdW5jdGlvbiAoZSkgewogICAgICAgICAgY2xlYXJUaW1lb3V0KG4pLCByLmFib3J0KCk7CiAgICAgICAgfSwgZS50aW1lb3V0KTsKICAgICAgfQogICAgfSksIHRbImRlZmF1bHQiXSA9IGxbImRlZmF1bHQiXTsKICB9LCBmdW5jdGlvbiAoZSwgdCwgbikgewogICAgInVzZSBzdHJpY3QiOwoKICAgIHZhciByID0gVHlwZUVycm9yLAogICAgICAgIG8gPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yOwogICAgaWYgKG8pIHRyeSB7CiAgICAgIG8oe30sICIiKTsKICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgbyA9IG51bGw7CiAgICB9CgogICAgdmFyIGksCiAgICAgICAgYSwKICAgICAgICBzID0gZnVuY3Rpb24gcygpIHsKICAgICAgdGhyb3cgbmV3IHIoKTsKICAgIH0sCiAgICAgICAgbCA9IG8gPyBmdW5jdGlvbiAoKSB7CiAgICAgIHRyeSB7CiAgICAgICAgcmV0dXJuIGFyZ3VtZW50cy5jYWxsZWUsIHM7CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICB0cnkgewogICAgICAgICAgcmV0dXJuIG8oYXJndW1lbnRzLCAiY2FsbGVlIikuZ2V0OwogICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgIHJldHVybiBzOwogICAgICAgIH0KICAgICAgfQogICAgfSgpIDogcywKICAgICAgICBjID0gbig0NykoKSwKICAgICAgICB1ID0gT2JqZWN0LmdldFByb3RvdHlwZU9mIHx8IGZ1bmN0aW9uIChlKSB7CiAgICAgIHJldHVybiBlLl9fcHJvdG9fXzsKICAgIH0sCiAgICAgICAgZCA9IGkgPyB1KGkpIDogdm9pZCAwLAogICAgICAgIHAgPSBhID8gdShhKSA6IHZvaWQgMCwKICAgICAgICBmID0gYSA/IGEoKSA6IHZvaWQgMCwKICAgICAgICBoID0gInVuZGVmaW5lZCIgPT0gdHlwZW9mIFVpbnQ4QXJyYXkgPyB2b2lkIDAgOiB1KFVpbnQ4QXJyYXkpLAogICAgICAgIHYgPSB7CiAgICAgICIlQXJyYXklIjogQXJyYXksCiAgICAgICIlQXJyYXlCdWZmZXIlIjogInVuZGVmaW5lZCIgPT0gdHlwZW9mIEFycmF5QnVmZmVyID8gdm9pZCAwIDogQXJyYXlCdWZmZXIsCiAgICAgICIlQXJyYXlCdWZmZXJQcm90b3R5cGUlIjogInVuZGVmaW5lZCIgPT0gdHlwZW9mIEFycmF5QnVmZmVyID8gdm9pZCAwIDogQXJyYXlCdWZmZXIucHJvdG90eXBlLAogICAgICAiJUFycmF5SXRlcmF0b3JQcm90b3R5cGUlIjogYyA/IHUoW11bU3ltYm9sLml0ZXJhdG9yXSgpKSA6IHZvaWQgMCwKICAgICAgIiVBcnJheVByb3RvdHlwZSUiOiBBcnJheS5wcm90b3R5cGUsCiAgICAgICIlQXJyYXlQcm90b19lbnRyaWVzJSI6IEFycmF5LnByb3RvdHlwZS5lbnRyaWVzLAogICAgICAiJUFycmF5UHJvdG9fZm9yRWFjaCUiOiBBcnJheS5wcm90b3R5cGUuZm9yRWFjaCwKICAgICAgIiVBcnJheVByb3RvX2tleXMlIjogQXJyYXkucHJvdG90eXBlLmtleXMsCiAgICAgICIlQXJyYXlQcm90b192YWx1ZXMlIjogQXJyYXkucHJvdG90eXBlLnZhbHVlcywKICAgICAgIiVBc3luY0Zyb21TeW5jSXRlcmF0b3JQcm90b3R5cGUlIjogdm9pZCAwLAogICAgICAiJUFzeW5jRnVuY3Rpb24lIjogdm9pZCAwLAogICAgICAiJUFzeW5jRnVuY3Rpb25Qcm90b3R5cGUlIjogdm9pZCAwLAogICAgICAiJUFzeW5jR2VuZXJhdG9yJSI6IGEgPyB1KGYpIDogdm9pZCAwLAogICAgICAiJUFzeW5jR2VuZXJhdG9yRnVuY3Rpb24lIjogcCwKICAgICAgIiVBc3luY0dlbmVyYXRvclByb3RvdHlwZSUiOiBwID8gcC5wcm90b3R5cGUgOiB2b2lkIDAsCiAgICAgICIlQXN5bmNJdGVyYXRvclByb3RvdHlwZSUiOiBmICYmIGMgJiYgU3ltYm9sLmFzeW5jSXRlcmF0b3IgPyBmW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSgpIDogdm9pZCAwLAogICAgICAiJUF0b21pY3MlIjogInVuZGVmaW5lZCIgPT0gdHlwZW9mIEF0b21pY3MgPyB2b2lkIDAgOiBBdG9taWNzLAogICAgICAiJUJvb2xlYW4lIjogQm9vbGVhbiwKICAgICAgIiVCb29sZWFuUHJvdG90eXBlJSI6IEJvb2xlYW4ucHJvdG90eXBlLAogICAgICAiJURhdGFWaWV3JSI6ICJ1bmRlZmluZWQiID09IHR5cGVvZiBEYXRhVmlldyA/IHZvaWQgMCA6IERhdGFWaWV3LAogICAgICAiJURhdGFWaWV3UHJvdG90eXBlJSI6ICJ1bmRlZmluZWQiID09IHR5cGVvZiBEYXRhVmlldyA/IHZvaWQgMCA6IERhdGFWaWV3LnByb3RvdHlwZSwKICAgICAgIiVEYXRlJSI6IERhdGUsCiAgICAgICIlRGF0ZVByb3RvdHlwZSUiOiBEYXRlLnByb3RvdHlwZSwKICAgICAgIiVkZWNvZGVVUkklIjogZGVjb2RlVVJJLAogICAgICAiJWRlY29kZVVSSUNvbXBvbmVudCUiOiBkZWNvZGVVUklDb21wb25lbnQsCiAgICAgICIlZW5jb2RlVVJJJSI6IGVuY29kZVVSSSwKICAgICAgIiVlbmNvZGVVUklDb21wb25lbnQlIjogZW5jb2RlVVJJQ29tcG9uZW50LAogICAgICAiJUVycm9yJSI6IEVycm9yLAogICAgICAiJUVycm9yUHJvdG90eXBlJSI6IEVycm9yLnByb3RvdHlwZSwKICAgICAgIiVldmFsJSI6IGV2YWwsCiAgICAgICIlRXZhbEVycm9yJSI6IEV2YWxFcnJvciwKICAgICAgIiVFdmFsRXJyb3JQcm90b3R5cGUlIjogRXZhbEVycm9yLnByb3RvdHlwZSwKICAgICAgIiVGbG9hdDMyQXJyYXklIjogInVuZGVmaW5lZCIgPT0gdHlwZW9mIEZsb2F0MzJBcnJheSA/IHZvaWQgMCA6IEZsb2F0MzJBcnJheSwKICAgICAgIiVGbG9hdDMyQXJyYXlQcm90b3R5cGUlIjogInVuZGVmaW5lZCIgPT0gdHlwZW9mIEZsb2F0MzJBcnJheSA/IHZvaWQgMCA6IEZsb2F0MzJBcnJheS5wcm90b3R5cGUsCiAgICAgICIlRmxvYXQ2NEFycmF5JSI6ICJ1bmRlZmluZWQiID09IHR5cGVvZiBGbG9hdDY0QXJyYXkgPyB2b2lkIDAgOiBGbG9hdDY0QXJyYXksCiAgICAgICIlRmxvYXQ2NEFycmF5UHJvdG90eXBlJSI6ICJ1bmRlZmluZWQiID09IHR5cGVvZiBGbG9hdDY0QXJyYXkgPyB2b2lkIDAgOiBGbG9hdDY0QXJyYXkucHJvdG90eXBlLAogICAgICAiJUZ1bmN0aW9uJSI6IEZ1bmN0aW9uLAogICAgICAiJUZ1bmN0aW9uUHJvdG90eXBlJSI6IEZ1bmN0aW9uLnByb3RvdHlwZSwKICAgICAgIiVHZW5lcmF0b3IlIjogaSA/IHUoaSgpKSA6IHZvaWQgMCwKICAgICAgIiVHZW5lcmF0b3JGdW5jdGlvbiUiOiBkLAogICAgICAiJUdlbmVyYXRvclByb3RvdHlwZSUiOiBkID8gZC5wcm90b3R5cGUgOiB2b2lkIDAsCiAgICAgICIlSW50OEFycmF5JSI6ICJ1bmRlZmluZWQiID09IHR5cGVvZiBJbnQ4QXJyYXkgPyB2b2lkIDAgOiBJbnQ4QXJyYXksCiAgICAgICIlSW50OEFycmF5UHJvdG90eXBlJSI6ICJ1bmRlZmluZWQiID09IHR5cGVvZiBJbnQ4QXJyYXkgPyB2b2lkIDAgOiBJbnQ4QXJyYXkucHJvdG90eXBlLAogICAgICAiJUludDE2QXJyYXklIjogInVuZGVmaW5lZCIgPT0gdHlwZW9mIEludDE2QXJyYXkgPyB2b2lkIDAgOiBJbnQxNkFycmF5LAogICAgICAiJUludDE2QXJyYXlQcm90b3R5cGUlIjogInVuZGVmaW5lZCIgPT0gdHlwZW9mIEludDE2QXJyYXkgPyB2b2lkIDAgOiBJbnQ4QXJyYXkucHJvdG90eXBlLAogICAgICAiJUludDMyQXJyYXklIjogInVuZGVmaW5lZCIgPT0gdHlwZW9mIEludDMyQXJyYXkgPyB2b2lkIDAgOiBJbnQzMkFycmF5LAogICAgICAiJUludDMyQXJyYXlQcm90b3R5cGUlIjogInVuZGVmaW5lZCIgPT0gdHlwZW9mIEludDMyQXJyYXkgPyB2b2lkIDAgOiBJbnQzMkFycmF5LnByb3RvdHlwZSwKICAgICAgIiVpc0Zpbml0ZSUiOiBpc0Zpbml0ZSwKICAgICAgIiVpc05hTiUiOiBpc05hTiwKICAgICAgIiVJdGVyYXRvclByb3RvdHlwZSUiOiBjID8gdSh1KFtdW1N5bWJvbC5pdGVyYXRvcl0oKSkpIDogdm9pZCAwLAogICAgICAiJUpTT04lIjogIm9iamVjdCIgPT0gKHR5cGVvZiBKU09OID09PSAidW5kZWZpbmVkIiA/ICJ1bmRlZmluZWQiIDogX3R5cGVvZihKU09OKSkgPyBKU09OIDogdm9pZCAwLAogICAgICAiJUpTT05QYXJzZSUiOiAib2JqZWN0IiA9PSAodHlwZW9mIEpTT04gPT09ICJ1bmRlZmluZWQiID8gInVuZGVmaW5lZCIgOiBfdHlwZW9mKEpTT04pKSA/IEpTT04ucGFyc2UgOiB2b2lkIDAsCiAgICAgICIlTWFwJSI6ICJ1bmRlZmluZWQiID09IHR5cGVvZiBNYXAgPyB2b2lkIDAgOiBNYXAsCiAgICAgICIlTWFwSXRlcmF0b3JQcm90b3R5cGUlIjogInVuZGVmaW5lZCIgIT0gdHlwZW9mIE1hcCAmJiBjID8gdShuZXcgTWFwKClbU3ltYm9sLml0ZXJhdG9yXSgpKSA6IHZvaWQgMCwKICAgICAgIiVNYXBQcm90b3R5cGUlIjogInVuZGVmaW5lZCIgPT0gdHlwZW9mIE1hcCA/IHZvaWQgMCA6IE1hcC5wcm90b3R5cGUsCiAgICAgICIlTWF0aCUiOiBNYXRoLAogICAgICAiJU51bWJlciUiOiBOdW1iZXIsCiAgICAgICIlTnVtYmVyUHJvdG90eXBlJSI6IE51bWJlci5wcm90b3R5cGUsCiAgICAgICIlT2JqZWN0JSI6IE9iamVjdCwKICAgICAgIiVPYmplY3RQcm90b3R5cGUlIjogT2JqZWN0LnByb3RvdHlwZSwKICAgICAgIiVPYmpQcm90b190b1N0cmluZyUiOiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLAogICAgICAiJU9ialByb3RvX3ZhbHVlT2YlIjogT2JqZWN0LnByb3RvdHlwZS52YWx1ZU9mLAogICAgICAiJXBhcnNlRmxvYXQlIjogcGFyc2VGbG9hdCwKICAgICAgIiVwYXJzZUludCUiOiBwYXJzZUludCwKICAgICAgIiVQcm9taXNlJSI6ICJ1bmRlZmluZWQiID09IHR5cGVvZiBQcm9taXNlID8gdm9pZCAwIDogUHJvbWlzZSwKICAgICAgIiVQcm9taXNlUHJvdG90eXBlJSI6ICJ1bmRlZmluZWQiID09IHR5cGVvZiBQcm9taXNlID8gdm9pZCAwIDogUHJvbWlzZS5wcm90b3R5cGUsCiAgICAgICIlUHJvbWlzZVByb3RvX3RoZW4lIjogInVuZGVmaW5lZCIgPT0gdHlwZW9mIFByb21pc2UgPyB2b2lkIDAgOiBQcm9taXNlLnByb3RvdHlwZS50aGVuLAogICAgICAiJVByb21pc2VfYWxsJSI6ICJ1bmRlZmluZWQiID09IHR5cGVvZiBQcm9taXNlID8gdm9pZCAwIDogUHJvbWlzZS5hbGwsCiAgICAgICIlUHJvbWlzZV9yZWplY3QlIjogInVuZGVmaW5lZCIgPT0gdHlwZW9mIFByb21pc2UgPyB2b2lkIDAgOiBQcm9taXNlLnJlamVjdCwKICAgICAgIiVQcm9taXNlX3Jlc29sdmUlIjogInVuZGVmaW5lZCIgPT0gdHlwZW9mIFByb21pc2UgPyB2b2lkIDAgOiBQcm9taXNlLnJlc29sdmUsCiAgICAgICIlUHJveHklIjogInVuZGVmaW5lZCIgPT0gdHlwZW9mIFByb3h5ID8gdm9pZCAwIDogUHJveHksCiAgICAgICIlUmFuZ2VFcnJvciUiOiBSYW5nZUVycm9yLAogICAgICAiJVJhbmdlRXJyb3JQcm90b3R5cGUlIjogUmFuZ2VFcnJvci5wcm90b3R5cGUsCiAgICAgICIlUmVmZXJlbmNlRXJyb3IlIjogUmVmZXJlbmNlRXJyb3IsCiAgICAgICIlUmVmZXJlbmNlRXJyb3JQcm90b3R5cGUlIjogUmVmZXJlbmNlRXJyb3IucHJvdG90eXBlLAogICAgICAiJVJlZmxlY3QlIjogInVuZGVmaW5lZCIgPT0gdHlwZW9mIFJlZmxlY3QgPyB2b2lkIDAgOiBSZWZsZWN0LAogICAgICAiJVJlZ0V4cCUiOiBSZWdFeHAsCiAgICAgICIlUmVnRXhwUHJvdG90eXBlJSI6IFJlZ0V4cC5wcm90b3R5cGUsCiAgICAgICIlU2V0JSI6ICJ1bmRlZmluZWQiID09IHR5cGVvZiBTZXQgPyB2b2lkIDAgOiBTZXQsCiAgICAgICIlU2V0SXRlcmF0b3JQcm90b3R5cGUlIjogInVuZGVmaW5lZCIgIT0gdHlwZW9mIFNldCAmJiBjID8gdShuZXcgU2V0KClbU3ltYm9sLml0ZXJhdG9yXSgpKSA6IHZvaWQgMCwKICAgICAgIiVTZXRQcm90b3R5cGUlIjogInVuZGVmaW5lZCIgPT0gdHlwZW9mIFNldCA/IHZvaWQgMCA6IFNldC5wcm90b3R5cGUsCiAgICAgICIlU2hhcmVkQXJyYXlCdWZmZXIlIjogInVuZGVmaW5lZCIgPT0gdHlwZW9mIFNoYXJlZEFycmF5QnVmZmVyID8gdm9pZCAwIDogU2hhcmVkQXJyYXlCdWZmZXIsCiAgICAgICIlU2hhcmVkQXJyYXlCdWZmZXJQcm90b3R5cGUlIjogInVuZGVmaW5lZCIgPT0gdHlwZW9mIFNoYXJlZEFycmF5QnVmZmVyID8gdm9pZCAwIDogU2hhcmVkQXJyYXlCdWZmZXIucHJvdG90eXBlLAogICAgICAiJVN0cmluZyUiOiBTdHJpbmcsCiAgICAgICIlU3RyaW5nSXRlcmF0b3JQcm90b3R5cGUlIjogYyA/IHUoIiJbU3ltYm9sLml0ZXJhdG9yXSgpKSA6IHZvaWQgMCwKICAgICAgIiVTdHJpbmdQcm90b3R5cGUlIjogU3RyaW5nLnByb3RvdHlwZSwKICAgICAgIiVTeW1ib2wlIjogYyA/IFN5bWJvbCA6IHZvaWQgMCwKICAgICAgIiVTeW1ib2xQcm90b3R5cGUlIjogYyA/IFN5bWJvbC5wcm90b3R5cGUgOiB2b2lkIDAsCiAgICAgICIlU3ludGF4RXJyb3IlIjogU3ludGF4RXJyb3IsCiAgICAgICIlU3ludGF4RXJyb3JQcm90b3R5cGUlIjogU3ludGF4RXJyb3IucHJvdG90eXBlLAogICAgICAiJVRocm93VHlwZUVycm9yJSI6IGwsCiAgICAgICIlVHlwZWRBcnJheSUiOiBoLAogICAgICAiJVR5cGVkQXJyYXlQcm90b3R5cGUlIjogaCA/IGgucHJvdG90eXBlIDogdm9pZCAwLAogICAgICAiJVR5cGVFcnJvciUiOiByLAogICAgICAiJVR5cGVFcnJvclByb3RvdHlwZSUiOiByLnByb3RvdHlwZSwKICAgICAgIiVVaW50OEFycmF5JSI6ICJ1bmRlZmluZWQiID09IHR5cGVvZiBVaW50OEFycmF5ID8gdm9pZCAwIDogVWludDhBcnJheSwKICAgICAgIiVVaW50OEFycmF5UHJvdG90eXBlJSI6ICJ1bmRlZmluZWQiID09IHR5cGVvZiBVaW50OEFycmF5ID8gdm9pZCAwIDogVWludDhBcnJheS5wcm90b3R5cGUsCiAgICAgICIlVWludDhDbGFtcGVkQXJyYXklIjogInVuZGVmaW5lZCIgPT0gdHlwZW9mIFVpbnQ4Q2xhbXBlZEFycmF5ID8gdm9pZCAwIDogVWludDhDbGFtcGVkQXJyYXksCiAgICAgICIlVWludDhDbGFtcGVkQXJyYXlQcm90b3R5cGUlIjogInVuZGVmaW5lZCIgPT0gdHlwZW9mIFVpbnQ4Q2xhbXBlZEFycmF5ID8gdm9pZCAwIDogVWludDhDbGFtcGVkQXJyYXkucHJvdG90eXBlLAogICAgICAiJVVpbnQxNkFycmF5JSI6ICJ1bmRlZmluZWQiID09IHR5cGVvZiBVaW50MTZBcnJheSA/IHZvaWQgMCA6IFVpbnQxNkFycmF5LAogICAgICAiJVVpbnQxNkFycmF5UHJvdG90eXBlJSI6ICJ1bmRlZmluZWQiID09IHR5cGVvZiBVaW50MTZBcnJheSA/IHZvaWQgMCA6IFVpbnQxNkFycmF5LnByb3RvdHlwZSwKICAgICAgIiVVaW50MzJBcnJheSUiOiAidW5kZWZpbmVkIiA9PSB0eXBlb2YgVWludDMyQXJyYXkgPyB2b2lkIDAgOiBVaW50MzJBcnJheSwKICAgICAgIiVVaW50MzJBcnJheVByb3RvdHlwZSUiOiAidW5kZWZpbmVkIiA9PSB0eXBlb2YgVWludDMyQXJyYXkgPyB2b2lkIDAgOiBVaW50MzJBcnJheS5wcm90b3R5cGUsCiAgICAgICIlVVJJRXJyb3IlIjogVVJJRXJyb3IsCiAgICAgICIlVVJJRXJyb3JQcm90b3R5cGUlIjogVVJJRXJyb3IucHJvdG90eXBlLAogICAgICAiJVdlYWtNYXAlIjogInVuZGVmaW5lZCIgPT0gdHlwZW9mIFdlYWtNYXAgPyB2b2lkIDAgOiBXZWFrTWFwLAogICAgICAiJVdlYWtNYXBQcm90b3R5cGUlIjogInVuZGVmaW5lZCIgPT0gdHlwZW9mIFdlYWtNYXAgPyB2b2lkIDAgOiBXZWFrTWFwLnByb3RvdHlwZSwKICAgICAgIiVXZWFrU2V0JSI6ICJ1bmRlZmluZWQiID09IHR5cGVvZiBXZWFrU2V0ID8gdm9pZCAwIDogV2Vha1NldCwKICAgICAgIiVXZWFrU2V0UHJvdG90eXBlJSI6ICJ1bmRlZmluZWQiID09IHR5cGVvZiBXZWFrU2V0ID8gdm9pZCAwIDogV2Vha1NldC5wcm90b3R5cGUKICAgIH0sCiAgICAgICAgZyA9IG4oNCksCiAgICAgICAgbSA9IGcuY2FsbChGdW5jdGlvbi5jYWxsLCBTdHJpbmcucHJvdG90eXBlLnJlcGxhY2UpLAogICAgICAgIHkgPSAvW14lLltcXV0rfFxbKD86KC0/XGQrKD86XC5cZCspPyl8KFsiJ10pKCg/Oig/IVwyKVteXFxdfFxcLikqPylcMilcXXwoPz0oPzpcLnxcW1xdKSg/OlwufFxbXF18JSQpKS9nLAogICAgICAgIGIgPSAvXFwoXFwpPy9nLAogICAgICAgIHcgPSBmdW5jdGlvbiB3KGUpIHsKICAgICAgdmFyIHQgPSBbXTsKICAgICAgcmV0dXJuIG0oZSwgeSwgZnVuY3Rpb24gKGUsIG4sIHIsIG8pIHsKICAgICAgICB0W3QubGVuZ3RoXSA9IHIgPyBtKG8sIGIsICIkMSIpIDogbiB8fCBlOwogICAgICB9KSwgdDsKICAgIH0sCiAgICAgICAgeCA9IGZ1bmN0aW9uIHgoZSwgdCkgewogICAgICBpZiAoIShlIGluIHYpKSB0aHJvdyBuZXcgU3ludGF4RXJyb3IoImludHJpbnNpYyAiICsgZSArICIgZG9lcyBub3QgZXhpc3QhIik7CiAgICAgIGlmICh2b2lkIDAgPT09IHZbZV0gJiYgIXQpIHRocm93IG5ldyByKCJpbnRyaW5zaWMgIiArIGUgKyAiIGV4aXN0cywgYnV0IGlzIG5vdCBhdmFpbGFibGUuIFBsZWFzZSBmaWxlIGFuIGlzc3VlISIpOwogICAgICByZXR1cm4gdltlXTsKICAgIH07CgogICAgZS5leHBvcnRzID0gZnVuY3Rpb24gKGUsIHQpIHsKICAgICAgaWYgKCJzdHJpbmciICE9IHR5cGVvZiBlIHx8IDAgPT09IGUubGVuZ3RoKSB0aHJvdyBuZXcgVHlwZUVycm9yKCJpbnRyaW5zaWMgbmFtZSBtdXN0IGJlIGEgbm9uLWVtcHR5IHN0cmluZyIpOwogICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgImJvb2xlYW4iICE9IHR5cGVvZiB0KSB0aHJvdyBuZXcgVHlwZUVycm9yKCciYWxsb3dNaXNzaW5nIiBhcmd1bWVudCBtdXN0IGJlIGEgYm9vbGVhbicpOwoKICAgICAgZm9yICh2YXIgbiA9IHcoZSksIGkgPSB4KCIlIiArIChuLmxlbmd0aCA+IDAgPyBuWzBdIDogIiIpICsgIiUiLCB0KSwgYSA9IDE7IGEgPCBuLmxlbmd0aDsgYSArPSAxKSB7CiAgICAgICAgaWYgKG51bGwgIT0gaSkgaWYgKG8gJiYgYSArIDEgPj0gbi5sZW5ndGgpIHsKICAgICAgICAgIHZhciBzID0gbyhpLCBuW2FdKTsKICAgICAgICAgIGlmICghKHQgfHwgblthXSBpbiBpKSkgdGhyb3cgbmV3IHIoImJhc2UgaW50cmluc2ljIGZvciAiICsgZSArICIgZXhpc3RzLCBidXQgdGhlIHByb3BlcnR5IGlzIG5vdCBhdmFpbGFibGUuIik7CiAgICAgICAgICBpID0gcyA/IHMuZ2V0IHx8IHMudmFsdWUgOiBpW25bYV1dOwogICAgICAgIH0gZWxzZSBpID0gaVtuW2FdXTsKICAgICAgfQoKICAgICAgcmV0dXJuIGk7CiAgICB9OwogIH0sIGZ1bmN0aW9uIChlLCB0LCBuKSB7CiAgICAidXNlIHN0cmljdCI7CgogICAgdC5fX2VzTW9kdWxlID0gITA7CiAgICB0LkRFRkFVTFRfRU1PSklfQ0ROID0gIi8vaW1nLnQuc2luYWpzLmNuL3Q0L2FwcHN0eWxlL2V4cHJlc3Npb24vZXh0L25vcm1hbC8iLCB0LkRCX05BTUUgPSAiQ29tbWVudCIsIHQuZGVmYXVsdENvbmZpZyA9IHsKICAgICAgbGFuZzogInpoLUNOIiwKICAgICAgbGFuZ01vZGU6IG51bGwsCiAgICAgIGFwcElkOiAiIiwKICAgICAgYXBwS2V5OiAiIiwKICAgICAgY2xhenpOYW1lOiAiQ29tbWVudCIsCiAgICAgIG1ldGE6IFsibmljayIsICJtYWlsIiwgImxpbmsiXSwKICAgICAgcGF0aDogbG9jYXRpb24ucGF0aG5hbWUsCiAgICAgIHBsYWNlaG9sZGVyOiAiSnVzdCBHbyBHbyIsCiAgICAgIHBhZ2VTaXplOiAxMCwKICAgICAgcmVjb3JkSVA6ICEwLAogICAgICBzZXJ2ZXJVUkxzOiAiIiwKICAgICAgdmlzaXRvcjogITEsCiAgICAgIGVtb2ppQ0ROOiAiIiwKICAgICAgZW1vamlNYXBzOiB2b2lkIDAsCiAgICAgIGVuYWJsZVFROiAhMSwKICAgICAgcmVxdWlyZWRGaWVsZHM6IFtdCiAgICB9LCB0LmRlZmF1bHRNZXRhID0gWyJuaWNrIiwgIm1haWwiLCAibGluayJdLCB0LlFRQ2FjaGVLZXkgPSAiX3ZfQ2FjaGVfUSIsIHQuTWV0YUNhY2hlS2V5ID0gIl92X0NhY2hlX01ldGEiLCB0LlJhbmRvbVN0ciA9IChEYXRlLm5vdygpICsgTWF0aC5yb3VuZCgxZTMgKiBNYXRoLnJhbmRvbSgpKSkudG9TdHJpbmcoMzIpLCB0LlZFUlNJT04gPSAiMS40LjE0IjsKICB9LCBmdW5jdGlvbiAoZSwgdCwgbikgewogICAgZnVuY3Rpb24gcihlLCB0KSB7CiAgICAgIHJldHVybiBuZXcgaSh0KS5wcm9jZXNzKGUpOwogICAgfQoKICAgIHZhciBvID0gbig3KSwKICAgICAgICBpID0gbigyOSk7CiAgICB0ID0gZS5leHBvcnRzID0gciwgdC5GaWx0ZXJDU1MgPSBpOwoKICAgIGZvciAodmFyIGEgaW4gbykgewogICAgICB0W2FdID0gb1thXTsKICAgIH0KCiAgICAidW5kZWZpbmVkIiAhPSB0eXBlb2Ygd2luZG93ICYmICh3aW5kb3cuZmlsdGVyQ1NTID0gZS5leHBvcnRzKTsKICB9LCBmdW5jdGlvbiAoZSwgdCwgbikgewogICAgInVzZSBzdHJpY3QiOwoKICAgIHZhciByID0gbigzMik7CiAgICBlLmV4cG9ydHMgPSBGdW5jdGlvbi5wcm90b3R5cGUuYmluZCB8fCByOwogIH0sIGZ1bmN0aW9uIChlLCB0KSB7CiAgICBlLmV4cG9ydHMgPSB7CiAgICAgIGluZGV4T2Y6IGZ1bmN0aW9uIGluZGV4T2YoZSwgdCkgewogICAgICAgIHZhciBuLCByOwogICAgICAgIGlmIChBcnJheS5wcm90b3R5cGUuaW5kZXhPZikgcmV0dXJuIGUuaW5kZXhPZih0KTsKCiAgICAgICAgZm9yIChuID0gMCwgciA9IGUubGVuZ3RoOyBuIDwgcjsgbisrKSB7CiAgICAgICAgICBpZiAoZVtuXSA9PT0gdCkgcmV0dXJuIG47CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gLTE7CiAgICAgIH0sCiAgICAgIGZvckVhY2g6IGZ1bmN0aW9uIGZvckVhY2goZSwgdCwgbikgewogICAgICAgIHZhciByLCBvOwogICAgICAgIGlmIChBcnJheS5wcm90b3R5cGUuZm9yRWFjaCkgcmV0dXJuIGUuZm9yRWFjaCh0LCBuKTsKCiAgICAgICAgZm9yIChyID0gMCwgbyA9IGUubGVuZ3RoOyByIDwgbzsgcisrKSB7CiAgICAgICAgICB0LmNhbGwobiwgZVtyXSwgciwgZSk7CiAgICAgICAgfQogICAgICB9LAogICAgICB0cmltOiBmdW5jdGlvbiB0cmltKGUpIHsKICAgICAgICByZXR1cm4gU3RyaW5nLnByb3RvdHlwZS50cmltID8gZS50cmltKCkgOiBlLnJlcGxhY2UoLyheXHMqKXwoXHMqJCkvZywgIiIpOwogICAgICB9LAogICAgICBzcGFjZUluZGV4OiBmdW5jdGlvbiBzcGFjZUluZGV4KGUpIHsKICAgICAgICB2YXIgdCA9IC9cc3xcbnxcdC8sCiAgICAgICAgICAgIG4gPSB0LmV4ZWMoZSk7CiAgICAgICAgcmV0dXJuIG4gPyBuLmluZGV4IDogLTE7CiAgICAgIH0KICAgIH07CiAgfSwgZnVuY3Rpb24gKGUsIHQsIG4pIHsKICAgICJ1c2Ugc3RyaWN0IjsKCiAgICB0Ll9fZXNNb2R1bGUgPSAhMDsKICAgIHZhciByID0gbigyKSwKICAgICAgICBvID0gewogICAgICBjZG46IHIuREVGQVVMVF9FTU9KSV9DRE4sCiAgICAgIG1hcHM6IG4oNTMpLAogICAgICBwYXJzZTogZnVuY3Rpb24gcGFyc2UoZSkgewogICAgICAgIHJldHVybiBTdHJpbmcoZSkucmVwbGFjZShuZXcgUmVnRXhwKCI6KCIgKyBPYmplY3Qua2V5cyhvLm1hcHMpLmpvaW4oInwiKSArICIpOiIsICJpZyIpLCBmdW5jdGlvbiAoZSwgdCkgewogICAgICAgICAgcmV0dXJuIG8ubWFwc1t0XSA/IG8uYnVpbGQodCkgOiBlOwogICAgICAgIH0pOwogICAgICB9LAogICAgICBidWlsZDogZnVuY3Rpb24gYnVpbGQoZSkgewogICAgICAgIHZhciB0ID0gL14oaHR0cHM/Oik/XC9cLy9pLAogICAgICAgICAgICBuID0gby5tYXBzW2VdLAogICAgICAgICAgICByID0gdC50ZXN0KG4pID8gbiA6IG8uY2RuICsgbjsKICAgICAgICByZXR1cm4gdC50ZXN0KHIpID8gJzxpbWcgYWx0PSInICsgZSArICciIHJlZmVycmVyUG9saWN5PSJuby1yZWZlcnJlciIgY2xhc3M9InZlbW9qaSIgc3JjPSInICsgciArICciIC8+JyA6ICIiOwogICAgICB9CiAgICB9OwogICAgdFsiZGVmYXVsdCJdID0gbzsKICB9LCBmdW5jdGlvbiAoZSwgdCkgewogICAgZnVuY3Rpb24gbigpIHsKICAgICAgdmFyIGUgPSB7fTsKICAgICAgcmV0dXJuIGVbImFsaWduLWNvbnRlbnQiXSA9ICExLCBlWyJhbGlnbi1pdGVtcyJdID0gITEsIGVbImFsaWduLXNlbGYiXSA9ICExLCBlWyJhbGlnbm1lbnQtYWRqdXN0Il0gPSAhMSwgZVsiYWxpZ25tZW50LWJhc2VsaW5lIl0gPSAhMSwgZS5hbGwgPSAhMSwgZVsiYW5jaG9yLXBvaW50Il0gPSAhMSwgZS5hbmltYXRpb24gPSAhMSwgZVsiYW5pbWF0aW9uLWRlbGF5Il0gPSAhMSwgZVsiYW5pbWF0aW9uLWRpcmVjdGlvbiJdID0gITEsIGVbImFuaW1hdGlvbi1kdXJhdGlvbiJdID0gITEsIGVbImFuaW1hdGlvbi1maWxsLW1vZGUiXSA9ICExLCBlWyJhbmltYXRpb24taXRlcmF0aW9uLWNvdW50Il0gPSAhMSwgZVsiYW5pbWF0aW9uLW5hbWUiXSA9ICExLCBlWyJhbmltYXRpb24tcGxheS1zdGF0ZSJdID0gITEsIGVbImFuaW1hdGlvbi10aW1pbmctZnVuY3Rpb24iXSA9ICExLCBlLmF6aW11dGggPSAhMSwgZVsiYmFja2ZhY2UtdmlzaWJpbGl0eSJdID0gITEsIGUuYmFja2dyb3VuZCA9ICEwLCBlWyJiYWNrZ3JvdW5kLWF0dGFjaG1lbnQiXSA9ICEwLCBlWyJiYWNrZ3JvdW5kLWNsaXAiXSA9ICEwLCBlWyJiYWNrZ3JvdW5kLWNvbG9yIl0gPSAhMCwgZVsiYmFja2dyb3VuZC1pbWFnZSJdID0gITAsIGVbImJhY2tncm91bmQtb3JpZ2luIl0gPSAhMCwgZVsiYmFja2dyb3VuZC1wb3NpdGlvbiJdID0gITAsIGVbImJhY2tncm91bmQtcmVwZWF0Il0gPSAhMCwgZVsiYmFja2dyb3VuZC1zaXplIl0gPSAhMCwgZVsiYmFzZWxpbmUtc2hpZnQiXSA9ICExLCBlLmJpbmRpbmcgPSAhMSwgZS5ibGVlZCA9ICExLCBlWyJib29rbWFyay1sYWJlbCJdID0gITEsIGVbImJvb2ttYXJrLWxldmVsIl0gPSAhMSwgZVsiYm9va21hcmstc3RhdGUiXSA9ICExLCBlLmJvcmRlciA9ICEwLCBlWyJib3JkZXItYm90dG9tIl0gPSAhMCwgZVsiYm9yZGVyLWJvdHRvbS1jb2xvciJdID0gITAsIGVbImJvcmRlci1ib3R0b20tbGVmdC1yYWRpdXMiXSA9ICEwLCBlWyJib3JkZXItYm90dG9tLXJpZ2h0LXJhZGl1cyJdID0gITAsIGVbImJvcmRlci1ib3R0b20tc3R5bGUiXSA9ICEwLCBlWyJib3JkZXItYm90dG9tLXdpZHRoIl0gPSAhMCwgZVsiYm9yZGVyLWNvbGxhcHNlIl0gPSAhMCwgZVsiYm9yZGVyLWNvbG9yIl0gPSAhMCwgZVsiYm9yZGVyLWltYWdlIl0gPSAhMCwgZVsiYm9yZGVyLWltYWdlLW91dHNldCJdID0gITAsIGVbImJvcmRlci1pbWFnZS1yZXBlYXQiXSA9ICEwLCBlWyJib3JkZXItaW1hZ2Utc2xpY2UiXSA9ICEwLCBlWyJib3JkZXItaW1hZ2Utc291cmNlIl0gPSAhMCwgZVsiYm9yZGVyLWltYWdlLXdpZHRoIl0gPSAhMCwgZVsiYm9yZGVyLWxlZnQiXSA9ICEwLCBlWyJib3JkZXItbGVmdC1jb2xvciJdID0gITAsIGVbImJvcmRlci1sZWZ0LXN0eWxlIl0gPSAhMCwgZVsiYm9yZGVyLWxlZnQtd2lkdGgiXSA9ICEwLCBlWyJib3JkZXItcmFkaXVzIl0gPSAhMCwgZVsiYm9yZGVyLXJpZ2h0Il0gPSAhMCwgZVsiYm9yZGVyLXJpZ2h0LWNvbG9yIl0gPSAhMCwgZVsiYm9yZGVyLXJpZ2h0LXN0eWxlIl0gPSAhMCwgZVsiYm9yZGVyLXJpZ2h0LXdpZHRoIl0gPSAhMCwgZVsiYm9yZGVyLXNwYWNpbmciXSA9ICEwLCBlWyJib3JkZXItc3R5bGUiXSA9ICEwLCBlWyJib3JkZXItdG9wIl0gPSAhMCwgZVsiYm9yZGVyLXRvcC1jb2xvciJdID0gITAsIGVbImJvcmRlci10b3AtbGVmdC1yYWRpdXMiXSA9ICEwLCBlWyJib3JkZXItdG9wLXJpZ2h0LXJhZGl1cyJdID0gITAsIGVbImJvcmRlci10b3Atc3R5bGUiXSA9ICEwLCBlWyJib3JkZXItdG9wLXdpZHRoIl0gPSAhMCwgZVsiYm9yZGVyLXdpZHRoIl0gPSAhMCwgZS5ib3R0b20gPSAhMSwgZVsiYm94LWRlY29yYXRpb24tYnJlYWsiXSA9ICEwLCBlWyJib3gtc2hhZG93Il0gPSAhMCwgZVsiYm94LXNpemluZyJdID0gITAsIGVbImJveC1zbmFwIl0gPSAhMCwgZVsiYm94LXN1cHByZXNzIl0gPSAhMCwgZVsiYnJlYWstYWZ0ZXIiXSA9ICEwLCBlWyJicmVhay1iZWZvcmUiXSA9ICEwLCBlWyJicmVhay1pbnNpZGUiXSA9ICEwLCBlWyJjYXB0aW9uLXNpZGUiXSA9ICExLCBlLmNoYWlucyA9ICExLCBlLmNsZWFyID0gITAsIGUuY2xpcCA9ICExLCBlWyJjbGlwLXBhdGgiXSA9ICExLCBlWyJjbGlwLXJ1bGUiXSA9ICExLCBlLmNvbG9yID0gITAsIGVbImNvbG9yLWludGVycG9sYXRpb24tZmlsdGVycyJdID0gITAsIGVbImNvbHVtbi1jb3VudCJdID0gITEsIGVbImNvbHVtbi1maWxsIl0gPSAhMSwgZVsiY29sdW1uLWdhcCJdID0gITEsIGVbImNvbHVtbi1ydWxlIl0gPSAhMSwgZVsiY29sdW1uLXJ1bGUtY29sb3IiXSA9ICExLCBlWyJjb2x1bW4tcnVsZS1zdHlsZSJdID0gITEsIGVbImNvbHVtbi1ydWxlLXdpZHRoIl0gPSAhMSwgZVsiY29sdW1uLXNwYW4iXSA9ICExLCBlWyJjb2x1bW4td2lkdGgiXSA9ICExLCBlLmNvbHVtbnMgPSAhMSwgZS5jb250YWluID0gITEsIGUuY29udGVudCA9ICExLCBlWyJjb3VudGVyLWluY3JlbWVudCJdID0gITEsIGVbImNvdW50ZXItcmVzZXQiXSA9ICExLCBlWyJjb3VudGVyLXNldCJdID0gITEsIGUuY3JvcCA9ICExLCBlLmN1ZSA9ICExLCBlWyJjdWUtYWZ0ZXIiXSA9ICExLCBlWyJjdWUtYmVmb3JlIl0gPSAhMSwgZS5jdXJzb3IgPSAhMSwgZS5kaXJlY3Rpb24gPSAhMSwgZS5kaXNwbGF5ID0gITAsIGVbImRpc3BsYXktaW5zaWRlIl0gPSAhMCwgZVsiZGlzcGxheS1saXN0Il0gPSAhMCwgZVsiZGlzcGxheS1vdXRzaWRlIl0gPSAhMCwgZVsiZG9taW5hbnQtYmFzZWxpbmUiXSA9ICExLCBlLmVsZXZhdGlvbiA9ICExLCBlWyJlbXB0eS1jZWxscyJdID0gITEsIGUuZmlsdGVyID0gITEsIGUuZmxleCA9ICExLCBlWyJmbGV4LWJhc2lzIl0gPSAhMSwgZVsiZmxleC1kaXJlY3Rpb24iXSA9ICExLCBlWyJmbGV4LWZsb3ciXSA9ICExLCBlWyJmbGV4LWdyb3ciXSA9ICExLCBlWyJmbGV4LXNocmluayJdID0gITEsIGVbImZsZXgtd3JhcCJdID0gITEsIGVbImZsb2F0Il0gPSAhMSwgZVsiZmxvYXQtb2Zmc2V0Il0gPSAhMSwgZVsiZmxvb2QtY29sb3IiXSA9ICExLCBlWyJmbG9vZC1vcGFjaXR5Il0gPSAhMSwgZVsiZmxvdy1mcm9tIl0gPSAhMSwgZVsiZmxvdy1pbnRvIl0gPSAhMSwgZS5mb250ID0gITAsIGVbImZvbnQtZmFtaWx5Il0gPSAhMCwgZVsiZm9udC1mZWF0dXJlLXNldHRpbmdzIl0gPSAhMCwgZVsiZm9udC1rZXJuaW5nIl0gPSAhMCwgZVsiZm9udC1sYW5ndWFnZS1vdmVycmlkZSJdID0gITAsIGVbImZvbnQtc2l6ZSJdID0gITAsIGVbImZvbnQtc2l6ZS1hZGp1c3QiXSA9ICEwLCBlWyJmb250LXN0cmV0Y2giXSA9ICEwLCBlWyJmb250LXN0eWxlIl0gPSAhMCwgZVsiZm9udC1zeW50aGVzaXMiXSA9ICEwLCBlWyJmb250LXZhcmlhbnQiXSA9ICEwLCBlWyJmb250LXZhcmlhbnQtYWx0ZXJuYXRlcyJdID0gITAsIGVbImZvbnQtdmFyaWFudC1jYXBzIl0gPSAhMCwgZVsiZm9udC12YXJpYW50LWVhc3QtYXNpYW4iXSA9ICEwLCBlWyJmb250LXZhcmlhbnQtbGlnYXR1cmVzIl0gPSAhMCwgZVsiZm9udC12YXJpYW50LW51bWVyaWMiXSA9ICEwLCBlWyJmb250LXZhcmlhbnQtcG9zaXRpb24iXSA9ICEwLCBlWyJmb250LXdlaWdodCJdID0gITAsIGUuZ3JpZCA9ICExLCBlWyJncmlkLWFyZWEiXSA9ICExLCBlWyJncmlkLWF1dG8tY29sdW1ucyJdID0gITEsIGVbImdyaWQtYXV0by1mbG93Il0gPSAhMSwgZVsiZ3JpZC1hdXRvLXJvd3MiXSA9ICExLCBlWyJncmlkLWNvbHVtbiJdID0gITEsIGVbImdyaWQtY29sdW1uLWVuZCJdID0gITEsIGVbImdyaWQtY29sdW1uLXN0YXJ0Il0gPSAhMSwgZVsiZ3JpZC1yb3ciXSA9ICExLCBlWyJncmlkLXJvdy1lbmQiXSA9ICExLCBlWyJncmlkLXJvdy1zdGFydCJdID0gITEsIGVbImdyaWQtdGVtcGxhdGUiXSA9ICExLCBlWyJncmlkLXRlbXBsYXRlLWFyZWFzIl0gPSAhMSwgZVsiZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zIl0gPSAhMSwgZVsiZ3JpZC10ZW1wbGF0ZS1yb3dzIl0gPSAhMSwgZVsiaGFuZ2luZy1wdW5jdHVhdGlvbiJdID0gITEsIGUuaGVpZ2h0ID0gITAsIGUuaHlwaGVucyA9ICExLCBlLmljb24gPSAhMSwgZVsiaW1hZ2Utb3JpZW50YXRpb24iXSA9ICExLCBlWyJpbWFnZS1yZXNvbHV0aW9uIl0gPSAhMSwgZVsiaW1lLW1vZGUiXSA9ICExLCBlWyJpbml0aWFsLWxldHRlcnMiXSA9ICExLCBlWyJpbmxpbmUtYm94LWFsaWduIl0gPSAhMSwgZVsianVzdGlmeS1jb250ZW50Il0gPSAhMSwgZVsianVzdGlmeS1pdGVtcyJdID0gITEsIGVbImp1c3RpZnktc2VsZiJdID0gITEsIGUubGVmdCA9ICExLCBlWyJsZXR0ZXItc3BhY2luZyJdID0gITAsIGVbImxpZ2h0aW5nLWNvbG9yIl0gPSAhMCwgZVsibGluZS1ib3gtY29udGFpbiJdID0gITEsIGVbImxpbmUtYnJlYWsiXSA9ICExLCBlWyJsaW5lLWdyaWQiXSA9ICExLCBlWyJsaW5lLWhlaWdodCJdID0gITEsIGVbImxpbmUtc25hcCJdID0gITEsIGVbImxpbmUtc3RhY2tpbmciXSA9ICExLCBlWyJsaW5lLXN0YWNraW5nLXJ1YnkiXSA9ICExLCBlWyJsaW5lLXN0YWNraW5nLXNoaWZ0Il0gPSAhMSwgZVsibGluZS1zdGFja2luZy1zdHJhdGVneSJdID0gITEsIGVbImxpc3Qtc3R5bGUiXSA9ICEwLCBlWyJsaXN0LXN0eWxlLWltYWdlIl0gPSAhMCwgZVsibGlzdC1zdHlsZS1wb3NpdGlvbiJdID0gITAsIGVbImxpc3Qtc3R5bGUtdHlwZSJdID0gITAsIGUubWFyZ2luID0gITAsIGVbIm1hcmdpbi1ib3R0b20iXSA9ICEwLCBlWyJtYXJnaW4tbGVmdCJdID0gITAsIGVbIm1hcmdpbi1yaWdodCJdID0gITAsIGVbIm1hcmdpbi10b3AiXSA9ICEwLCBlWyJtYXJrZXItb2Zmc2V0Il0gPSAhMSwgZVsibWFya2VyLXNpZGUiXSA9ICExLCBlLm1hcmtzID0gITEsIGUubWFzayA9ICExLCBlWyJtYXNrLWJveCJdID0gITEsIGVbIm1hc2stYm94LW91dHNldCJdID0gITEsIGVbIm1hc2stYm94LXJlcGVhdCJdID0gITEsIGVbIm1hc2stYm94LXNsaWNlIl0gPSAhMSwgZVsibWFzay1ib3gtc291cmNlIl0gPSAhMSwgZVsibWFzay1ib3gtd2lkdGgiXSA9ICExLCBlWyJtYXNrLWNsaXAiXSA9ICExLCBlWyJtYXNrLWltYWdlIl0gPSAhMSwgZVsibWFzay1vcmlnaW4iXSA9ICExLCBlWyJtYXNrLXBvc2l0aW9uIl0gPSAhMSwgZVsibWFzay1yZXBlYXQiXSA9ICExLCBlWyJtYXNrLXNpemUiXSA9ICExLCBlWyJtYXNrLXNvdXJjZS10eXBlIl0gPSAhMSwgZVsibWFzay10eXBlIl0gPSAhMSwgZVsibWF4LWhlaWdodCJdID0gITAsIGVbIm1heC1saW5lcyJdID0gITEsIGVbIm1heC13aWR0aCJdID0gITAsIGVbIm1pbi1oZWlnaHQiXSA9ICEwLCBlWyJtaW4td2lkdGgiXSA9ICEwLCBlWyJtb3ZlLXRvIl0gPSAhMSwgZVsibmF2LWRvd24iXSA9ICExLCBlWyJuYXYtaW5kZXgiXSA9ICExLCBlWyJuYXYtbGVmdCJdID0gITEsIGVbIm5hdi1yaWdodCJdID0gITEsIGVbIm5hdi11cCJdID0gITEsIGVbIm9iamVjdC1maXQiXSA9ICExLCBlWyJvYmplY3QtcG9zaXRpb24iXSA9ICExLCBlLm9wYWNpdHkgPSAhMSwgZS5vcmRlciA9ICExLCBlLm9ycGhhbnMgPSAhMSwgZS5vdXRsaW5lID0gITEsIGVbIm91dGxpbmUtY29sb3IiXSA9ICExLCBlWyJvdXRsaW5lLW9mZnNldCJdID0gITEsIGVbIm91dGxpbmUtc3R5bGUiXSA9ICExLCBlWyJvdXRsaW5lLXdpZHRoIl0gPSAhMSwgZS5vdmVyZmxvdyA9ICExLCBlWyJvdmVyZmxvdy13cmFwIl0gPSAhMSwgZVsib3ZlcmZsb3cteCJdID0gITEsIGVbIm92ZXJmbG93LXkiXSA9ICExLCBlLnBhZGRpbmcgPSAhMCwgZVsicGFkZGluZy1ib3R0b20iXSA9ICEwLCBlWyJwYWRkaW5nLWxlZnQiXSA9ICEwLCBlWyJwYWRkaW5nLXJpZ2h0Il0gPSAhMCwgZVsicGFkZGluZy10b3AiXSA9ICEwLCBlLnBhZ2UgPSAhMSwgZVsicGFnZS1icmVhay1hZnRlciJdID0gITEsIGVbInBhZ2UtYnJlYWstYmVmb3JlIl0gPSAhMSwgZVsicGFnZS1icmVhay1pbnNpZGUiXSA9ICExLCBlWyJwYWdlLXBvbGljeSJdID0gITEsIGUucGF1c2UgPSAhMSwgZVsicGF1c2UtYWZ0ZXIiXSA9ICExLCBlWyJwYXVzZS1iZWZvcmUiXSA9ICExLCBlLnBlcnNwZWN0aXZlID0gITEsIGVbInBlcnNwZWN0aXZlLW9yaWdpbiJdID0gITEsIGUucGl0Y2ggPSAhMSwgZVsicGl0Y2gtcmFuZ2UiXSA9ICExLCBlWyJwbGF5LWR1cmluZyJdID0gITEsIGUucG9zaXRpb24gPSAhMSwgZVsicHJlc2VudGF0aW9uLWxldmVsIl0gPSAhMSwgZS5xdW90ZXMgPSAhMSwgZVsicmVnaW9uLWZyYWdtZW50Il0gPSAhMSwgZS5yZXNpemUgPSAhMSwgZS5yZXN0ID0gITEsIGVbInJlc3QtYWZ0ZXIiXSA9ICExLCBlWyJyZXN0LWJlZm9yZSJdID0gITEsIGUucmljaG5lc3MgPSAhMSwgZS5yaWdodCA9ICExLCBlLnJvdGF0aW9uID0gITEsIGVbInJvdGF0aW9uLXBvaW50Il0gPSAhMSwgZVsicnVieS1hbGlnbiJdID0gITEsIGVbInJ1YnktbWVyZ2UiXSA9ICExLCBlWyJydWJ5LXBvc2l0aW9uIl0gPSAhMSwgZVsic2hhcGUtaW1hZ2UtdGhyZXNob2xkIl0gPSAhMSwgZVsic2hhcGUtb3V0c2lkZSJdID0gITEsIGVbInNoYXBlLW1hcmdpbiJdID0gITEsIGUuc2l6ZSA9ICExLCBlLnNwZWFrID0gITEsIGVbInNwZWFrLWFzIl0gPSAhMSwgZVsic3BlYWstaGVhZGVyIl0gPSAhMSwgZVsic3BlYWstbnVtZXJhbCJdID0gITEsIGVbInNwZWFrLXB1bmN0dWF0aW9uIl0gPSAhMSwgZVsic3BlZWNoLXJhdGUiXSA9ICExLCBlLnN0cmVzcyA9ICExLCBlWyJzdHJpbmctc2V0Il0gPSAhMSwgZVsidGFiLXNpemUiXSA9ICExLCBlWyJ0YWJsZS1sYXlvdXQiXSA9ICExLCBlWyJ0ZXh0LWFsaWduIl0gPSAhMCwgZVsidGV4dC1hbGlnbi1sYXN0Il0gPSAhMCwgZVsidGV4dC1jb21iaW5lLXVwcmlnaHQiXSA9ICEwLCBlWyJ0ZXh0LWRlY29yYXRpb24iXSA9ICEwLCBlWyJ0ZXh0LWRlY29yYXRpb24tY29sb3IiXSA9ICEwLCBlWyJ0ZXh0LWRlY29yYXRpb24tbGluZSJdID0gITAsIGVbInRleHQtZGVjb3JhdGlvbi1za2lwIl0gPSAhMCwgZVsidGV4dC1kZWNvcmF0aW9uLXN0eWxlIl0gPSAhMCwgZVsidGV4dC1lbXBoYXNpcyJdID0gITAsIGVbInRleHQtZW1waGFzaXMtY29sb3IiXSA9ICEwLCBlWyJ0ZXh0LWVtcGhhc2lzLXBvc2l0aW9uIl0gPSAhMCwgZVsidGV4dC1lbXBoYXNpcy1zdHlsZSJdID0gITAsIGVbInRleHQtaGVpZ2h0Il0gPSAhMCwgZVsidGV4dC1pbmRlbnQiXSA9ICEwLCBlWyJ0ZXh0LWp1c3RpZnkiXSA9ICEwLCBlWyJ0ZXh0LW9yaWVudGF0aW9uIl0gPSAhMCwgZVsidGV4dC1vdmVyZmxvdyJdID0gITAsIGVbInRleHQtc2hhZG93Il0gPSAhMCwgZVsidGV4dC1zcGFjZS1jb2xsYXBzZSJdID0gITAsIGVbInRleHQtdHJhbnNmb3JtIl0gPSAhMCwgZVsidGV4dC11bmRlcmxpbmUtcG9zaXRpb24iXSA9ICEwLCBlWyJ0ZXh0LXdyYXAiXSA9ICEwLCBlLnRvcCA9ICExLCBlLnRyYW5zZm9ybSA9ICExLCBlWyJ0cmFuc2Zvcm0tb3JpZ2luIl0gPSAhMSwgZVsidHJhbnNmb3JtLXN0eWxlIl0gPSAhMSwgZS50cmFuc2l0aW9uID0gITEsIGVbInRyYW5zaXRpb24tZGVsYXkiXSA9ICExLCBlWyJ0cmFuc2l0aW9uLWR1cmF0aW9uIl0gPSAhMSwgZVsidHJhbnNpdGlvbi1wcm9wZXJ0eSJdID0gITEsIGVbInRyYW5zaXRpb24tdGltaW5nLWZ1bmN0aW9uIl0gPSAhMSwgZVsidW5pY29kZS1iaWRpIl0gPSAhMSwgZVsidmVydGljYWwtYWxpZ24iXSA9ICExLCBlLnZpc2liaWxpdHkgPSAhMSwgZVsidm9pY2UtYmFsYW5jZSJdID0gITEsIGVbInZvaWNlLWR1cmF0aW9uIl0gPSAhMSwgZVsidm9pY2UtZmFtaWx5Il0gPSAhMSwgZVsidm9pY2UtcGl0Y2giXSA9ICExLCBlWyJ2b2ljZS1yYW5nZSJdID0gITEsIGVbInZvaWNlLXJhdGUiXSA9ICExLCBlWyJ2b2ljZS1zdHJlc3MiXSA9ICExLCBlWyJ2b2ljZS12b2x1bWUiXSA9ICExLCBlLnZvbHVtZSA9ICExLCBlWyJ3aGl0ZS1zcGFjZSJdID0gITEsIGUud2lkb3dzID0gITEsIGUud2lkdGggPSAhMCwgZVsid2lsbC1jaGFuZ2UiXSA9ICExLCBlWyJ3b3JkLWJyZWFrIl0gPSAhMCwgZVsid29yZC1zcGFjaW5nIl0gPSAhMCwgZVsid29yZC13cmFwIl0gPSAhMCwgZVsid3JhcC1mbG93Il0gPSAhMSwgZVsid3JhcC10aHJvdWdoIl0gPSAhMSwgZVsid3JpdGluZy1tb2RlIl0gPSAhMSwgZVsiei1pbmRleCJdID0gITEsIGU7CiAgICB9CgogICAgZnVuY3Rpb24gcihlLCB0LCBuKSB7fQoKICAgIGZ1bmN0aW9uIG8oZSwgdCwgbikge30KCiAgICBmdW5jdGlvbiBpKGUsIHQpIHsKICAgICAgcmV0dXJuIGEudGVzdCh0KSA/ICIiIDogdDsKICAgIH0KCiAgICB2YXIgYSA9IC9qYXZhc2NyaXB0XHMqXDovZ2ltOwogICAgdC53aGl0ZUxpc3QgPSBuKCksIHQuZ2V0RGVmYXVsdFdoaXRlTGlzdCA9IG4sIHQub25BdHRyID0gciwgdC5vbklnbm9yZUF0dHIgPSBvLCB0LnNhZmVBdHRyVmFsdWUgPSBpOwogIH0sIGZ1bmN0aW9uIChlLCB0KSB7CiAgICBlLmV4cG9ydHMgPSB7CiAgICAgIGluZGV4T2Y6IGZ1bmN0aW9uIGluZGV4T2YoZSwgdCkgewogICAgICAgIHZhciBuLCByOwogICAgICAgIGlmIChBcnJheS5wcm90b3R5cGUuaW5kZXhPZikgcmV0dXJuIGUuaW5kZXhPZih0KTsKCiAgICAgICAgZm9yIChuID0gMCwgciA9IGUubGVuZ3RoOyBuIDwgcjsgbisrKSB7CiAgICAgICAgICBpZiAoZVtuXSA9PT0gdCkgcmV0dXJuIG47CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gLTE7CiAgICAgIH0sCiAgICAgIGZvckVhY2g6IGZ1bmN0aW9uIGZvckVhY2goZSwgdCwgbikgewogICAgICAgIHZhciByLCBvOwogICAgICAgIGlmIChBcnJheS5wcm90b3R5cGUuZm9yRWFjaCkgcmV0dXJuIGUuZm9yRWFjaCh0LCBuKTsKCiAgICAgICAgZm9yIChyID0gMCwgbyA9IGUubGVuZ3RoOyByIDwgbzsgcisrKSB7CiAgICAgICAgICB0LmNhbGwobiwgZVtyXSwgciwgZSk7CiAgICAgICAgfQogICAgICB9LAogICAgICB0cmltOiBmdW5jdGlvbiB0cmltKGUpIHsKICAgICAgICByZXR1cm4gU3RyaW5nLnByb3RvdHlwZS50cmltID8gZS50cmltKCkgOiBlLnJlcGxhY2UoLyheXHMqKXwoXHMqJCkvZywgIiIpOwogICAgICB9LAogICAgICB0cmltUmlnaHQ6IGZ1bmN0aW9uIHRyaW1SaWdodChlKSB7CiAgICAgICAgcmV0dXJuIFN0cmluZy5wcm90b3R5cGUudHJpbVJpZ2h0ID8gZS50cmltUmlnaHQoKSA6IGUucmVwbGFjZSgvKFxzKiQpL2csICIiKTsKICAgICAgfQogICAgfTsKICB9LCBmdW5jdGlvbiAoZSwgdCwgbikgewogICAgInVzZSBzdHJpY3QiOwoKICAgIHZhciByID0gbig0MCksCiAgICAgICAgbyA9ICJmdW5jdGlvbiIgPT0gdHlwZW9mIFN5bWJvbCAmJiAic3ltYm9sIiA9PSBfdHlwZW9mKFN5bWJvbCgiZm9vIikpLAogICAgICAgIGkgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLAogICAgICAgIGEgPSBBcnJheS5wcm90b3R5cGUuY29uY2F0LAogICAgICAgIHMgPSBPYmplY3QuZGVmaW5lUHJvcGVydHksCiAgICAgICAgbCA9IGZ1bmN0aW9uIGwoZSkgewogICAgICByZXR1cm4gImZ1bmN0aW9uIiA9PSB0eXBlb2YgZSAmJiAiW29iamVjdCBGdW5jdGlvbl0iID09PSBpLmNhbGwoZSk7CiAgICB9LAogICAgICAgIGMgPSBzICYmIGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIGUgPSB7fTsKCiAgICAgIHRyeSB7CiAgICAgICAgcyhlLCAieCIsIHsKICAgICAgICAgIGVudW1lcmFibGU6ICExLAogICAgICAgICAgdmFsdWU6IGUKICAgICAgICB9KTsKCiAgICAgICAgZm9yICh2YXIgdCBpbiBlKSB7CiAgICAgICAgICByZXR1cm4gITE7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gZS54ID09PSBlOwogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgcmV0dXJuICExOwogICAgICB9CiAgICB9KCksCiAgICAgICAgdSA9IGZ1bmN0aW9uIHUoZSwgdCwgbiwgcikgewogICAgICAoISh0IGluIGUpIHx8IGwocikgJiYgcigpKSAmJiAoYyA/IHMoZSwgdCwgewogICAgICAgIGNvbmZpZ3VyYWJsZTogITAsCiAgICAgICAgZW51bWVyYWJsZTogITEsCiAgICAgICAgdmFsdWU6IG4sCiAgICAgICAgd3JpdGFibGU6ICEwCiAgICAgIH0pIDogZVt0XSA9IG4pOwogICAgfSwKICAgICAgICBkID0gZnVuY3Rpb24gZChlLCB0KSB7CiAgICAgIHZhciBuID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgPyBhcmd1bWVudHNbMl0gOiB7fSwKICAgICAgICAgIGkgPSByKHQpOwogICAgICBvICYmIChpID0gYS5jYWxsKGksIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHModCkpKTsKCiAgICAgIGZvciAodmFyIHMgPSAwOyBzIDwgaS5sZW5ndGg7IHMgKz0gMSkgewogICAgICAgIHUoZSwgaVtzXSwgdFtpW3NdXSwgbltpW3NdXSk7CiAgICAgIH0KICAgIH07CgogICAgZC5zdXBwb3J0c0Rlc2NyaXB0b3JzID0gISFjLCBlLmV4cG9ydHMgPSBkOwogIH0sIGZ1bmN0aW9uIChlLCB0LCBuKSB7CiAgICAidXNlIHN0cmljdCI7CgogICAgdmFyIHIgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nOwoKICAgIGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChlKSB7CiAgICAgIHZhciB0ID0gci5jYWxsKGUpLAogICAgICAgICAgbiA9ICJbb2JqZWN0IEFyZ3VtZW50c10iID09PSB0OwogICAgICByZXR1cm4gbiB8fCAobiA9ICJbb2JqZWN0IEFycmF5XSIgIT09IHQgJiYgbnVsbCAhPT0gZSAmJiAib2JqZWN0IiA9PSBfdHlwZW9mKGUpICYmICJudW1iZXIiID09IHR5cGVvZiBlLmxlbmd0aCAmJiBlLmxlbmd0aCA+PSAwICYmICJbb2JqZWN0IEZ1bmN0aW9uXSIgPT09IHIuY2FsbChlLmNhbGxlZSkpLCBuOwogICAgfTsKICB9LCBmdW5jdGlvbiAoZSwgdCwgbikgewogICAgInVzZSBzdHJpY3QiOwoKICAgIHZhciByID0gbig0NSksCiAgICAgICAgbyA9IG4oNDQpLAogICAgICAgIGkgPSBuKDQ2KSwKICAgICAgICBhID0gaSgiU3RyaW5nLnByb3RvdHlwZS5yZXBsYWNlIiksCiAgICAgICAgcyA9IC9eW1x4MDlceDBBXHgwQlx4MENceDBEXHgyMFx4QTBcdTE2ODBcdTE4MEVcdTIwMDBcdTIwMDFcdTIwMDJcdTIwMDNcdTIwMDRcdTIwMDVcdTIwMDZcdTIwMDdcdTIwMDhcdTIwMDlcdTIwMEFcdTIwMkZcdTIwNUZcdTMwMDBcdTIwMjhcdTIwMjlcdUZFRkZdKy8sCiAgICAgICAgbCA9IC9bXHgwOVx4MEFceDBCXHgwQ1x4MERceDIwXHhBMFx1MTY4MFx1MTgwRVx1MjAwMFx1MjAwMVx1MjAwMlx1MjAwM1x1MjAwNFx1MjAwNVx1MjAwNlx1MjAwN1x1MjAwOFx1MjAwOVx1MjAwQVx1MjAyRlx1MjA1Rlx1MzAwMFx1MjAyOFx1MjAyOVx1RkVGRl0rJC87CgogICAgZS5leHBvcnRzID0gZnVuY3Rpb24gKCkgewogICAgICB2YXIgZSA9IG8ocih0aGlzKSk7CiAgICAgIHJldHVybiBhKGEoZSwgcywgIiIpLCBsLCAiIik7CiAgICB9OwogIH0sIGZ1bmN0aW9uIChlLCB0LCBuKSB7CiAgICAidXNlIHN0cmljdCI7CgogICAgdmFyIHIgPSBuKDQpLAogICAgICAgIG8gPSBuKDEpLAogICAgICAgIGkgPSBvKCIlRnVuY3Rpb24lIiksCiAgICAgICAgYSA9IGkuYXBwbHksCiAgICAgICAgcyA9IGkuY2FsbDsKICAgIGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIHIuYXBwbHkocywgYXJndW1lbnRzKTsKICAgIH0sIGUuZXhwb3J0cy5hcHBseSA9IGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIHIuYXBwbHkoYSwgYXJndW1lbnRzKTsKICAgIH07CiAgfSwgZnVuY3Rpb24gKGUsIHQsIG4pIHsKICAgICJ1c2Ugc3RyaWN0IjsKCiAgICB2YXIgciA9IG4oMTEpLAogICAgICAgIG8gPSAi4oCLIjsKCiAgICBlLmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBTdHJpbmcucHJvdG90eXBlLnRyaW0gJiYgby50cmltKCkgPT09IG8gPyBTdHJpbmcucHJvdG90eXBlLnRyaW0gOiByOwogICAgfTsKICB9LCBmdW5jdGlvbiAoZSwgdCkgewogICAgdmFyIG47CgogICAgbiA9IGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9KCk7CgogICAgdHJ5IHsKICAgICAgbiA9IG4gfHwgRnVuY3Rpb24oInJldHVybiB0aGlzIikoKSB8fCAoMCwgZXZhbCkoInRoaXMiKTsKICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgIm9iamVjdCIgPT0gKHR5cGVvZiB3aW5kb3cgPT09ICJ1bmRlZmluZWQiID8gInVuZGVmaW5lZCIgOiBfdHlwZW9mKHdpbmRvdykpICYmIChuID0gd2luZG93KTsKICAgIH0KCiAgICBlLmV4cG9ydHMgPSBuOwogIH0sIGZ1bmN0aW9uIChlLCB0LCBuKSB7CiAgICBmdW5jdGlvbiByKCkgewogICAgICByZXR1cm4gewogICAgICAgIGE6IFsidGFyZ2V0IiwgImhyZWYiLCAidGl0bGUiXSwKICAgICAgICBhYmJyOiBbInRpdGxlIl0sCiAgICAgICAgYWRkcmVzczogW10sCiAgICAgICAgYXJlYTogWyJzaGFwZSIsICJjb29yZHMiLCAiaHJlZiIsICJhbHQiXSwKICAgICAgICBhcnRpY2xlOiBbXSwKICAgICAgICBhc2lkZTogW10sCiAgICAgICAgYXVkaW86IFsiYXV0b3BsYXkiLCAiY29udHJvbHMiLCAibG9vcCIsICJwcmVsb2FkIiwgInNyYyJdLAogICAgICAgIGI6IFtdLAogICAgICAgIGJkaTogWyJkaXIiXSwKICAgICAgICBiZG86IFsiZGlyIl0sCiAgICAgICAgYmlnOiBbXSwKICAgICAgICBibG9ja3F1b3RlOiBbImNpdGUiXSwKICAgICAgICBicjogW10sCiAgICAgICAgY2FwdGlvbjogW10sCiAgICAgICAgY2VudGVyOiBbXSwKICAgICAgICBjaXRlOiBbXSwKICAgICAgICBjb2RlOiBbXSwKICAgICAgICBjb2w6IFsiYWxpZ24iLCAidmFsaWduIiwgInNwYW4iLCAid2lkdGgiXSwKICAgICAgICBjb2xncm91cDogWyJhbGlnbiIsICJ2YWxpZ24iLCAic3BhbiIsICJ3aWR0aCJdLAogICAgICAgIGRkOiBbXSwKICAgICAgICBkZWw6IFsiZGF0ZXRpbWUiXSwKICAgICAgICBkZXRhaWxzOiBbIm9wZW4iXSwKICAgICAgICBkaXY6IFtdLAogICAgICAgIGRsOiBbXSwKICAgICAgICBkdDogW10sCiAgICAgICAgZW06IFtdLAogICAgICAgIGZvbnQ6IFsiY29sb3IiLCAic2l6ZSIsICJmYWNlIl0sCiAgICAgICAgZm9vdGVyOiBbXSwKICAgICAgICBoMTogW10sCiAgICAgICAgaDI6IFtdLAogICAgICAgIGgzOiBbXSwKICAgICAgICBoNDogW10sCiAgICAgICAgaDU6IFtdLAogICAgICAgIGg2OiBbXSwKICAgICAgICBoZWFkZXI6IFtdLAogICAgICAgIGhyOiBbXSwKICAgICAgICBpOiBbXSwKICAgICAgICBpbWc6IFsic3JjIiwgImFsdCIsICJ0aXRsZSIsICJ3aWR0aCIsICJoZWlnaHQiXSwKICAgICAgICBpbnM6IFsiZGF0ZXRpbWUiXSwKICAgICAgICBsaTogW10sCiAgICAgICAgbWFyazogW10sCiAgICAgICAgbmF2OiBbXSwKICAgICAgICBvbDogW10sCiAgICAgICAgcDogW10sCiAgICAgICAgcHJlOiBbXSwKICAgICAgICBzOiBbXSwKICAgICAgICBzZWN0aW9uOiBbXSwKICAgICAgICBzbWFsbDogW10sCiAgICAgICAgc3BhbjogW10sCiAgICAgICAgc3ViOiBbXSwKICAgICAgICBzdXA6IFtdLAogICAgICAgIHN0cm9uZzogW10sCiAgICAgICAgdGFibGU6IFsid2lkdGgiLCAiYm9yZGVyIiwgImFsaWduIiwgInZhbGlnbiJdLAogICAgICAgIHRib2R5OiBbImFsaWduIiwgInZhbGlnbiJdLAogICAgICAgIHRkOiBbIndpZHRoIiwgInJvd3NwYW4iLCAiY29sc3BhbiIsICJhbGlnbiIsICJ2YWxpZ24iXSwKICAgICAgICB0Zm9vdDogWyJhbGlnbiIsICJ2YWxpZ24iXSwKICAgICAgICB0aDogWyJ3aWR0aCIsICJyb3dzcGFuIiwgImNvbHNwYW4iLCAiYWxpZ24iLCAidmFsaWduIl0sCiAgICAgICAgdGhlYWQ6IFsiYWxpZ24iLCAidmFsaWduIl0sCiAgICAgICAgdHI6IFsicm93c3BhbiIsICJhbGlnbiIsICJ2YWxpZ24iXSwKICAgICAgICB0dDogW10sCiAgICAgICAgdTogW10sCiAgICAgICAgdWw6IFtdLAogICAgICAgIHZpZGVvOiBbImF1dG9wbGF5IiwgImNvbnRyb2xzIiwgImxvb3AiLCAicHJlbG9hZCIsICJzcmMiLCAiaGVpZ2h0IiwgIndpZHRoIl0KICAgICAgfTsKICAgIH0KCiAgICBmdW5jdGlvbiBvKGUsIHQsIG4pIHt9CgogICAgZnVuY3Rpb24gaShlLCB0LCBuKSB7fQoKICAgIGZ1bmN0aW9uIGEoZSwgdCwgbikge30KCiAgICBmdW5jdGlvbiBzKGUsIHQsIG4pIHt9CgogICAgZnVuY3Rpb24gbChlKSB7CiAgICAgIHJldHVybiBlLnJlcGxhY2UoUywgIiZsdDsiKS5yZXBsYWNlKE8sICImZ3Q7Iik7CiAgICB9CgogICAgZnVuY3Rpb24gYyhlLCB0LCBuLCByKSB7CiAgICAgIGlmIChuID0gdihuKSwgImhyZWYiID09PSB0IHx8ICJzcmMiID09PSB0KSB7CiAgICAgICAgaWYgKCIjIiA9PT0gKG4gPSBfLnRyaW0obikpKSByZXR1cm4gIiMiOwogICAgICAgIGlmICgiaHR0cDovLyIgIT09IG4uc3Vic3RyKDAsIDcpICYmICJodHRwczovLyIgIT09IG4uc3Vic3RyKDAsIDgpICYmICJtYWlsdG86IiAhPT0gbi5zdWJzdHIoMCwgNykgJiYgInRlbDoiICE9PSBuLnN1YnN0cigwLCA0KSAmJiAiIyIgIT09IG5bMF0gJiYgIi8iICE9PSBuWzBdKSByZXR1cm4gIiI7CiAgICAgIH0gZWxzZSBpZiAoImJhY2tncm91bmQiID09PSB0KSB7CiAgICAgICAgaWYgKEkubGFzdEluZGV4ID0gMCwgSS50ZXN0KG4pKSByZXR1cm4gIiI7CiAgICAgIH0gZWxzZSBpZiAoInN0eWxlIiA9PT0gdCkgewogICAgICAgIGlmIChQLmxhc3RJbmRleCA9IDAsIFAudGVzdChuKSkgcmV0dXJuICIiOwogICAgICAgIGlmIChNLmxhc3RJbmRleCA9IDAsIE0udGVzdChuKSAmJiAoSS5sYXN0SW5kZXggPSAwLCBJLnRlc3QobikpKSByZXR1cm4gIiI7CiAgICAgICAgITEgIT09IHIgJiYgKHIgPSByIHx8IEEsIG4gPSByLnByb2Nlc3MobikpOwogICAgICB9CgogICAgICByZXR1cm4gbiA9IGcobik7CiAgICB9CgogICAgZnVuY3Rpb24gdShlKSB7CiAgICAgIHJldHVybiBlLnJlcGxhY2UoJCwgIiZxdW90OyIpOwogICAgfQoKICAgIGZ1bmN0aW9uIGQoZSkgewogICAgICByZXR1cm4gZS5yZXBsYWNlKEUsICciJyk7CiAgICB9CgogICAgZnVuY3Rpb24gcChlKSB7CiAgICAgIHJldHVybiBlLnJlcGxhY2UoaiwgZnVuY3Rpb24gKGUsIHQpIHsKICAgICAgICByZXR1cm4gIngiID09PSB0WzBdIHx8ICJYIiA9PT0gdFswXSA/IFN0cmluZy5mcm9tQ2hhckNvZGUocGFyc2VJbnQodC5zdWJzdHIoMSksIDE2KSkgOiBTdHJpbmcuZnJvbUNoYXJDb2RlKHBhcnNlSW50KHQsIDEwKSk7CiAgICAgIH0pOwogICAgfQoKICAgIGZ1bmN0aW9uIGYoZSkgewogICAgICByZXR1cm4gZS5yZXBsYWNlKFQsICI6IikucmVwbGFjZShDLCAiICIpOwogICAgfQoKICAgIGZ1bmN0aW9uIGgoZSkgewogICAgICBmb3IgKHZhciB0ID0gIiIsIG4gPSAwLCByID0gZS5sZW5ndGg7IG4gPCByOyBuKyspIHsKICAgICAgICB0ICs9IGUuY2hhckNvZGVBdChuKSA8IDMyID8gIiAiIDogZS5jaGFyQXQobik7CiAgICAgIH0KCiAgICAgIHJldHVybiBfLnRyaW0odCk7CiAgICB9CgogICAgZnVuY3Rpb24gdihlKSB7CiAgICAgIHJldHVybiBlID0gZChlKSwgZSA9IHAoZSksIGUgPSBmKGUpLCBlID0gaChlKTsKICAgIH0KCiAgICBmdW5jdGlvbiBnKGUpIHsKICAgICAgcmV0dXJuIGUgPSB1KGUpLCBlID0gbChlKTsKICAgIH0KCiAgICBmdW5jdGlvbiBtKCkgewogICAgICByZXR1cm4gIiI7CiAgICB9CgogICAgZnVuY3Rpb24geShlLCB0KSB7CiAgICAgIGZ1bmN0aW9uIG4odCkgewogICAgICAgIHJldHVybiAhIXIgfHwgLTEgIT09IF8uaW5kZXhPZihlLCB0KTsKICAgICAgfQoKICAgICAgImZ1bmN0aW9uIiAhPSB0eXBlb2YgdCAmJiAodCA9IGZ1bmN0aW9uIHQoKSB7fSk7CiAgICAgIHZhciByID0gIUFycmF5LmlzQXJyYXkoZSksCiAgICAgICAgICBvID0gW10sCiAgICAgICAgICBpID0gITE7CiAgICAgIHJldHVybiB7CiAgICAgICAgb25JZ25vcmVUYWc6IGZ1bmN0aW9uIG9uSWdub3JlVGFnKGUsIHIsIGEpIHsKICAgICAgICAgIGlmIChuKGUpKSB7CiAgICAgICAgICAgIGlmIChhLmlzQ2xvc2luZykgewogICAgICAgICAgICAgIHZhciBzID0gIlsvcmVtb3ZlZF0iLAogICAgICAgICAgICAgICAgICBsID0gYS5wb3NpdGlvbiArIHMubGVuZ3RoOwogICAgICAgICAgICAgIHJldHVybiBvLnB1c2goWyExICE9PSBpID8gaSA6IGEucG9zaXRpb24sIGxdKSwgaSA9ICExLCBzOwogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gaSB8fCAoaSA9IGEucG9zaXRpb24pLCAiW3JlbW92ZWRdIjsKICAgICAgICAgIH0KCiAgICAgICAgICByZXR1cm4gdChlLCByLCBhKTsKICAgICAgICB9LAogICAgICAgIHJlbW92ZTogZnVuY3Rpb24gcmVtb3ZlKGUpIHsKICAgICAgICAgIHZhciB0ID0gIiIsCiAgICAgICAgICAgICAgbiA9IDA7CiAgICAgICAgICByZXR1cm4gXy5mb3JFYWNoKG8sIGZ1bmN0aW9uIChyKSB7CiAgICAgICAgICAgIHQgKz0gZS5zbGljZShuLCByWzBdKSwgbiA9IHJbMV07CiAgICAgICAgICB9KSwgdCArPSBlLnNsaWNlKG4pOwogICAgICAgIH0KICAgICAgfTsKICAgIH0KCiAgICBmdW5jdGlvbiBiKGUpIHsKICAgICAgcmV0dXJuIGUucmVwbGFjZShSLCAiIik7CiAgICB9CgogICAgZnVuY3Rpb24gdyhlKSB7CiAgICAgIHZhciB0ID0gZS5zcGxpdCgiIik7CiAgICAgIHJldHVybiB0ID0gdC5maWx0ZXIoZnVuY3Rpb24gKGUpIHsKICAgICAgICB2YXIgdCA9IGUuY2hhckNvZGVBdCgwKTsKICAgICAgICByZXR1cm4gMTI3ICE9PSB0ICYmICghKHQgPD0gMzEpIHx8IDEwID09PSB0IHx8IDEzID09PSB0KTsKICAgICAgfSksIHQuam9pbigiIik7CiAgICB9CgogICAgdmFyIHggPSBuKDMpLkZpbHRlckNTUywKICAgICAgICBrID0gbigzKS5nZXREZWZhdWx0V2hpdGVMaXN0LAogICAgICAgIF8gPSBuKDUpLAogICAgICAgIEEgPSBuZXcgeCgpLAogICAgICAgIFMgPSAvPC9nLAogICAgICAgIE8gPSAvPi9nLAogICAgICAgICQgPSAvIi9nLAogICAgICAgIEUgPSAvJnF1b3Q7L2csCiAgICAgICAgaiA9IC8mIyhbYS16QS1aMC05XSopOz8vZ2ltLAogICAgICAgIFQgPSAvJmNvbG9uOz8vZ2ltLAogICAgICAgIEMgPSAvJm5ld2xpbmU7Py9naW0sCiAgICAgICAgSSA9IC8oKGpccyphXHMqdlxzKmF8dlxzKmJ8bFxzKmlccyp2XHMqZSlccypzXHMqY1xzKnJccyppXHMqcFxzKnRccyp8bVxzKm9ccypjXHMqaFxzKmEpXDovZ2ksCiAgICAgICAgUCA9IC9lXHMqeFxzKnBccypyXHMqZVxzKnNccypzXHMqaVxzKm9ccypuXHMqXCguKi9naSwKICAgICAgICBNID0gL3VccypyXHMqbFxzKlwoLiovZ2ksCiAgICAgICAgUiA9IC88IS0tW1xzXFNdKj8tLT4vZzsKCiAgICB0LndoaXRlTGlzdCA9IHIoKSwgdC5nZXREZWZhdWx0V2hpdGVMaXN0ID0gciwgdC5vblRhZyA9IG8sIHQub25JZ25vcmVUYWcgPSBpLCB0Lm9uVGFnQXR0ciA9IGEsIHQub25JZ25vcmVUYWdBdHRyID0gcywgdC5zYWZlQXR0clZhbHVlID0gYywgdC5lc2NhcGVIdG1sID0gbCwgdC5lc2NhcGVRdW90ZSA9IHUsIHQudW5lc2NhcGVRdW90ZSA9IGQsIHQuZXNjYXBlSHRtbEVudGl0aWVzID0gcCwgdC5lc2NhcGVEYW5nZXJIdG1sNUVudGl0aWVzID0gZiwgdC5jbGVhck5vblByaW50YWJsZUNoYXJhY3RlciA9IGgsIHQuZnJpZW5kbHlBdHRyVmFsdWUgPSB2LCB0LmVzY2FwZUF0dHJWYWx1ZSA9IGcsIHQub25JZ25vcmVUYWdTdHJpcEFsbCA9IG0sIHQuU3RyaXBUYWdCb2R5ID0geSwgdC5zdHJpcENvbW1lbnRUYWcgPSBiLCB0LnN0cmlwQmxhbmtDaGFyID0gdywgdC5jc3NGaWx0ZXIgPSBBLCB0LmdldERlZmF1bHRDU1NXaGl0ZUxpc3QgPSBrOwogIH0sIGZ1bmN0aW9uIChlLCB0LCBuKSB7CiAgICBmdW5jdGlvbiByKGUpIHsKICAgICAgdmFyIHQgPSBkLnNwYWNlSW5kZXgoZSk7CiAgICAgIGlmICgtMSA9PT0gdCkgdmFyIG4gPSBlLnNsaWNlKDEsIC0xKTtlbHNlIHZhciBuID0gZS5zbGljZSgxLCB0ICsgMSk7CiAgICAgIHJldHVybiBuID0gZC50cmltKG4pLnRvTG93ZXJDYXNlKCksICIvIiA9PT0gbi5zbGljZSgwLCAxKSAmJiAobiA9IG4uc2xpY2UoMSkpLCAiLyIgPT09IG4uc2xpY2UoLTEpICYmIChuID0gbi5zbGljZSgwLCAtMSkpLCBuOwogICAgfQoKICAgIGZ1bmN0aW9uIG8oZSkgewogICAgICByZXR1cm4gIjwvIiA9PT0gZS5zbGljZSgwLCAyKTsKICAgIH0KCiAgICBmdW5jdGlvbiBpKGUsIHQsIG4pIHsKICAgICAgInVzZXIgc3RyaWN0IjsKCiAgICAgIHZhciBpID0gIiIsCiAgICAgICAgICBhID0gMCwKICAgICAgICAgIHMgPSAhMSwKICAgICAgICAgIGwgPSAhMSwKICAgICAgICAgIGMgPSAwLAogICAgICAgICAgdSA9IGUubGVuZ3RoLAogICAgICAgICAgZCA9ICIiLAogICAgICAgICAgcCA9ICIiOwoKICAgICAgZm9yIChjID0gMDsgYyA8IHU7IGMrKykgewogICAgICAgIHZhciBmID0gZS5jaGFyQXQoYyk7CgogICAgICAgIGlmICghMSA9PT0gcykgewogICAgICAgICAgaWYgKCI8IiA9PT0gZikgewogICAgICAgICAgICBzID0gYzsKICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIGlmICghMSA9PT0gbCkgewogICAgICAgICAgaWYgKCI8IiA9PT0gZikgewogICAgICAgICAgICBpICs9IG4oZS5zbGljZShhLCBjKSksIHMgPSBjLCBhID0gYzsKICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKCI+IiA9PT0gZikgewogICAgICAgICAgICBpICs9IG4oZS5zbGljZShhLCBzKSksIHAgPSBlLnNsaWNlKHMsIGMgKyAxKSwgZCA9IHIocCksIGkgKz0gdChzLCBpLmxlbmd0aCwgZCwgcCwgbyhwKSksIGEgPSBjICsgMSwgcyA9ICExOwogICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoKCciJyA9PT0gZiB8fCAiJyIgPT09IGYpICYmICI9IiA9PT0gZS5jaGFyQXQoYyAtIDEpKSB7CiAgICAgICAgICAgIGwgPSBmOwogICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgaWYgKGYgPT09IGwpIHsKICAgICAgICAgIGwgPSAhMTsKICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIGEgPCBlLmxlbmd0aCAmJiAoaSArPSBuKGUuc3Vic3RyKGEpKSksIGk7CiAgICB9CgogICAgZnVuY3Rpb24gYShlLCB0KSB7CiAgICAgICJ1c2VyIHN0cmljdCI7CgogICAgICBmdW5jdGlvbiBuKGUsIG4pIHsKICAgICAgICBpZiAoZSA9IGQudHJpbShlKSwgZSA9IGUucmVwbGFjZShwLCAiIikudG9Mb3dlckNhc2UoKSwgIShlLmxlbmd0aCA8IDEpKSB7CiAgICAgICAgICB2YXIgciA9IHQoZSwgbiB8fCAiIik7CiAgICAgICAgICByICYmIG8ucHVzaChyKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGZvciAodmFyIHIgPSAwLCBvID0gW10sIGkgPSAhMSwgYSA9IGUubGVuZ3RoLCBjID0gMDsgYyA8IGE7IGMrKykgewogICAgICAgIHZhciBmLAogICAgICAgICAgICBoLAogICAgICAgICAgICB2ID0gZS5jaGFyQXQoYyk7CiAgICAgICAgaWYgKCExICE9PSBpIHx8ICI9IiAhPT0gdikgewogICAgICAgICAgaWYgKCExID09PSBpIHx8IGMgIT09IHIgfHwgJyInICE9PSB2ICYmICInIiAhPT0gdiB8fCAiPSIgIT09IGUuY2hhckF0KGMgLSAxKSkgewogICAgICAgICAgICBpZiAoL1xzfFxufFx0Ly50ZXN0KHYpKSB7CiAgICAgICAgICAgICAgaWYgKGUgPSBlLnJlcGxhY2UoL1xzfFxufFx0L2csICIgIiksICExID09PSBpKSB7CiAgICAgICAgICAgICAgICBpZiAoLTEgPT09IChoID0gcyhlLCBjKSkpIHsKICAgICAgICAgICAgICAgICAgZiA9IGQudHJpbShlLnNsaWNlKHIsIGMpKSwgbihmKSwgaSA9ICExLCByID0gYyArIDE7CiAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGMgPSBoIC0gMTsKICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgaWYgKC0xID09PSAoaCA9IGwoZSwgYyAtIDEpKSkgewogICAgICAgICAgICAgICAgZiA9IGQudHJpbShlLnNsaWNlKHIsIGMpKSwgZiA9IHUoZiksIG4oaSwgZiksIGkgPSAhMSwgciA9IGMgKyAxOwogICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgaWYgKC0xID09PSAoaCA9IGUuaW5kZXhPZih2LCBjICsgMSkpKSBicmVhazsKICAgICAgICAgICAgZiA9IGQudHJpbShlLnNsaWNlKHIgKyAxLCBoKSksIG4oaSwgZiksIGkgPSAhMSwgYyA9IGgsIHIgPSBjICsgMTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgaSA9IGUuc2xpY2UociwgYyksIHIgPSBjICsgMTsKICAgICAgfQoKICAgICAgcmV0dXJuIHIgPCBlLmxlbmd0aCAmJiAoITEgPT09IGkgPyBuKGUuc2xpY2UocikpIDogbihpLCB1KGQudHJpbShlLnNsaWNlKHIpKSkpKSwgZC50cmltKG8uam9pbigiICIpKTsKICAgIH0KCiAgICBmdW5jdGlvbiBzKGUsIHQpIHsKICAgICAgZm9yICg7IHQgPCBlLmxlbmd0aDsgdCsrKSB7CiAgICAgICAgdmFyIG4gPSBlW3RdOwogICAgICAgIGlmICgiICIgIT09IG4pIHJldHVybiAiPSIgPT09IG4gPyB0IDogLTE7CiAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBsKGUsIHQpIHsKICAgICAgZm9yICg7IHQgPiAwOyB0LS0pIHsKICAgICAgICB2YXIgbiA9IGVbdF07CiAgICAgICAgaWYgKCIgIiAhPT0gbikgcmV0dXJuICI9IiA9PT0gbiA/IHQgOiAtMTsKICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIGMoZSkgewogICAgICByZXR1cm4gJyInID09PSBlWzBdICYmICciJyA9PT0gZVtlLmxlbmd0aCAtIDFdIHx8ICInIiA9PT0gZVswXSAmJiAiJyIgPT09IGVbZS5sZW5ndGggLSAxXTsKICAgIH0KCiAgICBmdW5jdGlvbiB1KGUpIHsKICAgICAgcmV0dXJuIGMoZSkgPyBlLnN1YnN0cigxLCBlLmxlbmd0aCAtIDIpIDogZTsKICAgIH0KCiAgICB2YXIgZCA9IG4oNSksCiAgICAgICAgcCA9IC9bXmEtekEtWjAtOV86XC5cLV0vZ2ltOwogICAgdC5wYXJzZVRhZyA9IGksIHQucGFyc2VBdHRyID0gYTsKICB9LCBmdW5jdGlvbiAoZSwgdCwgbikgewogICAgdmFyIHIsIG8sIGk7CiAgICAvKiEKICAgIGF1dG9zaXplIDQuMC4yCiAgICBsaWNlbnNlOiBNSVQKICAgIGh0dHA6Ly93d3cuamFja2xtb29yZS5jb20vYXV0b3NpemUKICAgICovCgogICAgIWZ1bmN0aW9uIChuLCBhKSB7CiAgICAgIG8gPSBbZSwgdF0sIHIgPSBhLCB2b2lkIDAgIT09IChpID0gImZ1bmN0aW9uIiA9PSB0eXBlb2YgciA/IHIuYXBwbHkodCwgbykgOiByKSAmJiAoZS5leHBvcnRzID0gaSk7CiAgICB9KDAsIGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgICJ1c2Ugc3RyaWN0IjsKCiAgICAgIGZ1bmN0aW9uIG4oZSkgewogICAgICAgIGZ1bmN0aW9uIHQodCkgewogICAgICAgICAgdmFyIG4gPSBlLnN0eWxlLndpZHRoOwogICAgICAgICAgZS5zdHlsZS53aWR0aCA9ICIwcHgiLCBlLm9mZnNldFdpZHRoLCBlLnN0eWxlLndpZHRoID0gbiwgZS5zdHlsZS5vdmVyZmxvd1kgPSB0OwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gbihlKSB7CiAgICAgICAgICBmb3IgKHZhciB0ID0gW107IGUgJiYgZS5wYXJlbnROb2RlICYmIGUucGFyZW50Tm9kZSBpbnN0YW5jZW9mIEVsZW1lbnQ7KSB7CiAgICAgICAgICAgIGUucGFyZW50Tm9kZS5zY3JvbGxUb3AgJiYgdC5wdXNoKHsKICAgICAgICAgICAgICBub2RlOiBlLnBhcmVudE5vZGUsCiAgICAgICAgICAgICAgc2Nyb2xsVG9wOiBlLnBhcmVudE5vZGUuc2Nyb2xsVG9wCiAgICAgICAgICAgIH0pLCBlID0gZS5wYXJlbnROb2RlOwogICAgICAgICAgfQoKICAgICAgICAgIHJldHVybiB0OwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gcigpIHsKICAgICAgICAgIGlmICgwICE9PSBlLnNjcm9sbEhlaWdodCkgewogICAgICAgICAgICB2YXIgdCA9IG4oZSksCiAgICAgICAgICAgICAgICByID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50ICYmIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3A7CiAgICAgICAgICAgIGUuc3R5bGUuaGVpZ2h0ID0gIiIsIGUuc3R5bGUuaGVpZ2h0ID0gZS5zY3JvbGxIZWlnaHQgKyBzICsgInB4IiwgbCA9IGUuY2xpZW50V2lkdGgsIHQuZm9yRWFjaChmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgIGUubm9kZS5zY3JvbGxUb3AgPSBlLnNjcm9sbFRvcDsKICAgICAgICAgICAgfSksIHIgJiYgKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3AgPSByKTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIG8oKSB7CiAgICAgICAgICByKCk7CiAgICAgICAgICB2YXIgbiA9IE1hdGgucm91bmQocGFyc2VGbG9hdChlLnN0eWxlLmhlaWdodCkpLAogICAgICAgICAgICAgIG8gPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShlLCBudWxsKSwKICAgICAgICAgICAgICBpID0gImNvbnRlbnQtYm94IiA9PT0gby5ib3hTaXppbmcgPyBNYXRoLnJvdW5kKHBhcnNlRmxvYXQoby5oZWlnaHQpKSA6IGUub2Zmc2V0SGVpZ2h0OwoKICAgICAgICAgIGlmIChpIDwgbiA/ICJoaWRkZW4iID09PSBvLm92ZXJmbG93WSAmJiAodCgic2Nyb2xsIiksIHIoKSwgaSA9ICJjb250ZW50LWJveCIgPT09IG8uYm94U2l6aW5nID8gTWF0aC5yb3VuZChwYXJzZUZsb2F0KHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGUsIG51bGwpLmhlaWdodCkpIDogZS5vZmZzZXRIZWlnaHQpIDogImhpZGRlbiIgIT09IG8ub3ZlcmZsb3dZICYmICh0KCJoaWRkZW4iKSwgcigpLCBpID0gImNvbnRlbnQtYm94IiA9PT0gby5ib3hTaXppbmcgPyBNYXRoLnJvdW5kKHBhcnNlRmxvYXQod2luZG93LmdldENvbXB1dGVkU3R5bGUoZSwgbnVsbCkuaGVpZ2h0KSkgOiBlLm9mZnNldEhlaWdodCksIGMgIT09IGkpIHsKICAgICAgICAgICAgYyA9IGk7CiAgICAgICAgICAgIHZhciBzID0gYSgiYXV0b3NpemU6cmVzaXplZCIpOwoKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICBlLmRpc3BhdGNoRXZlbnQocyk7CiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHt9CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBpZiAoZSAmJiBlLm5vZGVOYW1lICYmICJURVhUQVJFQSIgPT09IGUubm9kZU5hbWUgJiYgIWkuaGFzKGUpKSB7CiAgICAgICAgICB2YXIgcyA9IG51bGwsCiAgICAgICAgICAgICAgbCA9IG51bGwsCiAgICAgICAgICAgICAgYyA9IG51bGwsCiAgICAgICAgICAgICAgdSA9IGZ1bmN0aW9uIHUoKSB7CiAgICAgICAgICAgIGUuY2xpZW50V2lkdGggIT09IGwgJiYgbygpOwogICAgICAgICAgfSwKICAgICAgICAgICAgICBkID0gZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoInJlc2l6ZSIsIHUsICExKSwgZS5yZW1vdmVFdmVudExpc3RlbmVyKCJpbnB1dCIsIG8sICExKSwgZS5yZW1vdmVFdmVudExpc3RlbmVyKCJrZXl1cCIsIG8sICExKSwgZS5yZW1vdmVFdmVudExpc3RlbmVyKCJhdXRvc2l6ZTpkZXN0cm95IiwgZCwgITEpLCBlLnJlbW92ZUV2ZW50TGlzdGVuZXIoImF1dG9zaXplOnVwZGF0ZSIsIG8sICExKSwgT2JqZWN0LmtleXModCkuZm9yRWFjaChmdW5jdGlvbiAobikgewogICAgICAgICAgICAgIGUuc3R5bGVbbl0gPSB0W25dOwogICAgICAgICAgICB9KSwgaVsiZGVsZXRlIl0oZSk7CiAgICAgICAgICB9LmJpbmQoZSwgewogICAgICAgICAgICBoZWlnaHQ6IGUuc3R5bGUuaGVpZ2h0LAogICAgICAgICAgICByZXNpemU6IGUuc3R5bGUucmVzaXplLAogICAgICAgICAgICBvdmVyZmxvd1k6IGUuc3R5bGUub3ZlcmZsb3dZLAogICAgICAgICAgICBvdmVyZmxvd1g6IGUuc3R5bGUub3ZlcmZsb3dYLAogICAgICAgICAgICB3b3JkV3JhcDogZS5zdHlsZS53b3JkV3JhcAogICAgICAgICAgfSk7CgogICAgICAgICAgZS5hZGRFdmVudExpc3RlbmVyKCJhdXRvc2l6ZTpkZXN0cm95IiwgZCwgITEpLCAib25wcm9wZXJ0eWNoYW5nZSIgaW4gZSAmJiAib25pbnB1dCIgaW4gZSAmJiBlLmFkZEV2ZW50TGlzdGVuZXIoImtleXVwIiwgbywgITEpLCB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigicmVzaXplIiwgdSwgITEpLCBlLmFkZEV2ZW50TGlzdGVuZXIoImlucHV0IiwgbywgITEpLCBlLmFkZEV2ZW50TGlzdGVuZXIoImF1dG9zaXplOnVwZGF0ZSIsIG8sICExKSwgZS5zdHlsZS5vdmVyZmxvd1ggPSAiaGlkZGVuIiwgZS5zdHlsZS53b3JkV3JhcCA9ICJicmVhay13b3JkIiwgaS5zZXQoZSwgewogICAgICAgICAgICBkZXN0cm95OiBkLAogICAgICAgICAgICB1cGRhdGU6IG8KICAgICAgICAgIH0pLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciB0ID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUoZSwgbnVsbCk7CiAgICAgICAgICAgICJ2ZXJ0aWNhbCIgPT09IHQucmVzaXplID8gZS5zdHlsZS5yZXNpemUgPSAibm9uZSIgOiAiYm90aCIgPT09IHQucmVzaXplICYmIChlLnN0eWxlLnJlc2l6ZSA9ICJob3Jpem9udGFsIiksIHMgPSAiY29udGVudC1ib3giID09PSB0LmJveFNpemluZyA/IC0ocGFyc2VGbG9hdCh0LnBhZGRpbmdUb3ApICsgcGFyc2VGbG9hdCh0LnBhZGRpbmdCb3R0b20pKSA6IHBhcnNlRmxvYXQodC5ib3JkZXJUb3BXaWR0aCkgKyBwYXJzZUZsb2F0KHQuYm9yZGVyQm90dG9tV2lkdGgpLCBpc05hTihzKSAmJiAocyA9IDApLCBvKCk7CiAgICAgICAgICB9KCk7CiAgICAgICAgfQogICAgICB9CgogICAgICBmdW5jdGlvbiByKGUpIHsKICAgICAgICB2YXIgdCA9IGkuZ2V0KGUpOwogICAgICAgIHQgJiYgdC5kZXN0cm95KCk7CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIG8oZSkgewogICAgICAgIHZhciB0ID0gaS5nZXQoZSk7CiAgICAgICAgdCAmJiB0LnVwZGF0ZSgpOwogICAgICB9CgogICAgICB2YXIgaSA9ICJmdW5jdGlvbiIgPT0gdHlwZW9mIE1hcCA/IG5ldyBNYXAoKSA6IGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgZSA9IFtdLAogICAgICAgICAgICB0ID0gW107CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIGhhczogZnVuY3Rpb24gaGFzKHQpIHsKICAgICAgICAgICAgcmV0dXJuIGUuaW5kZXhPZih0KSA+IC0xOwogICAgICAgICAgfSwKICAgICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KG4pIHsKICAgICAgICAgICAgcmV0dXJuIHRbZS5pbmRleE9mKG4pXTsKICAgICAgICAgIH0sCiAgICAgICAgICBzZXQ6IGZ1bmN0aW9uIHNldChuLCByKSB7CiAgICAgICAgICAgIC0xID09PSBlLmluZGV4T2YobikgJiYgKGUucHVzaChuKSwgdC5wdXNoKHIpKTsKICAgICAgICAgIH0sCiAgICAgICAgICAiZGVsZXRlIjogZnVuY3Rpb24gX2RlbGV0ZShuKSB7CiAgICAgICAgICAgIHZhciByID0gZS5pbmRleE9mKG4pOwogICAgICAgICAgICByID4gLTEgJiYgKGUuc3BsaWNlKHIsIDEpLCB0LnNwbGljZShyLCAxKSk7CiAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgfSgpLAogICAgICAgICAgYSA9IGZ1bmN0aW9uIGEoZSkgewogICAgICAgIHJldHVybiBuZXcgRXZlbnQoZSwgewogICAgICAgICAgYnViYmxlczogITAKICAgICAgICB9KTsKICAgICAgfTsKCiAgICAgIHRyeSB7CiAgICAgICAgbmV3IEV2ZW50KCJ0ZXN0Iik7CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICBhID0gZnVuY3Rpb24gYShlKSB7CiAgICAgICAgICB2YXIgdCA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KCJFdmVudCIpOwogICAgICAgICAgcmV0dXJuIHQuaW5pdEV2ZW50KGUsICEwLCAhMSksIHQ7CiAgICAgICAgfTsKICAgICAgfQoKICAgICAgdmFyIHMgPSBudWxsOwogICAgICAidW5kZWZpbmVkIiA9PSB0eXBlb2Ygd2luZG93IHx8ICJmdW5jdGlvbiIgIT0gdHlwZW9mIHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlID8gKHMgPSBmdW5jdGlvbiBzKGUpIHsKICAgICAgICByZXR1cm4gZTsKICAgICAgfSwgcy5kZXN0cm95ID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICByZXR1cm4gZTsKICAgICAgfSwgcy51cGRhdGUgPSBmdW5jdGlvbiAoZSkgewogICAgICAgIHJldHVybiBlOwogICAgICB9KSA6IChzID0gZnVuY3Rpb24gcyhlLCB0KSB7CiAgICAgICAgcmV0dXJuIGUgJiYgQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChlLmxlbmd0aCA/IGUgOiBbZV0sIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICByZXR1cm4gbihlKTsKICAgICAgICB9KSwgZTsKICAgICAgfSwgcy5kZXN0cm95ID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICByZXR1cm4gZSAmJiBBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGUubGVuZ3RoID8gZSA6IFtlXSwgciksIGU7CiAgICAgIH0sIHMudXBkYXRlID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICByZXR1cm4gZSAmJiBBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGUubGVuZ3RoID8gZSA6IFtlXSwgbyksIGU7CiAgICAgIH0pLCB0WyJkZWZhdWx0Il0gPSBzLCBlLmV4cG9ydHMgPSB0WyJkZWZhdWx0Il07CiAgICB9KTsKICB9LCBmdW5jdGlvbiAoZSwgdCwgbikgewogICAgInVzZSBzdHJpY3QiOwoKICAgIGZ1bmN0aW9uIHIoZSkgewogICAgICByZXR1cm4gZSAmJiBlLl9fZXNNb2R1bGUgPyBlIDogewogICAgICAgICJkZWZhdWx0IjogZQogICAgICB9OwogICAgfQoKICAgIGZ1bmN0aW9uIG8oZSkgewogICAgICByZXR1cm4gISFlICYmIHRoaXMuaW5pdChlKSwgdGhpczsKICAgIH0KCiAgICBmdW5jdGlvbiBpKGUpIHsKICAgICAgcmV0dXJuIG5ldyBvKGUpOwogICAgfQoKICAgIHZhciBhID0gbigyNiksCiAgICAgICAgcyA9IHIoYSksCiAgICAgICAgbCA9IG4oMTcpLAogICAgICAgIGMgPSByKGwpLAogICAgICAgIHUgPSBuKDIwKSwKICAgICAgICBkID0gcih1KSwKICAgICAgICBwID0gbig2KSwKICAgICAgICBmID0gcihwKSwKICAgICAgICBoID0gbigyKSwKICAgICAgICB2ID0gbigyNCksCiAgICAgICAgZyA9IHIodiksCiAgICAgICAgbSA9IG4oMCksCiAgICAgICAgeSA9IHIobSksCiAgICAgICAgYiA9IG4oMjIpLAogICAgICAgIHcgPSByKGIpLAogICAgICAgIHggPSBuKDE5KSwKICAgICAgICBrID0gcih4KSwKICAgICAgICBfID0gbigyMyksCiAgICAgICAgQSA9IG4oMjUpLAogICAgICAgIFMgPSByKEEpLAogICAgICAgIE8gPSBuKDIxKSwKICAgICAgICAkID0gcihPKSwKICAgICAgICBFID0gewogICAgICBjb21tZW50OiAiIiwKICAgICAgbmljazogIiIsCiAgICAgIG1haWw6ICIiLAogICAgICBsaW5rOiAiIiwKICAgICAgdWE6IHlbImRlZmF1bHQiXS51YSwKICAgICAgdXJsOiAiIiwKICAgICAgUVFBdmF0YXI6ICIiCiAgICB9LAogICAgICAgIGogPSAiIiwKICAgICAgICBUID0gewogICAgICBjZG46ICJodHRwczovL2dyYXZhdGFyLmxvbGkubmV0L2F2YXRhci8iLAogICAgICBkczogWyJtcCIsICJpZGVudGljb24iLCAibW9uc3RlcmlkIiwgIndhdmF0YXIiLCAicm9ib2hhc2giLCAicmV0cm8iLCAiIl0sCiAgICAgIHBhcmFtczogIiIsCiAgICAgIGhpZGU6ICExCiAgICB9OwoKICAgIG8ucHJvdG90eXBlLmluaXQgPSBmdW5jdGlvbiAoZSkgewogICAgICBpZiAoInVuZGVmaW5lZCIgPT0gdHlwZW9mIGRvY3VtZW50KSB0aHJvdyBuZXcgRXJyb3IoIlNvcnJ5LCBWYWxpbmUgZG9lcyBub3Qgc3VwcG9ydCBTZXJ2ZXItc2lkZSByZW5kZXJpbmcuIik7CiAgICAgIHZhciB0ID0gdGhpczsKICAgICAgcmV0dXJuIGUgJiYgKGUgPSB5WyJkZWZhdWx0Il0uZXh0ZW5kKGguZGVmYXVsdENvbmZpZywgZSksIHQuaTE4biA9ICgwLCBkWyJkZWZhdWx0Il0pKGUubGFuZyB8fCB5WyJkZWZhdWx0Il0ubGFuZywgZS5sYW5nTW9kZSksIHQuY29uZmlnID0gZSwgZlsiZGVmYXVsdCJdLm1hcHMgPSAhIWUuZW1vamlNYXBzICYmIGUuZW1vamlNYXBzIHx8IGZbImRlZmF1bHQiXS5tYXBzLCBmWyJkZWZhdWx0Il0uY2RuID0gISFlLmVtb2ppQ0ROICYmIGUuZW1vamlDRE4gfHwgZlsiZGVmYXVsdCJdLmNkbiwgdC5faW5pdCgpKSwgdDsKICAgIH0sIG8ucHJvdG90eXBlLl9pbml0ID0gZnVuY3Rpb24gKCkgewogICAgICB2YXIgZSA9IHRoaXM7CgogICAgICB0cnkgewogICAgICAgIHZhciB0ID0gZS5jb25maWcsCiAgICAgICAgICAgIG4gPSB0LmF2YXRhciwKICAgICAgICAgICAgciA9IHQuYXZhdGFyRm9yY2UsCiAgICAgICAgICAgIG8gPSB0LmF2YXRhcl9jZG4sCiAgICAgICAgICAgIGkgPSB0LnZpc2l0b3IsCiAgICAgICAgICAgIGEgPSB0LnBhdGgsCiAgICAgICAgICAgIHMgPSB2b2lkIDAgPT09IGEgPyBsb2NhdGlvbi5wYXRobmFtZSA6IGEsCiAgICAgICAgICAgIGwgPSB0LnBhZ2VTaXplLAogICAgICAgICAgICBjID0gdC5yZWNvcmRJUDsKICAgICAgICBlLmNvbmZpZy5wYXRoID0gcy5yZXBsYWNlKC9pbmRleFwuaHRtbD8kLywgIiIpOwogICAgICAgIHZhciB1ID0gVC5kcywKICAgICAgICAgICAgZCA9IHIgPyAiJnE9IiArIGguUmFuZG9tU3RyIDogIiI7CiAgICAgICAgVC5wYXJhbXMgPSAiP2Q9IiArICh1LmluZGV4T2YobikgPiAtMSA/IG4gOiAibXAiKSArICImdj0iICsgaC5WRVJTSU9OICsgZCwgVC5oaWRlID0gImhpZGUiID09PSBuLCBULmNkbiA9IC9eaHR0cHM/XDpcL1wvLy50ZXN0KG8pID8gbyA6IFQuY2RuLCBlLmNvbmZpZy5wYWdlU2l6ZSA9IGlzTmFOKGwpID8gMTAgOiBsIDwgMSA/IDEwIDogbCwgYyAmJiAoMCwgXy5yZWNvcmRJUEZuKShmdW5jdGlvbiAoZSkgewogICAgICAgICAgcmV0dXJuIEUuaXAgPSBlOwogICAgICAgIH0pOwogICAgICAgIHZhciBwID0gZS5jb25maWcuZWwgfHwgbnVsbCwKICAgICAgICAgICAgZiA9ICgwLCB5WyJkZWZhdWx0Il0pKHApOwoKICAgICAgICBpZiAocCA9IHAgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCA/IHAgOiBmW2YubGVuZ3RoIC0gMV0gfHwgbnVsbCkgewogICAgICAgICAgZS4kZWwgPSAoMCwgeVsiZGVmYXVsdCJdKShwKSwgZS4kZWwuYWRkQ2xhc3MoInYiKS5hdHRyKCJkYXRhLWNsYXNzIiwgInYiKSwgVC5oaWRlICYmIGUuJGVsLmFkZENsYXNzKCJoaWRlLWF2YXRhciIpLCBlLmNvbmZpZy5tZXRhID0gKGUuY29uZmlnLmd1ZXN0X2luZm8gfHwgZS5jb25maWcubWV0YSB8fCBoLmRlZmF1bHRNZXRhKS5maWx0ZXIoZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgcmV0dXJuIGguZGVmYXVsdE1ldGEuaW5kZXhPZihlKSA+IC0xOwogICAgICAgICAgfSksIGUuY29uZmlnLnJlcXVpcmVkRmllbGRzID0gZS5jb25maWcucmVxdWlyZWRGaWVsZHMuZmlsdGVyKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIHJldHVybiBoLmRlZmF1bHRNZXRhLmluZGV4T2YoZSkgPiAtMTsKICAgICAgICAgIH0pOwogICAgICAgICAgdmFyIHYgPSAoMCA9PSBlLmNvbmZpZy5tZXRhLmxlbmd0aCA/IGguZGVmYXVsdE1ldGEgOiBlLmNvbmZpZy5tZXRhKS5tYXAoZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgdmFyIG4gPSAibWFpbCIgPT0gdCA/ICJlbWFpbCIgOiAidGV4dCI7CiAgICAgICAgICAgIHJldHVybiBoLmRlZmF1bHRNZXRhLmluZGV4T2YodCkgPiAtMSA/ICc8aW5wdXQgbmFtZT0iJyArIHQgKyAnIiBwbGFjZWhvbGRlcj0iJyArIGUuaTE4bi50KHQpICsgJyIgY2xhc3M9InYnICsgdCArICcgdmlucHV0IiB0eXBlPSInICsgbiArICciPicgOiAiIjsKICAgICAgICAgIH0pLAogICAgICAgICAgICAgIGcgPSAnPGRpdiBjbGFzcz0idnBhbmVsIj48ZGl2IGNsYXNzPSJ2d3JhcCI+PHAgY2xhc3M9ImNhbmNlbC1yZXBseSB0ZXh0LXJpZ2h0IiBzdHlsZT0iZGlzcGxheTpub25lOyIgdGl0bGU9IicgKyBlLmkxOG4udCgiY2FuY2VsUmVwbHkiKSArICciPjxzdmcgY2xhc3M9InZpY29uIGNhbmNlbC1yZXBseS1idG4iIHZpZXdCb3g9IjAgMCAxMDI0IDEwMjQiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiBwLWlkPSI0MjIwIiB3aWR0aD0iMjIiIGhlaWdodD0iMjIiPjxwYXRoIGQ9Ik03OTYuNDU0IDk4NUgyMjcuNTQ1Yy01MC4xODMgMC05Ny40ODEtMTkuNjYyLTEzMy4xODMtNTUuMzYzLTM1LjctMzUuNzAxLTU1LjM2Mi04My01NS4zNjItMTMzLjE4M1YyMjcuNTQ1YzAtNTAuMTgzIDE5LjY2Mi05Ny40ODEgNTUuMzYzLTEzMy4xODMgMzUuNzAxLTM1LjcgODMtNTUuMzYyIDEzMy4xODItNTUuMzYyaDU2OC45MDljNTAuMTgzIDAgOTcuNDgxIDE5LjY2MiAxMzMuMTgzIDU1LjM2MyAzNS43MDEgMzUuNzAyIDU1LjM2MyA4MyA1NS4zNjMgMTMzLjE4M3Y1NjguOTA5YzAgNTAuMTgzLTE5LjY2MiA5Ny40ODEtNTUuMzYzIDEzMy4xODNTODQ2LjYzNyA5ODUgNzk2LjQ1NCA5ODV6TTIyNy41NDUgOTFDMTUyLjI1NCA5MSA5MSAxNTIuMjU0IDkxIDIyNy41NDV2NTY4LjkwOUM5MSA4NzEuNzQ2IDE1Mi4yNTQgOTMzIDIyNy41NDUgOTMzaDU2OC45MDlDODcxLjc0NiA5MzMgOTMzIDg3MS43NDYgOTMzIDc5Ni40NTRWMjI3LjU0NUM5MzMgMTUyLjI1NCA4NzEuNzQ2IDkxIDc5Ni40NTQgOTFIMjI3LjU0NXoiIHAtaWQ9IjQyMjEiPjwvcGF0aD48cGF0aCBkPSJNNTY4LjU2OSA1MTJsMTcwLjI2Ny0xNzAuMjY3YzE1LjU1Ni0xNS41NTYgMTUuNTU2LTQxLjAxMiAwLTU2LjU2OXMtNDEuMDEyLTE1LjU1Ni01Ni41NjkgMEw1MTIgNDU1LjQzMSAzNDEuNzMzIDI4NS4xNjVjLTE1LjU1Ni0xNS41NTYtNDEuMDEyLTE1LjU1Ni01Ni41NjkgMHMtMTUuNTU2IDQxLjAxMiAwIDU2LjU2OUw0NTUuNDMxIDUxMiAyODUuMTY1IDY4Mi4yNjdjLTE1LjU1NiAxNS41NTYtMTUuNTU2IDQxLjAxMiAwIDU2LjU2OSAxNS41NTYgMTUuNTU2IDQxLjAxMiAxNS41NTYgNTYuNTY5IDBMNTEyIDU2OC41NjlsMTcwLjI2NyAxNzAuMjY3YzE1LjU1NiAxNS41NTYgNDEuMDEyIDE1LjU1NiA1Ni41NjkgMCAxNS41NTYtMTUuNTU2IDE1LjU1Ni00MS4wMTIgMC01Ni41NjlMNTY4LjU2OSA1MTJ6IiBwLWlkPSI0MjIyIiA+PC9wYXRoPjwvc3ZnPjwvcD48ZGl2IGNsYXNzPSJ2aGVhZGVyIGl0ZW0nICsgdi5sZW5ndGggKyAnIj4nICsgdi5qb2luKCIiKSArICc8L2Rpdj48ZGl2IGNsYXNzPSJ2ZWRpdCI+PHRleHRhcmVhIGlkPSJ2ZWRpdG9yIiBjbGFzcz0idmVkaXRvciB2aW5wdXQiIHBsYWNlaG9sZGVyPSInICsgZS5jb25maWcucGxhY2Vob2xkZXIgKyAnIj48L3RleHRhcmVhPjxkaXYgY2xhc3M9InZyb3ciPjxkaXYgY2xhc3M9InZjb2wgdmNvbC02MCBzdGF0dXMtYmFyIj48L2Rpdj48ZGl2IGNsYXNzPSJ2Y29sIHZjb2wtNDAgdmN0cmwgdGV4dC1yaWdodCI+PHNwYW4gdGl0bGU9IicgKyBlLmkxOG4udCgiZW1vamkiKSArICciICBjbGFzcz0idmljb24gdmVtb2ppLWJ0biI+PHN2ZyAgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjE2MTcyIiB3aWR0aD0iMjIiIGhlaWdodD0iMjIiID48cGF0aCBkPSJNNTEyIDEwMjRhNTEyIDUxMiAwIDEgMSA1MTItNTEyIDUxMiA1MTIgMCAwIDEtNTEyIDUxMnpNNTEyIDU2Ljg4ODg4OWE0NTUuMTExMTExIDQ1NS4xMTExMTEgMCAxIDAgNDU1LjExMTExMSA0NTUuMTExMTExIDQ1NS4xMTExMTEgNDU1LjExMTExMSAwIDAgMC00NTUuMTExMTExLTQ1NS4xMTExMTF6TTMxMi44ODg4ODkgNTEyQTg1LjMzMzMzMyA4NS4zMzMzMzMgMCAxIDEgMzk4LjIyMjIyMiA0MjYuNjY2NjY3IDg1LjMzMzMzMyA4NS4zMzMzMzMgMCAwIDEgMzEyLjg4ODg4OSA1MTJ6IiBwLWlkPSIxNjE3MyI+PC9wYXRoPjxwYXRoIGQ9Ik01MTIgNzY4QTE0Mi4yMjIyMjIgMTQyLjIyMjIyMiAwIDAgMSAzNjkuNzc3Nzc4IDYyNS43Nzc3NzhhMjguNDQ0NDQ0IDI4LjQ0NDQ0NCAwIDAgMSA1Ni44ODg4ODkgMCA4NS4zMzMzMzMgODUuMzMzMzMzIDAgMCAwIDE3MC42NjY2NjYgMCAyOC40NDQ0NDQgMjguNDQ0NDQ0IDAgMCAxIDU2Ljg4ODg4OSAwQTE0Mi4yMjIyMjIgMTQyLjIyMjIyMiAwIDAgMSA1MTIgNzY4eiIgcC1pZD0iMTYxNzQiPjwvcGF0aD48cGF0aCBkPSJNNzgyLjIyMjIyMiAzOTEuOTY0NDQ0bC0xMTMuNzc3Nzc4IDU5LjczMzMzNGEyOS4wMTMzMzMgMjkuMDEzMzMzIDAgMCAxLTM4LjY4NDQ0NC0xMC44MDg4ODkgMjguNDQ0NDQ0IDI4LjQ0NDQ0NCAwIDAgMSAxMC4yNC0zOC42ODQ0NDVsMTEzLjc3Nzc3OC01Ni44ODg4ODhhMjguNDQ0NDQ0IDI4LjQ0NDQ0NCAwIDAgMSAzOC42ODQ0NDQgMTAuMjQgMjguNDQ0NDQ0IDI4LjQ0NDQ0NCAwIDAgMS0xMC4yNCAzNi40MDg4ODh6IiBwLWlkPSIxNjE3NSI+PC9wYXRoPjxwYXRoIGQ9Ik02NDAuNTY4ODg5IDQ1MS42OTc3NzhsMTEzLjc3Nzc3OCA1Ni44ODg4ODlhMjcuODc1NTU2IDI3Ljg3NTU1NiAwIDAgMCAzOC42ODQ0NDQtMTAuMjQgMjcuODc1NTU2IDI3Ljg3NTU1NiAwIDAgMC0xMC4yNC0zOC42ODQ0NDVsLTExMy43Nzc3NzgtNTYuODg4ODg5YTI4LjQ0NDQ0NCAyOC40NDQ0NDQgMCAwIDAtMzguNjg0NDQ0IDEwLjgwODg4OSAyOC40NDQ0NDQgMjguNDQ0NDQ0IDAgMCAwIDEwLjI0IDM4LjExNTU1NnoiIHAtaWQ9IjE2MTc2Ij48L3BhdGg+PC9zdmc+PC9zcGFuPjxzcGFuIHRpdGxlPSInICsgZS5pMThuLnQoInByZXZpZXciKSArICciIGNsYXNzPSJ2aWNvbiB2cHJldmlldy1idG4iPjxzdmcgIHZpZXdCb3g9IjAgMCAxMDI0IDEwMjQiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiBwLWlkPSIxNzY4OCIgd2lkdGg9IjIyIiBoZWlnaHQ9IjIyIj48cGF0aCBkPSJNNTAyLjM5MDE1NCA5MzUuMzg0NjE1YTI5LjUzODQ2MiAyOS41Mzg0NjIgMCAxIDEgMCA1OS4wNzY5MjNIMTQxLjQzMDE1NEM3OS45MTEzODUgOTk0LjQ2MTUzOCAyOS41Mzg0NjIgOTQ2LjI1NDc2OSAyOS41Mzg0NjIgODg2LjE1Mzg0NlYxMzcuODQ2MTU0QzI5LjUzODQ2MiA3Ny43NDUyMzEgNzkuOTUwNzY5IDI5LjUzODQ2MiAxNDEuMzkwNzY5IDI5LjUzODQ2Mmg3NDEuMjE4NDYyYzYxLjQ0IDAgMTExLjg1MjMwOCA0OC4yMDY3NjkgMTExLjg1MjMwNyAxMDguMzA3NjkydjMwMC4yNjgzMDhhMjkuNTM4NDYyIDI5LjUzODQ2MiAwIDEgMS01OS4wNzY5MjMgMFYxMzcuODQ2MTU0YzAtMjYuODk5NjkyLTIzLjM1NTA3Ny00OS4yMzA3NjktNTIuNzc1Mzg0LTQ5LjIzMDc2OUgxNDEuMzkwNzY5Yy0yOS40MjAzMDggMC01Mi43NzUzODUgMjIuMzMxMDc3LTUyLjc3NTM4NCA0OS4yMzA3Njl2NzQ4LjMwNzY5MmMwIDI2Ljg5OTY5MiAyMy4zNTUwNzcgNDkuMjMwNzY5IDUyLjc3NTM4NCA0OS4yMzA3NjloMzYwLjk5OTM4NXoiIHAtaWQ9IjE3Njg5Ij48L3BhdGg+PHBhdGggZD0iTTE5Ni45MjMwNzcgMjE2LjYxNTM4NW0yOS41Mzg0NjEgMGwzNzQuMTUzODQ3IDBxMjkuNTM4NDYyIDAgMjkuNTM4NDYxIDI5LjUzODQ2MWwwIDBxMCAyOS41Mzg0NjItMjkuNTM4NDYxIDI5LjUzODQ2MmwtMzc0LjE1Mzg0NyAwcS0yOS41Mzg0NjIgMC0yOS41Mzg0NjEtMjkuNTM4NDYybDAgMHEwLTI5LjUzODQ2MiAyOS41Mzg0NjEtMjkuNTM4NDYxWiIgcC1pZD0iMTc2OTAiPjwvcGF0aD48cGF0aCBkPSJNNjQ5Ljg0NjE1NCA4NDYuNzY5MjMxYTIxNi42MTUzODUgMjE2LjYxNTM4NSAwIDEgMCAwLTQzMy4yMzA3NjkgMjE2LjYxNTM4NSAyMTYuNjE1Mzg1IDAgMCAwIDAgNDMzLjIzMDc2OXogbTAgNTkuMDc2OTIzYTI3NS42OTIzMDggMjc1LjY5MjMwOCAwIDEgMSAwLTU1MS4zODQ2MTYgMjc1LjY5MjMwOCAyNzUuNjkyMzA4IDAgMCAxIDAgNTUxLjM4NDYxNnoiIHAtaWQ9IjE3NjkxIj48L3BhdGg+PHBhdGggZD0iTTgwNy4zOTgzODMgODI5LjQ3OTc2OG0yMC44ODY4NDctMjAuODg2ODQ2bDAgMHEyMC44ODY4NDYtMjAuODg2ODQ2IDQxLjc3MzY5MiAwbDEyNS4zMjEwNzkgMTI1LjMyMTA3OXEyMC44ODY4NDYgMjAuODg2ODQ2IDAgNDEuNzczNjkzbDAgMHEtMjAuODg2ODQ2IDIwLjg4Njg0Ni00MS43NzM2OTMgMGwtMTI1LjMyMTA3OC0xMjUuMzIxMDc5cS0yMC44ODY4NDYtMjAuODg2ODQ2IDAtNDEuNzczNjkzWiIgcC1pZD0iMTc2OTIiPjwvcGF0aD48L3N2Zz48L3NwYW4+PC9kaXY+PC9kaXY+PC9kaXY+PGRpdiBjbGFzcz0idnJvdyI+PGRpdiBjbGFzcz0idmNvbCB2Y29sLTMwIiA+PGEgYWx0PSJNYXJrZG93biBpcyBzdXBwb3J0ZWQiIGhyZWY9Imh0dHBzOi8vZ3VpZGVzLmdpdGh1Yi5jb20vZmVhdHVyZXMvbWFzdGVyaW5nLW1hcmtkb3duLyIgY2xhc3M9InZpY29uIiB0YXJnZXQ9Il9ibGFuayI+PHN2ZyBjbGFzcz0ibWFya2Rvd24iIHZpZXdCb3g9IjAgMCAxNiAxNiIgdmVyc2lvbj0iMS4xIiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIGFyaWEtaGlkZGVuPSJ0cnVlIj48cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xNC44NSAzSDEuMTVDLjUyIDMgMCAzLjUyIDAgNC4xNXY3LjY5QzAgMTIuNDguNTIgMTMgMS4xNSAxM2gxMy42OWMuNjQgMCAxLjE1LS41MiAxLjE1LTEuMTV2LTcuN0MxNiAzLjUyIDE1LjQ4IDMgMTQuODUgM3pNOSAxMUg3VjhMNS41IDkuOTIgNCA4djNIMlY1aDJsMS41IDJMNyA1aDJ2NnptMi45OS41TDkuNSA4SDExVjVoMnYzaDEuNWwtMi41MSAzLjV6Ij48L3BhdGg+PC9zdmc+PC9hPjwvZGl2PjxkaXYgY2xhc3M9InZjb2wgdmNvbC03MCB0ZXh0LXJpZ2h0Ij48YnV0dG9uIHR5cGU9ImJ1dHRvbiIgIHRpdGxlPSJDbWR8Q3RybCtFbnRlciIgY2xhc3M9InZzdWJtaXQgdmJ0biI+JyArIGUuaTE4bi50KCJzdWJtaXQiKSArICc8L2J1dHRvbj48L2Rpdj48L2Rpdj48ZGl2IGNsYXNzPSJ2ZW1vamlzIiBzdHlsZT0iZGlzcGxheTpub25lOyI+PC9kaXY+PGRpdiBjbGFzcz0idmlucHV0IHZwcmV2aWV3IiBzdHlsZT0iZGlzcGxheTpub25lOyI+PC9kaXY+PGRpdiBzdHlsZT0iZGlzcGxheTpub25lOyIgY2xhc3M9InZtYXJrIj48L2Rpdj48L2Rpdj48L2Rpdj48ZGl2IGNsYXNzPSJ2Y291bnQiIHN0eWxlPSJkaXNwbGF5Om5vbmU7Ij48c3BhbiBjbGFzcz0idm51bSI+MDwvc3Bhbj4gJyArIGUuaTE4bi50KCJjb21tZW50cyIpICsgJzwvZGl2PjxkaXYgY2xhc3M9InZsb2FkLXRvcCB0ZXh0LWNlbnRlciIgc3R5bGU9ImRpc3BsYXk6bm9uZTsiPjxpIGNsYXNzPSJ2c3Bpbm5lciIgc3R5bGU9IndpZHRoOjMwcHg7aGVpZ2h0OjMwcHg7Ij48L2k+PC9kaXY+PGRpdiBjbGFzcz0idmNhcmRzIj48L2Rpdj48ZGl2IGNsYXNzPSJ2bG9hZC1ib3R0b20gdGV4dC1jZW50ZXIiIHN0eWxlPSJkaXNwbGF5Om5vbmU7Ij48aSBjbGFzcz0idnNwaW5uZXIiIHN0eWxlPSJ3aWR0aDozMHB4O2hlaWdodDozMHB4OyI+PC9pPjwvZGl2PjxkaXYgY2xhc3M9InZlbXB0eSIgc3R5bGU9ImRpc3BsYXk6bm9uZTsiPjwvZGl2PjxkaXYgY2xhc3M9InZwYWdlIHR4dC1jZW50ZXIiIHN0eWxlPSJkaXNwbGF5Om5vbmUiPjxidXR0b24gdHlwZT0iYnV0dG9uIiBjbGFzcz0idm1vcmUgdmJ0biI+JyArIGUuaTE4bi50KCJtb3JlIikgKyAnPC9idXR0b24+PC9kaXY+PGRpdiBjbGFzcz0idnBvd2VyIHR4dC1yaWdodCI+UG93ZXJlZCBCeSA8YSBocmVmPSJodHRwczovL3ZhbGluZS5qcy5vcmciIHRhcmdldD0iX2JsYW5rIj5WYWxpbmU8L2E+PGJyPnYnICsgaC5WRVJTSU9OICsgIjwvZGl2PiI7CiAgICAgICAgICBlLiRlbC5odG1sKGcpLCBlLiRlbC5maW5kKCIuY2FuY2VsLXJlcGx5Iikub24oImNsaWNrIiwgZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgZS5yZXNldCgpOwogICAgICAgICAgfSk7CiAgICAgICAgICB2YXIgbSA9IGUuJGVsLmZpbmQoIi52ZW1wdHkiKTsKICAgICAgICAgIGUuJG5vZGF0YSA9IHsKICAgICAgICAgICAgc2hvdzogZnVuY3Rpb24gc2hvdyh0KSB7CiAgICAgICAgICAgICAgcmV0dXJuIG0uaHRtbCh0IHx8IGUuaTE4bi50KCJzb2ZhIikpLnNob3coKSwgZTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgaGlkZTogZnVuY3Rpb24gaGlkZSgpIHsKICAgICAgICAgICAgICByZXR1cm4gbS5oaWRlKCksIGU7CiAgICAgICAgICAgIH0KICAgICAgICAgIH07CiAgICAgICAgICB2YXIgYiA9IGUuJGVsLmZpbmQoIi52bG9hZC1ib3R0b20iKSwKICAgICAgICAgICAgICB3ID0gZS4kZWwuZmluZCgiLnZsb2FkLXRvcCIpOwogICAgICAgICAgZS4kbG9hZGluZyA9IHsKICAgICAgICAgICAgc2hvdzogZnVuY3Rpb24gc2hvdyh0KSB7CiAgICAgICAgICAgICAgcmV0dXJuIHQgJiYgdy5zaG93KCkgfHwgYi5zaG93KCksIGUuJG5vZGF0YS5oaWRlKCksIGU7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGhpZGU6IGZ1bmN0aW9uIGhpZGUoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHcuaGlkZSgpLCBiLmhpZGUoKSwgMCA9PT0gZS4kZWwuZmluZCgiLnZjYXJkIikubGVuZ3RoICYmIGUuJG5vZGF0YS5zaG93KCksIGU7CiAgICAgICAgICAgIH0KICAgICAgICAgIH07CiAgICAgICAgfQoKICAgICAgICAoMCwga1siZGVmYXVsdCJdKShlLmNvbmZpZywgZnVuY3Rpb24gKHQpIHsKICAgICAgICAgIHZhciBuID0gKDAsIHlbImRlZmF1bHQiXSkoIi52YWxpbmUtY29tbWVudC1jb3VudCIpLAogICAgICAgICAgICAgIHIgPSAwOwogICAgICAgICAgIWZ1bmN0aW9uIHQobikgewogICAgICAgICAgICB2YXIgbyA9IG5bcisrXTsKCiAgICAgICAgICAgIGlmIChvKSB7CiAgICAgICAgICAgICAgdmFyIGkgPSAoMCwgeVsiZGVmYXVsdCJdKShvKS5hdHRyKCJkYXRhLXhpZCIpOwogICAgICAgICAgICAgICEhaSAmJiBlLlEoaSkuY291bnQoKS50aGVuKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICBvLmlubmVyVGV4dCA9IGUsIHQobik7CiAgICAgICAgICAgICAgfSlbImNhdGNoIl0oZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgIG8uaW5uZXJUZXh0ID0gMDsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgfShuKSwgaSAmJiBJLmFkZChBVi5PYmplY3QuZXh0ZW5kKCJDb3VudGVyIiksIGUuY29uZmlnLnBhdGgpLCBlLiRlbCAmJiBlLmJpbmQoKTsKICAgICAgICB9KTsKICAgICAgfSBjYXRjaCAodCkgewogICAgICAgICgwLCAkWyJkZWZhdWx0Il0pKGUsIHQsICJpbml0Iik7CiAgICAgIH0KICAgIH07CgogICAgdmFyIEMgPSBmdW5jdGlvbiBDKGUsIHQpIHsKICAgICAgdmFyIG4gPSBuZXcgZSgpLAogICAgICAgICAgciA9IG5ldyBBVi5BQ0woKTsKICAgICAgci5zZXRQdWJsaWNSZWFkQWNjZXNzKCEwKSwgci5zZXRQdWJsaWNXcml0ZUFjY2VzcyghMCksIG4uc2V0QUNMKHIpLCBuLnNldCgidXJsIiwgdC51cmwpLCBuLnNldCgieGlkIiwgdC54aWQpLCBuLnNldCgidGl0bGUiLCB0LnRpdGxlKSwgbi5zZXQoInRpbWUiLCAxKSwgbi5zYXZlKCkudGhlbihmdW5jdGlvbiAoZSkgewogICAgICAgICgwLCB5WyJkZWZhdWx0Il0pKHQuZWwpLmZpbmQoIi5sZWFuY2xvdWQtdmlzaXRvcnMtY291bnQiKS50ZXh0KDEpOwogICAgICB9KVsiY2F0Y2giXShmdW5jdGlvbiAoZSkge30pOwogICAgfSwKICAgICAgICBJID0gewogICAgICBhZGQ6IGZ1bmN0aW9uIGFkZChlLCB0KSB7CiAgICAgICAgdmFyIG4gPSB0aGlzLAogICAgICAgICAgICByID0gKDAsIHlbImRlZmF1bHQiXSkoIi5sZWFuY2xvdWRfdmlzaXRvcnMsLmxlYW5jbG91ZC12aXNpdG9ycyIpOwoKICAgICAgICBpZiAoMSA9PT0gci5sZW5ndGgpIHsKICAgICAgICAgIHZhciBvID0gclswXSwKICAgICAgICAgICAgICBpID0gZGVjb2RlVVJJKCgwLCB5WyJkZWZhdWx0Il0pKG8pLmF0dHIoImlkIikpLAogICAgICAgICAgICAgIGEgPSAoMCwgeVsiZGVmYXVsdCJdKShvKS5hdHRyKCJkYXRhLWZsYWctdGl0bGUiKSwKICAgICAgICAgICAgICBzID0gZW5jb2RlVVJJKGkpLAogICAgICAgICAgICAgIGwgPSB7CiAgICAgICAgICAgIGVsOiBvLAogICAgICAgICAgICB1cmw6IGksCiAgICAgICAgICAgIHhpZDogcywKICAgICAgICAgICAgdGl0bGU6IGEKICAgICAgICAgIH07CgogICAgICAgICAgaWYgKGRlY29kZVVSSShpKSA9PT0gZGVjb2RlVVJJKHQpKSB7CiAgICAgICAgICAgIHZhciBjID0gbmV3IEFWLlF1ZXJ5KGUpOwogICAgICAgICAgICBjLmVxdWFsVG8oInVybCIsIGkpLCBjLmZpbmQoKS50aGVuKGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgaWYgKHQubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgdmFyIG4gPSB0WzBdOwogICAgICAgICAgICAgICAgbi5pbmNyZW1lbnQoInRpbWUiKSwgbi5zYXZlKCkudGhlbihmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgICAoMCwgeVsiZGVmYXVsdCJdKShvKS5maW5kKCIubGVhbmNsb3VkLXZpc2l0b3JzLWNvdW50IikudGV4dChlLmdldCgidGltZSIpKTsKICAgICAgICAgICAgICAgIH0pWyJjYXRjaCJdKGZ1bmN0aW9uIChlKSB7fSk7CiAgICAgICAgICAgICAgfSBlbHNlIEMoZSwgbCk7CiAgICAgICAgICAgIH0pWyJjYXRjaCJdKGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgMTAxID09IHQuY29kZSA/IEMoZSwgbCkgOiAoMCwgJFsiZGVmYXVsdCJdKShuLCB0KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9IGVsc2UgSS5zaG93KGUsIHIpOwogICAgICAgIH0gZWxzZSBJLnNob3coZSwgcik7CiAgICAgIH0sCiAgICAgIHNob3c6IGZ1bmN0aW9uIHNob3coZSwgdCkgewogICAgICAgIHZhciBuID0gW107CgogICAgICAgIGlmICh0LmZvckVhY2goZnVuY3Rpb24gKGUpIHsKICAgICAgICAgIHZhciB0ID0gKDAsIHlbImRlZmF1bHQiXSkoZSkuZmluZCgiLmxlYW5jbG91ZC12aXNpdG9ycy1jb3VudCIpOwogICAgICAgICAgdCAmJiB0LnRleHQoIjAiKSwgbi5wdXNoKC9cJS8udGVzdCgoMCwgeVsiZGVmYXVsdCJdKShlKS5hdHRyKCJpZCIpKSA/IGRlY29kZVVSSSgoMCwgeVsiZGVmYXVsdCJdKShlKS5hdHRyKCJpZCIpKSA6ICgwLCB5WyJkZWZhdWx0Il0pKGUpLmF0dHIoImlkIikpOwogICAgICAgIH0pLCBuLmxlbmd0aCkgewogICAgICAgICAgdmFyIHIgPSBuZXcgQVYuUXVlcnkoZSk7CiAgICAgICAgICByLmNvbnRhaW5lZEluKCJ1cmwiLCBuKSwgci5maW5kKCkudGhlbihmdW5jdGlvbiAoZSkgewogICAgICAgICAgICBlLmxlbmd0aCA+IDAgJiYgdC5mb3JFYWNoKGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgICAgZS5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICB2YXIgbiA9IGUuZ2V0KCJ4aWQiKSB8fCBlbmNvZGVVUkkoZS5nZXQoInVybCIpKSwKICAgICAgICAgICAgICAgICAgICByID0gZS5nZXQoInRpbWUiKSwKICAgICAgICAgICAgICAgICAgICBvID0gKDAsIHlbImRlZmF1bHQiXSkodCksCiAgICAgICAgICAgICAgICAgICAgaSA9IG8uYXR0cigiaWQiKTsKCiAgICAgICAgICAgICAgICBpZiAoKC9cJS8udGVzdChpKSA/IGkgOiBlbmNvZGVVUkkoaSkpID09IG4pIHsKICAgICAgICAgICAgICAgICAgdmFyIGEgPSBvLmZpbmQoIi5sZWFuY2xvdWQtdmlzaXRvcnMtY291bnQiKTsKICAgICAgICAgICAgICAgICAgYSAmJiBhLnRleHQocik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSlbImNhdGNoIl0oZnVuY3Rpb24gKGUpIHt9KTsKICAgICAgICB9CiAgICAgIH0KICAgIH07CgogICAgby5wcm90b3R5cGUuUSA9IGZ1bmN0aW9uIChlKSB7CiAgICAgIHZhciB0ID0gdGhpcywKICAgICAgICAgIG4gPSBhcmd1bWVudHMubGVuZ3RoLAogICAgICAgICAgciA9IHQuY29uZmlnLmNsYXp6TmFtZTsKCiAgICAgIGlmICgxID09IG4pIHsKICAgICAgICB2YXIgbyA9IG5ldyBBVi5RdWVyeShyKTsKICAgICAgICBvLmRvZXNOb3RFeGlzdCgicmlkIik7CiAgICAgICAgdmFyIGkgPSBuZXcgQVYuUXVlcnkocik7CiAgICAgICAgaS5lcXVhbFRvKCJyaWQiLCAiIik7CiAgICAgICAgdmFyIGEgPSBBVi5RdWVyeS5vcihvLCBpKTsKICAgICAgICByZXR1cm4gIioiID09PSBlID8gYS5leGlzdHMoInVybCIpIDogYS5lcXVhbFRvKCJ1cmwiLCBkZWNvZGVVUkkoZSkpLCBhLmFkZERlc2NlbmRpbmcoImNyZWF0ZWRBdCIpLCBhLmFkZERlc2NlbmRpbmcoImluc2VydGVkQXQiKSwgYTsKICAgICAgfQoKICAgICAgdmFyIHMgPSBKU09OLnN0cmluZ2lmeShhcmd1bWVudHNbMV0pLnJlcGxhY2UoLyhcW3xcXSkvZywgIiIpLAogICAgICAgICAgbCA9ICJzZWxlY3QgKiBmcm9tICIgKyByICsgIiB3aGVyZSByaWQgaW4gKCIgKyBzICsgIikgb3JkZXIgYnkgLWNyZWF0ZWRBdCwtY3JlYXRlZEF0IjsKICAgICAgcmV0dXJuIEFWLlF1ZXJ5LmRvQ2xvdWRRdWVyeShsKTsKICAgIH0sIG8ucHJvdG90eXBlLmluc3RhbGxMb2NhbGUgPSBmdW5jdGlvbiAoZSwgdCkgewogICAgICB2YXIgbiA9IHRoaXM7CiAgICAgIHJldHVybiBuLmkxOG4oZSwgdCksIG47CiAgICB9LCBvLnByb3RvdHlwZS5zZXRQYXRoID0gZnVuY3Rpb24gKGUpIHsKICAgICAgcmV0dXJuIHRoaXMuY29uZmlnLnBhdGggPSBlLCB0aGlzOwogICAgfSwgby5wcm90b3R5cGUuYmluZCA9IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIGUgPSB0aGlzLAogICAgICAgICAgdCA9IGUuJGVsLmZpbmQoIi52ZW1vamlzIiksCiAgICAgICAgICBuID0gZS4kZWwuZmluZCgiLnZwcmV2aWV3IiksCiAgICAgICAgICByID0gZS4kZWwuZmluZCgiLnZlbW9qaS1idG4iKSwKICAgICAgICAgIG8gPSBlLiRlbC5maW5kKCIudnByZXZpZXctYnRuIiksCiAgICAgICAgICBpID0gZS4kZWwuZmluZCgiLnZlZGl0b3IiKSwKICAgICAgICAgIGEgPSBmWyJkZWZhdWx0Il0ubWFwcywKICAgICAgICAgIGwgPSAhMSwKICAgICAgICAgIHUgPSBmdW5jdGlvbiB1KGUpIHsKICAgICAgICB2YXIgbiA9IFtdOwoKICAgICAgICBmb3IgKHZhciByIGluIGEpIHsKICAgICAgICAgIGEuaGFzT3duUHJvcGVydHkocikgJiYgISFmWyJkZWZhdWx0Il0uYnVpbGQocikgJiYgbi5wdXNoKCc8aSB0aXRsZT0iJyArIHIgKyAnIiA+JyArIGZbImRlZmF1bHQiXS5idWlsZChyKSArICI8L2k+Iik7CiAgICAgICAgfQoKICAgICAgICB0Lmh0bWwobi5qb2luKCIiKSksIGwgPSAhMCwgdC5maW5kKCJpIikub24oImNsaWNrIiwgZnVuY3Rpb24gKGUpIHsKICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKSwgeChpWzBdLCAiIDoiICsgKDAsIHlbImRlZmF1bHQiXSkodGhpcykuYXR0cigidGl0bGUiKSArICI6Iik7CiAgICAgICAgfSk7CiAgICAgIH07CgogICAgICBlLiRlbW9qaSA9IHsKICAgICAgICBzaG93OiBmdW5jdGlvbiBzaG93KCkgewogICAgICAgICAgcmV0dXJuICFsICYmIHUoKSwgZS4kcHJldmlldy5oaWRlKCksIHQuc2hvdygpLCByLmFkZENsYXNzKCJhY3RpdmVkIiksIGUuJGVtb2ppOwogICAgICAgIH0sCiAgICAgICAgaGlkZTogZnVuY3Rpb24gaGlkZSgpIHsKICAgICAgICAgIHJldHVybiByLnJlbW92ZUNsYXNzKCJhY3RpdmVkIiksIHQuaGlkZSgpLCBlLiRlbW9qaTsKICAgICAgICB9CiAgICAgIH0sIGUuJHByZXZpZXcgPSB7CiAgICAgICAgc2hvdzogZnVuY3Rpb24gc2hvdygpIHsKICAgICAgICAgIHJldHVybiBqID8gKGUuJGVtb2ppLmhpZGUoKSwgby5hZGRDbGFzcygiYWN0aXZlZCIpLCBuLmh0bWwoaikuc2hvdygpLCBNKCkpIDogZS4kcHJldmlldy5oaWRlKCksIGUuJHByZXZpZXc7CiAgICAgICAgfSwKICAgICAgICBoaWRlOiBmdW5jdGlvbiBoaWRlKCkgewogICAgICAgICAgcmV0dXJuIG8ucmVtb3ZlQ2xhc3MoImFjdGl2ZWQiKSwgbi5oaWRlKCkuaHRtbCgiIiksIGUuJHByZXZpZXc7CiAgICAgICAgfQogICAgICB9OwoKICAgICAgdmFyIGQgPSBmdW5jdGlvbiBkKHQpIHsKICAgICAgICB2YXIgciA9ICgwLCB3WyJkZWZhdWx0Il0pKHQudmFsKCkgfHwgIiIpOwogICAgICAgIHIgfHwgZS4kcHJldmlldy5oaWRlKCksIGogIT0gciAmJiAoaiA9IHIsIG8uaGFzQ2xhc3MoImFjdGl2ZWQiKSA+IC0xICYmIGogIT0gbi5odG1sKCkgJiYgbi5odG1sKGopLCAoMCwgY1siZGVmYXVsdCJdKSh0WzBdKSwgTSgpKTsKICAgICAgfTsKCiAgICAgIHIub24oImNsaWNrIiwgZnVuY3Rpb24gKHQpIHsKICAgICAgICByLmhhc0NsYXNzKCJhY3RpdmVkIikgPyBlLiRlbW9qaS5oaWRlKCkgOiBlLiRlbW9qaS5zaG93KCk7CiAgICAgIH0pLCBvLm9uKCJjbGljayIsIGZ1bmN0aW9uICh0KSB7CiAgICAgICAgby5oYXNDbGFzcygiYWN0aXZlZCIpID8gZS4kcHJldmlldy5oaWRlKCkgOiBlLiRwcmV2aWV3LnNob3coKTsKICAgICAgfSk7CiAgICAgIHZhciBwID0gZS5jb25maWcubWV0YSwKICAgICAgICAgIHYgPSB7fSwKICAgICAgICAgIG0gPSB7CiAgICAgICAgdmVkaXRvcjogImNvbW1lbnQiCiAgICAgIH07CiAgICAgIHAuZm9yRWFjaChmdW5jdGlvbiAoZSkgewogICAgICAgIG1bInYiICsgZV0gPSBlOwogICAgICB9KTsKCiAgICAgIGZvciAodmFyIGIgaW4gbSkgewogICAgICAgIG0uaGFzT3duUHJvcGVydHkoYikgJiYgZnVuY3Rpb24gKCkgewogICAgICAgICAgdmFyIHQgPSBtW2JdLAogICAgICAgICAgICAgIG4gPSBlLiRlbC5maW5kKCIuIiArIGIpOwogICAgICAgICAgdlt0XSA9IG4sIG4ub24oImlucHV0IGNoYW5nZSBibHVyIHByb3BlcnR5Y2hhbmdlIiwgZnVuY3Rpb24gKHIpIHsKICAgICAgICAgICAgZS5jb25maWcuZW5hYmxlUVEgJiYgImJsdXIiID09PSByLnR5cGUgJiYgIm5pY2siID09PSB0ICYmIChpc05hTihuLnZhbCgpKSA/IHlbImRlZmF1bHQiXS5zdG9yZS5nZXQoaC5RUUNhY2hlS2V5KSAmJiB5WyJkZWZhdWx0Il0uc3RvcmUuZ2V0KGguUVFDYWNoZUtleSkubmljayAhPSBuLnZhbCgpICYmICh5WyJkZWZhdWx0Il0uc3RvcmUucmVtb3ZlKGguUVFDYWNoZUtleSksIEUubmljayA9IG4udmFsKCksIEUubWFpbCA9ICIiLCBFLlFRQXZhdGFyID0gIiIpIDogKDAsIF8uZmV0Y2hRUUZuKShuLnZhbCgpLCBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgIHZhciB0ID0gZS5uaWNrIHx8IG4udmFsKCksCiAgICAgICAgICAgICAgICAgIHIgPSBlLnFxICsgIkBxcS5jb20iOwogICAgICAgICAgICAgICgwLCB5WyJkZWZhdWx0Il0pKCIudm5pY2siKS52YWwodCksICgwLCB5WyJkZWZhdWx0Il0pKCIudm1haWwiKS52YWwociksIEUubmljayA9IHQsIEUubWFpbCA9IHIsIEUuUVFBdmF0YXIgPSBlLnBpYzsKICAgICAgICAgICAgfSkpLCAiY29tbWVudCIgPT09IHQgPyBkKG4pIDogRVt0XSA9IHlbImRlZmF1bHQiXS5lc2NhcGUobi52YWwoKS5yZXBsYWNlKC8oXlxzKil8KFxzKiQpL2csICIiKSkuc3Vic3RyaW5nKDAsIDQwKTsKICAgICAgICAgIH0pOwogICAgICAgIH0oKTsKICAgICAgfQoKICAgICAgdmFyIHggPSBmdW5jdGlvbiB4KGUsIHQpIHsKICAgICAgICBpZiAoZG9jdW1lbnQuc2VsZWN0aW9uKSB7CiAgICAgICAgICBlLmZvY3VzKCk7CiAgICAgICAgICBkb2N1bWVudC5zZWxlY3Rpb24uY3JlYXRlUmFuZ2UoKS50ZXh0ID0gdCwgZS5mb2N1cygpOwogICAgICAgIH0gZWxzZSBpZiAoZS5zZWxlY3Rpb25TdGFydCB8fCAiMCIgPT0gZS5zZWxlY3Rpb25TdGFydCkgewogICAgICAgICAgdmFyIG4gPSBlLnNlbGVjdGlvblN0YXJ0LAogICAgICAgICAgICAgIHIgPSBlLnNlbGVjdGlvbkVuZCwKICAgICAgICAgICAgICBvID0gZS5zY3JvbGxUb3A7CiAgICAgICAgICBlLnZhbHVlID0gZS52YWx1ZS5zdWJzdHJpbmcoMCwgbikgKyB0ICsgZS52YWx1ZS5zdWJzdHJpbmcociwgZS52YWx1ZS5sZW5ndGgpLCBlLmZvY3VzKCksIGUuc2VsZWN0aW9uU3RhcnQgPSBuICsgdC5sZW5ndGgsIGUuc2VsZWN0aW9uRW5kID0gbiArIHQubGVuZ3RoLCBlLnNjcm9sbFRvcCA9IG87CiAgICAgICAgfSBlbHNlIGUuZm9jdXMoKSwgZS52YWx1ZSArPSB0OwoKICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICBkKCgwLCB5WyJkZWZhdWx0Il0pKGUpKTsKICAgICAgICB9LCAxMDApOwogICAgICB9LAogICAgICAgICAgayA9IHsKICAgICAgICBubzogMSwKICAgICAgICBzaXplOiBlLmNvbmZpZy5wYWdlU2l6ZSwKICAgICAgICBza2lwOiBlLmNvbmZpZy5wYWdlU2l6ZQogICAgICB9LAogICAgICAgICAgQSA9IGUuJGVsLmZpbmQoIi52cGFnZSIpOwoKICAgICAgQS5vbigiY2xpY2siLCBmdW5jdGlvbiAoZSkgewogICAgICAgIEEuaGlkZSgpLCBrLm5vKyssIE8oKTsKICAgICAgfSk7CgogICAgICB2YXIgTyA9IGZ1bmN0aW9uIE8oKSB7CiAgICAgICAgdmFyIHQgPSBrLnNpemUsCiAgICAgICAgICAgIG4gPSBrLm5vLAogICAgICAgICAgICByID0gTnVtYmVyKGUuJGVsLmZpbmQoIi52bnVtIikudGV4dCgpKTsKICAgICAgICBlLiRsb2FkaW5nLnNob3coKTsKICAgICAgICB2YXIgbyA9IGUuUShlLmNvbmZpZy5wYXRoKTsKICAgICAgICBvLmxpbWl0KHQpLCBvLnNraXAoKG4gLSAxKSAqIHQpLCBvLmZpbmQoKS50aGVuKGZ1bmN0aW9uIChvKSB7CiAgICAgICAgICBpZiAoay5za2lwID0gay5zaXplLCBvICYmIG8ubGVuZ3RoKSB7CiAgICAgICAgICAgIHZhciBpID0gW107CiAgICAgICAgICAgIG8uZm9yRWFjaChmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgIGkucHVzaCh0LmlkKSwgQyh0LCBlLiRlbC5maW5kKCIudmNhcmRzIiksICEwKTsKICAgICAgICAgICAgfSksIGUuUShlLmNvbmZpZy5wYXRoLCBpKS50aGVuKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgKGUgJiYgZS5yZXN1bHRzIHx8IFtdKS5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICBDKGUsICgwLCB5WyJkZWZhdWx0Il0pKCcudnF1b3RlW2RhdGEtc2VsZi1pZD0iJyArIGUuZ2V0KCJyaWQiKSArICciXScpKTsKICAgICAgICAgICAgICB9KVsiY2F0Y2giXShmdW5jdGlvbiAoZSkge30pOwogICAgICAgICAgICB9KSwgdCAqIG4gPCByID8gQS5zaG93KCkgOiBBLmhpZGUoKTsKICAgICAgICAgIH0gZWxzZSBlLiRub2RhdGEuc2hvdygpOwoKICAgICAgICAgIGUuJGxvYWRpbmcuaGlkZSgpOwogICAgICAgIH0pWyJjYXRjaCJdKGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICBlLiRsb2FkaW5nLmhpZGUoKSwgKDAsICRbImRlZmF1bHQiXSkoZSwgdCwgInF1ZXJ5Iik7CiAgICAgICAgfSk7CiAgICAgIH07CgogICAgICBlLlEoZS5jb25maWcucGF0aCkuY291bnQoKS50aGVuKGZ1bmN0aW9uICh0KSB7CiAgICAgICAgdCA+IDAgPyAoZS4kZWwuZmluZCgiLnZjb3VudCIpLnNob3coKS5maW5kKCIudm51bSIpLnRleHQodCksIE8oKSkgOiBlLiRsb2FkaW5nLmhpZGUoKTsKICAgICAgfSlbImNhdGNoIl0oZnVuY3Rpb24gKHQpIHsKICAgICAgICAoMCwgJFsiZGVmYXVsdCJdKShlLCB0LCAiY291bnQiKTsKICAgICAgfSk7CgogICAgICB2YXIgQyA9IGZ1bmN0aW9uIEModCwgbiwgcikgewogICAgICAgIHZhciBvID0gKDAsIHlbImRlZmF1bHQiXSkoJzxkaXYgY2xhc3M9InZjYXJkIiBpZD0iJyArIHQuaWQgKyAnIj48L2Rpdj4nKSwKICAgICAgICAgICAgaSA9IHQuZ2V0KCJ1YSIpLAogICAgICAgICAgICBhID0gIiI7CiAgICAgICAgaSAmJiAhL2phLy50ZXN0KGUuY29uZmlnLmxhbmcpICYmIChpID0geVsiZGVmYXVsdCJdLmRldGVjdChpKSwgYSA9ICc8c3BhbiBjbGFzcz0idnN5cyI+JyArIGkuYnJvd3NlciArICIgIiArIGkudmVyc2lvbiArICc8L3NwYW4+IDxzcGFuIGNsYXNzPSJ2c3lzIj4nICsgaS5vcyArICIgIiArIGkub3NWZXJzaW9uICsgIjwvc3Bhbj4iKSwgIioiID09PSBlLmNvbmZpZy5wYXRoICYmIChhID0gJzxhIGhyZWY9IicgKyB0LmdldCgidXJsIikgKyAnIiBjbGFzcz0idnN5cyI+JyArIHQuZ2V0KCJ1cmwiKSArICI8L2E+Iik7CiAgICAgICAgdmFyIGwgPSB0LmdldCgibGluayIpID8gL15odHRwcz9cOlwvXC8vLnRlc3QodC5nZXQoImxpbmsiKSkgPyB0LmdldCgibGluayIpIDogImh0dHA6Ly8iICsgdC5nZXQoImxpbmsiKSA6ICIiLAogICAgICAgICAgICBjID0gbCA/ICc8YSBjbGFzcz0idm5pY2siIHJlbD0ibm9mb2xsb3ciIGhyZWY9IicgKyBsICsgJyIgdGFyZ2V0PSJfYmxhbmsiID4nICsgdC5nZXQoIm5pY2siKSArICI8L2E+IiA6ICc8c3BhbiBjbGFzcz0idm5pY2siPicgKyB0LmdldCgibmljayIpICsgIjwvc3Bhbj4iLAogICAgICAgICAgICB1ID0gVC5oaWRlID8gIiIgOiBlLmNvbmZpZy5lbmFibGVRUSAmJiB0LmdldCgiUVFBdmF0YXIiKSA/ICc8aW1nIGNsYXNzPSJ2aW1nIiBzcmM9IicgKyB0LmdldCgiUVFBdmF0YXIiKSArICciIHJlZmVycmVyUG9saWN5PSJuby1yZWZlcnJlciIvPicgOiAnPGltZyBjbGFzcz0idmltZyIgc3JjPSInICsgKFQuY2RuICsgKDAsIHNbImRlZmF1bHQiXSkodC5nZXQoIm1haWwiKSkgKyBULnBhcmFtcykgKyAnIj4nLAogICAgICAgICAgICBkID0gdSArICc8ZGl2IGNsYXNzPSJ2aCI+PGRpdiBjbGFzcz0idmhlYWQiPicgKyBjICsgIiAiICsgYSArICc8L2Rpdj48ZGl2IGNsYXNzPSJ2bWV0YSI+PHNwYW4gY2xhc3M9InZ0aW1lIiA+JyArICgwLCBnWyJkZWZhdWx0Il0pKHQuZ2V0KCJpbnNlcnRlZEF0IiksIGUuaTE4bikgKyAnPC9zcGFuPjxzcGFuIGNsYXNzPSJ2YXQiIGRhdGEtdm0taWQ9IicgKyAodC5nZXQoInJpZCIpIHx8IHQuaWQpICsgJyIgZGF0YS1zZWxmLWlkPSInICsgdC5pZCArICciPicgKyBlLmkxOG4udCgicmVwbHkiKSArICc8L3NwYW4+PC9kaXY+PGRpdiBjbGFzcz0idmNvbnRlbnQiIGRhdGEtZXhwYW5kPSInICsgZS5pMThuLnQoImV4cGFuZCIpICsgJyI+JyArICgwLCBTWyJkZWZhdWx0Il0pKHQuZ2V0KCJjb21tZW50IikpICsgJzwvZGl2PjxkaXYgY2xhc3M9InZyZXBseS13cmFwcGVyIiBkYXRhLXNlbGYtaWQ9IicgKyB0LmlkICsgJyI+PC9kaXY+PGRpdiBjbGFzcz0idnF1b3RlIiBkYXRhLXNlbGYtaWQ9IicgKyB0LmlkICsgJyI+PC9kaXY+PC9kaXY+JzsKICAgICAgICBvLmh0bWwoZCk7CiAgICAgICAgdmFyIHAgPSBvLmZpbmQoIi52YXQiKTsKICAgICAgICBvLmZpbmQoImEiKS5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICBlICYmICEoMCwgeVsiZGVmYXVsdCJdKShlKS5oYXNDbGFzcygiYXQiKSAmJiAoMCwgeVsiZGVmYXVsdCJdKShlKS5hdHRyKHsKICAgICAgICAgICAgdGFyZ2V0OiAiX2JsYW5rIiwKICAgICAgICAgICAgcmVsOiAibm9mb2xsb3ciCiAgICAgICAgICB9KTsKICAgICAgICB9KSwgciA/IG4uYXBwZW5kKG8pIDogbi5wcmVwZW5kKG8pOwogICAgICAgIHZhciBmID0gby5maW5kKCIudmNvbnRlbnQiKTsKICAgICAgICBmICYmIFIoZiksIHAgJiYgUChwLCB0KSwgTSgpOwogICAgICB9LAogICAgICAgICAgSSA9IHt9LAogICAgICAgICAgUCA9IGZ1bmN0aW9uIFAodCwgbikgewogICAgICAgIHQub24oImNsaWNrIiwgZnVuY3Rpb24gKHIpIHsKICAgICAgICAgIHZhciBvID0gdC5hdHRyKCJkYXRhLXZtLWlkIiksCiAgICAgICAgICAgICAgaSA9IHQuYXR0cigiZGF0YS1zZWxmLWlkIiksCiAgICAgICAgICAgICAgYSA9IGUuJGVsLmZpbmQoIi52d3JhcCIpLAogICAgICAgICAgICAgIHMgPSAiQCIgKyB5WyJkZWZhdWx0Il0uZXNjYXBlKG4uZ2V0KCJuaWNrIikpOwogICAgICAgICAgKDAsIHlbImRlZmF1bHQiXSkoJy52cmVwbHktd3JhcHBlcltkYXRhLXNlbGYtaWQ9IicgKyBpICsgJyJdJykuYXBwZW5kKGEpLmZpbmQoIi5jYW5jZWwtcmVwbHkiKS5zaG93KCksIEkgPSB7CiAgICAgICAgICAgIGF0OiB5WyJkZWZhdWx0Il0uZXNjYXBlKHMpICsgIiAiLAogICAgICAgICAgICByaWQ6IG8sCiAgICAgICAgICAgIHBpZDogaSwKICAgICAgICAgICAgcm1haWw6IG4uZ2V0KCJtYWlsIikKICAgICAgICAgIH0sIHYuY29tbWVudC5hdHRyKHsKICAgICAgICAgICAgcGxhY2Vob2xkZXI6IHMKICAgICAgICAgIH0pWzBdLmZvY3VzKCk7CiAgICAgICAgfSk7CiAgICAgIH0sCiAgICAgICAgICBNID0gZnVuY3Rpb24gTSgpIHsKICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICJNYXRoSmF4IiBpbiB3aW5kb3cgJiYgInZlcnNpb24iIGluIHdpbmRvdy5NYXRoSmF4ICYmICgvXjMuKi8udGVzdCh3aW5kb3cuTWF0aEpheC52ZXJzaW9uKSAmJiBNYXRoSmF4LnR5cGVzZXQoKSB8fCBNYXRoSmF4Lkh1Yi5RdWV1ZShbIlR5cGVzZXQiLCBNYXRoSmF4Lkh1YiwgZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiLnYiKV0pKSwgInJlbmRlck1hdGhJbkVsZW1lbnQiIGluIHdpbmRvdyAmJiByZW5kZXJNYXRoSW5FbGVtZW50KCgwLCB5WyJkZWZhdWx0Il0pKCIudiIpWzBdLCB7CiAgICAgICAgICAgICAgZGVsaW1pdGVyczogW3sKICAgICAgICAgICAgICAgIGxlZnQ6ICIkJCIsCiAgICAgICAgICAgICAgICByaWdodDogIiQkIiwKICAgICAgICAgICAgICAgIGRpc3BsYXk6ICEwCiAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgbGVmdDogIiQiLAogICAgICAgICAgICAgICAgcmlnaHQ6ICIkIiwKICAgICAgICAgICAgICAgIGRpc3BsYXk6ICExCiAgICAgICAgICAgICAgfV0KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9IGNhdGNoIChlKSB7fQogICAgICAgIH0sIDEwMCk7CiAgICAgIH0sCiAgICAgICAgICBSID0gZnVuY3Rpb24gUihlKSB7CiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICBlWzBdLm9mZnNldEhlaWdodCA+IDIwMCAmJiAoZS5hZGRDbGFzcygiZXhwYW5kIiksIGUub24oImNsaWNrIiwgZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgZS5yZW1vdmVDbGFzcygiZXhwYW5kIik7CiAgICAgICAgICB9KSk7CiAgICAgICAgfSk7CiAgICAgIH07CgogICAgICAhZnVuY3Rpb24gKHQpIHsKICAgICAgICBpZiAodCA9IHlbImRlZmF1bHQiXS5zdG9yZS5nZXQoaC5NZXRhQ2FjaGVLZXkpIHx8IHQpIGZvciAodmFyIG4gaW4gcCkgewogICAgICAgICAgdmFyIHIgPSBwW25dOwogICAgICAgICAgZS4kZWwuZmluZCgiLnYiICsgcikudmFsKHlbImRlZmF1bHQiXS51bmVzY2FwZSh0W3JdKSksIEVbcl0gPSB0W3JdOwogICAgICAgIH0KICAgICAgICB2YXIgbyA9IHlbImRlZmF1bHQiXS5zdG9yZS5nZXQoaC5RUUNhY2hlS2V5KTsKICAgICAgICBFLlFRQXZhdGFyID0gZS5jb25maWcuZW5hYmxlUVEgJiYgISFvICYmIG8ucGljIHx8ICIiOwogICAgICB9KCksIGUucmVzZXQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgRS5jb21tZW50ID0gIiIsIHYuY29tbWVudC52YWwoIiIpLCBkKHYuY29tbWVudCksIHYuY29tbWVudC5hdHRyKCJwbGFjZWhvbGRlciIsIGUuY29uZmlnLnBsYWNlaG9sZGVyKSwgSSA9IHt9LCBlLiRwcmV2aWV3LmhpZGUoKSwgZS4kZWwuZmluZCgiLnZwYW5lbCIpLmFwcGVuZChlLiRlbC5maW5kKCIudndyYXAiKSksIGUuJGVsLmZpbmQoIi5jYW5jZWwtcmVwbHkiKS5oaWRlKCksIGogPSAiIjsKICAgICAgfTsKCiAgICAgIHZhciB6ID0gZS4kZWwuZmluZCgiLnZzdWJtaXQiKSwKICAgICAgICAgIEwgPSBmdW5jdGlvbiBMKHQpIHsKICAgICAgICBpZiAoZS5jb25maWcucmVxdWlyZWRGaWVsZHMuaW5kZXhPZigibmljayIpID4gLTEgJiYgRS5uaWNrLmxlbmd0aCA8IDMpIHJldHVybiB2Lm5pY2tbMF0uZm9jdXMoKSwgdm9pZCBlLiRlbC5maW5kKCIuc3RhdHVzLWJhciIpLnRleHQoIiIgKyBlLmkxOG4udCgibmlja0ZhaWwiKSkuZW1wdHkoM2UzKTsKICAgICAgICBpZiAoZS5jb25maWcucmVxdWlyZWRGaWVsZHMuaW5kZXhPZigibWFpbCIpID4gLTEgJiYgIS9bXHctXC5dK0AoW1x3LV0rXC4pK1thLXpdezIsM30vLnRlc3QoRS5tYWlsKSkgcmV0dXJuIHYubWFpbFswXS5mb2N1cygpLCB2b2lkIGUuJGVsLmZpbmQoIi5zdGF0dXMtYmFyIikudGV4dCgiIiArIGUuaTE4bi50KCJtYWlsRmFpbCIpKS5lbXB0eSgzZTMpOwogICAgICAgIGlmICgiIiA9PSBqKSByZXR1cm4gdm9pZCB2LmNvbW1lbnRbMF0uZm9jdXMoKTsKICAgICAgICBFLmNvbW1lbnQgPSBqLCBFLm5pY2sgPSBFLm5pY2sgfHwgIkFub255bW91cyI7CiAgICAgICAgdmFyIG4gPSB5WyJkZWZhdWx0Il0uc3RvcmUuZ2V0KCJ2bHgiKTsKCiAgICAgICAgaWYgKG4pIHsKICAgICAgICAgIGlmIChEYXRlLm5vdygpIC8gMWUzIC0gbiAvIDFlMyA8IDIwKSByZXR1cm4gdm9pZCBlLiRlbC5maW5kKCIuc3RhdHVzLWJhciIpLnRleHQoZS5pMThuLnQoImJ1c3kiKSkuZW1wdHkoM2UzKTsKICAgICAgICB9CgogICAgICAgIFUoKTsKICAgICAgfSwKICAgICAgICAgIEYgPSBmdW5jdGlvbiBGKCkgewogICAgICAgIHZhciBlID0gbmV3IEFWLkFDTCgpOwogICAgICAgIHJldHVybiBlLnNldFB1YmxpY1JlYWRBY2Nlc3MoITApLCBlLnNldFB1YmxpY1dyaXRlQWNjZXNzKCExKSwgZTsKICAgICAgfSwKICAgICAgICAgIFUgPSBmdW5jdGlvbiBVKCkgewogICAgICAgIHlbImRlZmF1bHQiXS5zdG9yZS5zZXQoInZseCIsIERhdGUubm93KCkpLCB6LmF0dHIoewogICAgICAgICAgZGlzYWJsZWQ6ICEwCiAgICAgICAgfSksIGUuJGxvYWRpbmcuc2hvdyghMCk7CiAgICAgICAgdmFyIHQgPSBBVi5PYmplY3QuZXh0ZW5kKGUuY29uZmlnLmNsYXp6TmFtZSB8fCAiQ29tbWVudCIpLAogICAgICAgICAgICBuID0gbmV3IHQoKTsKCiAgICAgICAgaWYgKEUudXJsID0gZGVjb2RlVVJJKGUuY29uZmlnLnBhdGgpLCBFLmluc2VydGVkQXQgPSBuZXcgRGF0ZSgpLCBJLnJpZCkgewogICAgICAgICAgdmFyIHIgPSBJLnBpZCB8fCBJLnJpZDsKICAgICAgICAgIG4uc2V0KCJyaWQiLCBJLnJpZCksIG4uc2V0KCJwaWQiLCByKSwgRS5jb21tZW50ID0gai5yZXBsYWNlKCI8cD4iLCAnPHA+PGEgY2xhc3M9ImF0IiBocmVmPSIjJyArIHIgKyAnIj4nICsgSS5hdCArICI8L2E+ICwgIik7CiAgICAgICAgfQoKICAgICAgICBmb3IgKHZhciBvIGluIEUpIHsKICAgICAgICAgIGlmIChFLmhhc093blByb3BlcnR5KG8pKSB7CiAgICAgICAgICAgIHZhciBpID0gRVtvXTsKICAgICAgICAgICAgbi5zZXQobywgaSk7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBuLnNldEFDTChGKCkpLCBuLnNhdmUoKS50aGVuKGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAiQW5vbnltb3VzIiAhPSBFLm5pY2sgJiYgeVsiZGVmYXVsdCJdLnN0b3JlLnNldChoLk1ldGFDYWNoZUtleSwgewogICAgICAgICAgICBuaWNrOiBFLm5pY2ssCiAgICAgICAgICAgIGxpbms6IEUubGluaywKICAgICAgICAgICAgbWFpbDogRS5tYWlsCiAgICAgICAgICB9KTsKICAgICAgICAgIHZhciBuID0gZS4kZWwuZmluZCgiLnZudW0iKTsKCiAgICAgICAgICB0cnkgewogICAgICAgICAgICBJLnJpZCA/IEModCwgKDAsIHlbImRlZmF1bHQiXSkoJy52cXVvdGVbZGF0YS1zZWxmLWlkPSInICsgSS5yaWQgKyAnIl0nKSwgITApIDogKE51bWJlcihuLnRleHQoKSkgPyBuLnRleHQoTnVtYmVyKG4udGV4dCgpKSArIDEpIDogZS4kZWwuZmluZCgiLnZjb3VudCIpLnNob3coKS5maW5kKCIudm51bSIpLnRleHQoTnVtYmVyKG4udGV4dCgpKSArIDEpLCBDKHQsIGUuJGVsLmZpbmQoIi52Y2FyZHMiKSksIGsuc2tpcCsrKSwgei5yZW1vdmVBdHRyKCJkaXNhYmxlZCIpLCBlLiRsb2FkaW5nLmhpZGUoKSwgZS5yZXNldCgpOwogICAgICAgICAgfSBjYXRjaCAodCkgewogICAgICAgICAgICAoMCwgJFsiZGVmYXVsdCJdKShlLCB0LCAic2F2ZSIpOwogICAgICAgICAgfQogICAgICAgIH0pWyJjYXRjaCJdKGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAoMCwgJFsiZGVmYXVsdCJdKShlLCB0LCAiY29tbWl0RXZ0Iik7CiAgICAgICAgfSk7CiAgICAgIH07CgogICAgICB6Lm9uKCJjbGljayIsIEwpLCAoMCwgeVsiZGVmYXVsdCJdKShkb2N1bWVudCkub24oImtleWRvd24iLCBmdW5jdGlvbiAoZSkgewogICAgICAgIGUgPSBldmVudCB8fCBlOwogICAgICAgIHZhciB0ID0gZS5rZXlDb2RlIHx8IGUud2hpY2ggfHwgZS5jaGFyQ29kZTsKICAgICAgICAoKGUuY3RybEtleSB8fCBlLm1ldGFLZXkpICYmIDEzID09PSB0ICYmIEwoKSwgOSA9PT0gdCkgJiYgInZlZGl0b3IiID09IChkb2N1bWVudC5hY3RpdmVFbGVtZW50LmlkIHx8ICIiKSAmJiAoZS5wcmV2ZW50RGVmYXVsdCgpLCB4KGlbMF0sICIgICAgIikpOwogICAgICB9KS5vbigicGFzdGUiLCBmdW5jdGlvbiAoZSkgewogICAgICAgIHZhciB0ID0gImNsaXBib2FyZERhdGEiIGluIGUgPyBlLmNsaXBib2FyZERhdGEgOiBlLm9yaWdpbmFsRXZlbnQgJiYgZS5vcmlnaW5hbEV2ZW50LmNsaXBib2FyZERhdGEgfHwgd2luZG93LmNsaXBib2FyZERhdGE7CiAgICAgICAgdCAmJiBCKHQuaXRlbXMsICEwKTsKICAgICAgfSksIGkub24oImRyYWdlbnRlciBkcmFnbGVhdmUgZHJhZ292ZXIgZHJvcCIsIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKSwgZS5wcmV2ZW50RGVmYXVsdCgpLCAiZHJvcCIgPT09IGUudHlwZSAmJiBCKGUuZGF0YVRyYW5zZmVyLml0ZW1zKTsKICAgICAgfSk7CgogICAgICB2YXIgQiA9IGZ1bmN0aW9uIEIoZSwgdCkgewogICAgICAgIGZvciAodmFyIG4gPSBbXSwgciA9IDAsIG8gPSBlLmxlbmd0aDsgciA8IG87IHIrKykgewogICAgICAgICAgdmFyIGEgPSBlW3JdOwogICAgICAgICAgaWYgKCJzdHJpbmciID09PSBhLmtpbmQgJiYgYS50eXBlLm1hdGNoKCJedGV4dC9odG1sIikpICF0ICYmIGEuZ2V0QXNTdHJpbmcoZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgZSAmJiB4KGlbMF0sIGUucmVwbGFjZSgvPFtePl0rPi9nLCAiIikpOwogICAgICAgICAgfSk7ZWxzZSBpZiAoLTEgIT09IGEudHlwZS5pbmRleE9mKCJpbWFnZSIpKSB7CiAgICAgICAgICAgIG4ucHVzaChhLmdldEFzRmlsZSgpKTsKICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBOKG4pOwogICAgICB9LAogICAgICAgICAgTiA9IGZ1bmN0aW9uIHQobiwgcikgewogICAgICAgIHIgPSByIHx8IDA7CiAgICAgICAgdmFyIG8gPSBuLmxlbmd0aDsKCiAgICAgICAgaWYgKG8gPiAwKSB7CiAgICAgICAgICB2YXIgYSA9IG5bcl07CiAgICAgICAgICB6LmF0dHIoewogICAgICAgICAgICBkaXNhYmxlZDogITAKICAgICAgICAgIH0pOwogICAgICAgICAgdmFyIHMgPSAiIVtVcGxvYWRpbmcgIiArIGEubmFtZSArICIuLi5dKCkiOwogICAgICAgICAgeChpWzBdLCBzKSwgUShhLCBmdW5jdGlvbiAobCkgewogICAgICAgICAgICA1MDAgIT0gbC5jb2RlID8gKGkudmFsKGkudmFsKCkucmVwbGFjZShzLCAiIVsiICsgYS5uYW1lICsgIl0oIiArIGwuZGF0YS51cmwgKyAiKVxyXG4iKSksICgwLCBjWyJkZWZhdWx0Il0pKGlbMF0pLCArK3IgPCBvID8gdChuLCByKSA6IHoucmVtb3ZlQXR0cigiZGlzYWJsZWQiKSkgOiAoaS52YWwoaS52YWwoKS5yZXBsYWNlKHMsICIiKSksICgwLCBjWyJkZWZhdWx0Il0pKGlbMF0pLCBlLiRlbC5maW5kKCIuc3RhdHVzLWJhciIpLnRleHQobC5tc2cpLmVtcHR5KDNlMyksIHoucmVtb3ZlQXR0cigiZGlzYWJsZWQiKSk7CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgICAgICBRID0gZnVuY3Rpb24gUShlLCB0KSB7CiAgICAgICAgdmFyIG4gPSBuZXcgRm9ybURhdGEoKTsKICAgICAgICBuLmFwcGVuZCgiaW1hZ2UiLCBlKSwgeVsiZGVmYXVsdCJdLmFqYXgoewogICAgICAgICAgdHlwZTogInBvc3QiLAogICAgICAgICAgdXJsOiAiaHR0cHM6Ly9waWMuYWxleGhjaHUuY29tL2FwaS91cGxvYWQiLAogICAgICAgICAgZGF0YTogbiwKICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIHN1Y2Nlc3MoZSkgewogICAgICAgICAgICB0ICYmIHQoZSk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH07CiAgICB9LCBlLmV4cG9ydHMgPSBpLCBlLmV4cG9ydHNbImRlZmF1bHQiXSA9IGk7CiAgfSwgZnVuY3Rpb24gKGUsIHQsIG4pIHsKICAgICJ1c2Ugc3RyaWN0IjsKCiAgICB0Ll9fZXNNb2R1bGUgPSAhMDsKCiAgICB2YXIgciA9IG4oMCksCiAgICAgICAgbyA9IGZ1bmN0aW9uIChlKSB7CiAgICAgIHJldHVybiBlICYmIGUuX19lc01vZHVsZSA/IGUgOiB7CiAgICAgICAgImRlZmF1bHQiOiBlCiAgICAgIH07CiAgICB9KHIpLAogICAgICAgIGkgPSAhMTsKCiAgICB0WyJkZWZhdWx0Il0gPSBmdW5jdGlvbiAoZSwgdCkgewogICAgICBpZiAoIkFWIiBpbiB3aW5kb3cpIHsKICAgICAgICB2YXIgbiA9IHdpbmRvdy5BVi52ZXJzaW9uIHx8IHdpbmRvdy5BVi5WRVJTSU9OOwogICAgICAgIHBhcnNlSW50KG4uc3BsaXQoIi4iKVswXSkgPiAyID8gaSA9ICEhQVYuYXBwbGljYXRpb25JZCAmJiAhIUFWLmFwcGxpY2F0aW9uS2V5IDogb1siZGVmYXVsdCJdLmRlbGV0ZUluV2luKCJBViIsIDApOwogICAgICB9CgogICAgICBpID8gdCAmJiB0KCkgOiBvWyJkZWZhdWx0Il0uc2RrTG9hZGVyKCIvL2Nkbi5qc2RlbGl2ci5uZXQvbnBtL2xlYW5jbG91ZC1zdG9yYWdlQDMvZGlzdC9hdi1taW4uanMiLCAiQVYiLCBmdW5jdGlvbiAobikgewogICAgICAgIHZhciByID0gImh0dHBzOi8vIiwKICAgICAgICAgICAgbyA9ICIiLAogICAgICAgICAgICBhID0gZS5hcHBfaWQgfHwgZS5hcHBJZCwKICAgICAgICAgICAgcyA9IGUuYXBwX2tleSB8fCBlLmFwcEtleTsKICAgICAgICBpZiAoIWUuc2VydmVyVVJMcykgc3dpdGNoIChhLnNsaWNlKC05KSkgewogICAgICAgICAgY2FzZSAiLTlOaDlqMFZhIjoKICAgICAgICAgICAgciArPSAidGFiLiI7CiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgIGNhc2UgIi1NZFlYYk1NSSI6CiAgICAgICAgICAgIHIgKz0gInVzLiI7CiAgICAgICAgfQogICAgICAgIG8gPSBlLnNlcnZlclVSTHMgfHwgciArICJhdm9zY2xvdWQuY29tIiwgQVYuaW5pdCh7CiAgICAgICAgICBhcHBJZDogYSwKICAgICAgICAgIGFwcEtleTogcywKICAgICAgICAgIHNlcnZlclVSTHM6IG8KICAgICAgICB9KSwgaSA9ICEwLCB0ICYmIHQoKTsKICAgICAgfSk7CiAgICB9OwogIH0sIGZ1bmN0aW9uIChlLCB0LCBuKSB7CiAgICAidXNlIHN0cmljdCI7CgogICAgZnVuY3Rpb24gcihlKSB7CiAgICAgIHJldHVybiBlICYmIGUuX19lc01vZHVsZSA/IGUgOiB7CiAgICAgICAgImRlZmF1bHQiOiBlCiAgICAgIH07CiAgICB9CgogICAgdC5fX2VzTW9kdWxlID0gITA7CiAgICB2YXIgbyA9IG4oMzcpLAogICAgICAgIGkgPSByKG8pLAogICAgICAgIGEgPSBuKDU2KSwKICAgICAgICBzID0gcihhKSwKICAgICAgICBsID0gbig1NyksCiAgICAgICAgYyA9IHIobCksCiAgICAgICAgdSA9IG4oNTQpLAogICAgICAgIGQgPSByKHUpLAogICAgICAgIHAgPSBuKDU1KSwKICAgICAgICBmID0gcihwKSwKICAgICAgICBoID0gewogICAgICB6aDogc1siZGVmYXVsdCJdLAogICAgICAiemgtY24iOiBzWyJkZWZhdWx0Il0sCiAgICAgICJ6aC1DTiI6IHNbImRlZmF1bHQiXSwKICAgICAgInpoLVRXIjogY1siZGVmYXVsdCJdLAogICAgICBlbjogZFsiZGVmYXVsdCJdLAogICAgICAiZW4tVVMiOiBkWyJkZWZhdWx0Il0sCiAgICAgIGphOiBmWyJkZWZhdWx0Il0sCiAgICAgICJqYS1KUCI6IGZbImRlZmF1bHQiXQogICAgfTsKCiAgICB0WyJkZWZhdWx0Il0gPSBmdW5jdGlvbiAoZSwgdCkgewogICAgICByZXR1cm4gIWhbZV0gJiYgZSAmJiB0ICYmIChoW2VdID0gdCksIG5ldyBpWyJkZWZhdWx0Il0oewogICAgICAgIHBocmFzZXM6IGhbZSB8fCAiemgiXSwKICAgICAgICBsb2NhbGU6IGUKICAgICAgfSk7CiAgICB9OwogIH0sIGZ1bmN0aW9uIChlLCB0LCBuKSB7CiAgICAidXNlIHN0cmljdCI7CgogICAgdC5fX2VzTW9kdWxlID0gITAsIHRbImRlZmF1bHQiXSA9IGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgIGlmIChlLiRlbCAmJiBlLiRsb2FkaW5nLmhpZGUoKS4kbm9kYXRhLmhpZGUoKSwgIltvYmplY3QgRXJyb3JdIiA9PT0ge30udG9TdHJpbmcuY2FsbCh0KSkgewogICAgICAgIHZhciBuID0gdC5jb2RlIHx8IHQubWVzc2FnZSB8fCB0LmVycm9yIHx8ICIiOwogICAgICAgIGlmIChpc05hTihuKSkgZS4kZWwgJiYgZS4kbm9kYXRhLnNob3coJzxwcmUgc3R5bGU9InRleHQtYWxpZ246bGVmdDsiPiAnICsgSlNPTi5zdHJpbmdpZnkodCkgKyAiPC9wcmU+Iik7ZWxzZSB7CiAgICAgICAgICB2YXIgciA9IGUuaTE4bi50KCJjb2RlLSIgKyBuKSwKICAgICAgICAgICAgICBvID0gKHIgPT0gImNvZGUtIiArIG4gPyB2b2lkIDAgOiByKSB8fCB0Lm1lc3NhZ2UgfHwgdC5lcnJvciB8fCAiIjsKICAgICAgICAgIDEwMSA9PSBuIHx8IC0xID09IG4gPyBlLiRub2RhdGEuc2hvdygpIDogZS4kZWwgJiYgZS4kbm9kYXRhLnNob3coJzxwcmUgc3R5bGU9InRleHQtYWxpZ246bGVmdDsiPkNvZGUgJyArIG4gKyAiOiAiICsgbyArICI8L3ByZT4iKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSBlLiRlbCAmJiBlLiRub2RhdGEuc2hvdygnPHByZSBzdHlsZT0idGV4dC1hbGlnbjpsZWZ0OyI+JyArIEpTT04uc3RyaW5naWZ5KHQpICsgIjwvcHJlPiIpOwogICAgfTsKICB9LCBmdW5jdGlvbiAoZSwgdCwgbikgewogICAgInVzZSBzdHJpY3QiOwoKICAgIGZ1bmN0aW9uIHIoZSkgewogICAgICByZXR1cm4gZSAmJiBlLl9fZXNNb2R1bGUgPyBlIDogewogICAgICAgICJkZWZhdWx0IjogZQogICAgICB9OwogICAgfQoKICAgIHQuX19lc01vZHVsZSA9ICEwOwogICAgdmFyIG8gPSBuKDM2KSwKICAgICAgICBpID0gcihvKSwKICAgICAgICBhID0gbigwKSwKICAgICAgICBzID0gcihhKSwKICAgICAgICBsID0gbig2KSwKICAgICAgICBjID0gcihsKSwKICAgICAgICB1ID0gbigzMyksCiAgICAgICAgZCA9IG5ldyBvLlJlbmRlcmVyKCk7CiAgICBkLmNvZGUgPSBmdW5jdGlvbiAoZSwgdCkgewogICAgICByZXR1cm4gJzxwcmU+PGNvZGUgY2xhc3M9ImhsanMgbGFuZ3VhZ2UtJyArIHQgKyAnIj4nICsgKCF0IHx8ICFobGpzLmdldExhbmd1YWdlKHQpID8gc1siZGVmYXVsdCJdLmVzY2FwZShlKSA6IGhsanMuaGlnaGxpZ2h0KHQsIGUpLnZhbHVlKSArICI8L2NvZGU+PC9wcmU+IjsKICAgIH0sIGlbImRlZmF1bHQiXS5zZXRPcHRpb25zKHsKICAgICAgcmVuZGVyZXI6ICJobGpzIiBpbiB3aW5kb3cgPyBkIDogbmV3IG8uUmVuZGVyZXIoKSwKICAgICAgaGlnaGxpZ2h0OiBmdW5jdGlvbiBoaWdobGlnaHQoZSwgdCkgewogICAgICAgIHJldHVybiAiaGxqcyIgaW4gd2luZG93ID8gdCAmJiBobGpzLmdldExhbmd1YWdlKHQpICYmIGhsanMuaGlnaGxpZ2h0KHQsIGUsICEwKS52YWx1ZSB8fCBobGpzLmhpZ2hsaWdodEF1dG8oZSkudmFsdWUgOiB1KGUpOwogICAgICB9LAogICAgICBnZm06ICEwLAogICAgICB0YWJsZXM6ICEwLAogICAgICBicmVha3M6ICEwLAogICAgICBwZWRhbnRpYzogITEsCiAgICAgIHNhbml0aXplOiAhMCwKICAgICAgc21hcnRMaXN0czogITAsCiAgICAgIHNtYXJ0eXBhbnRzOiAhMCwKICAgICAgaGVhZGVyUHJlZmk6ICJ2LSIKICAgIH0pLCB0WyJkZWZhdWx0Il0gPSBmdW5jdGlvbiAoZSkgewogICAgICByZXR1cm4gY1siZGVmYXVsdCJdLnBhcnNlKCgwLCBpWyJkZWZhdWx0Il0pKGUpKTsKICAgIH07CiAgfSwgZnVuY3Rpb24gKGUsIHQsIG4pIHsKICAgICJ1c2Ugc3RyaWN0IjsKCiAgICB0Ll9fZXNNb2R1bGUgPSAhMCwgdC5yZWNvcmRJUEZuID0gdC5mZXRjaFFRRm4gPSB2b2lkIDA7CgogICAgdmFyIHIgPSBuKDApLAogICAgICAgIG8gPSBmdW5jdGlvbiAoZSkgewogICAgICByZXR1cm4gZSAmJiBlLl9fZXNNb2R1bGUgPyBlIDogewogICAgICAgICJkZWZhdWx0IjogZQogICAgICB9OwogICAgfShyKSwKICAgICAgICBpID0gbigyKSwKICAgICAgICBhID0gZnVuY3Rpb24gYShlLCB0KSB7CiAgICAgIHZhciBuID0gb1siZGVmYXVsdCJdLnN0b3JlLmdldChpLlFRQ2FjaGVLZXkpOwogICAgICBuICYmIG4ucXEgPT0gZSA/IHQgJiYgdChuKSA6IG9bImRlZmF1bHQiXS5hamF4KHsKICAgICAgICB0eXBlOiAiUE9TVCIsCiAgICAgICAgdXJsOiAiLy92YWxpbmUuYXBpLmlvbGl1LmNuL2dldHFxaW5mbyIsCiAgICAgICAgZGF0YTogewogICAgICAgICAgcXE6IGUKICAgICAgICB9LAogICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIHN1Y2Nlc3MoZSkgewogICAgICAgICAgZS5lcnJtc2cgfHwgKG9bImRlZmF1bHQiXS5zdG9yZS5zZXQoaS5RUUNhY2hlS2V5LCBlKSwgdCAmJiB0KGUpKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgICAgICBzID0gZnVuY3Rpb24gcyhlKSB7CiAgICAgIG9bImRlZmF1bHQiXS5zZGtMb2FkZXIoIi8vYXBpLmlwLnNiL2pzb25pcD9jYWxsYmFjaz1nZXRJUCIsICJnZXRJUCIpLCB3aW5kb3cuZ2V0SVAgPSBmdW5jdGlvbiAodCkgewogICAgICAgIGUgJiYgZSh0LmlwKSwgb1siZGVmYXVsdCJdLmRlbGV0ZUluV2luKCJnZXRJUCIpOwogICAgICB9OwogICAgfTsKCiAgICB0LmZldGNoUVFGbiA9IGEsIHQucmVjb3JkSVBGbiA9IHM7CiAgfSwgZnVuY3Rpb24gKGUsIHQsIG4pIHsKICAgICJ1c2Ugc3RyaWN0IjsKCiAgICB2YXIgciA9IGZ1bmN0aW9uIHIoZSwgdCkgewogICAgICBpZiAoIWUpIHJldHVybiAiIjsKCiAgICAgIHRyeSB7CiAgICAgICAgdmFyIG4gPSBpKGUpLmdldFRpbWUoKSwKICAgICAgICAgICAgciA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpLAogICAgICAgICAgICBhID0gciAtIG4sCiAgICAgICAgICAgIHMgPSBNYXRoLmZsb29yKGEgLyA4NjRlNSk7CgogICAgICAgIGlmICgwID09PSBzKSB7CiAgICAgICAgICB2YXIgbCA9IGEgJSA4NjRlNSwKICAgICAgICAgICAgICBjID0gTWF0aC5mbG9vcihsIC8gMzZlNSk7CgogICAgICAgICAgaWYgKDAgPT09IGMpIHsKICAgICAgICAgICAgdmFyIHUgPSBsICUgMzZlNSwKICAgICAgICAgICAgICAgIGQgPSBNYXRoLmZsb29yKHUgLyA2ZTQpOwoKICAgICAgICAgICAgaWYgKDAgPT09IGQpIHsKICAgICAgICAgICAgICB2YXIgcCA9IHUgJSA2ZTQ7CiAgICAgICAgICAgICAgcmV0dXJuIE1hdGgucm91bmQocCAvIDFlMykgKyAiICIgKyB0LnQoInNlY29uZHMiKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuIGQgKyAiICIgKyB0LnQoIm1pbnV0ZXMiKTsKICAgICAgICAgIH0KCiAgICAgICAgICByZXR1cm4gYyArICIgIiArIHQudCgiaG91cnMiKTsKICAgICAgICB9CgogICAgICAgIHJldHVybiBzIDwgMCA/IHQudCgibm93IikgOiBzIDwgOCA/IHMgKyAiICIgKyB0LnQoImRheXMiKSA6IG8oZSk7CiAgICAgIH0gY2F0Y2ggKGUpIHt9CiAgICB9LAogICAgICAgIG8gPSBmdW5jdGlvbiBvKGUpIHsKICAgICAgdmFyIHQgPSBhKGUuZ2V0RGF0ZSgpLCAyKSwKICAgICAgICAgIG4gPSBhKGUuZ2V0TW9udGgoKSArIDEsIDIpOwogICAgICByZXR1cm4gYShlLmdldEZ1bGxZZWFyKCksIDIpICsgIi0iICsgbiArICItIiArIHQ7CiAgICB9LAogICAgICAgIGkgPSBmdW5jdGlvbiBlKHQpIHsKICAgICAgcmV0dXJuIHQgaW5zdGFuY2VvZiBEYXRlID8gdCA6ICFpc05hTih0KSB8fCAvXlxkKyQvLnRlc3QodCkgPyBuZXcgRGF0ZShwYXJzZUludCh0KSkgOiAvR01ULy50ZXN0KHQgfHwgIiIpID8gZShuZXcgRGF0ZSh0KS5nZXRUaW1lKCkpIDogKHQgPSAodCB8fCAiIikucmVwbGFjZSgvKF5ccyopfChccyokKS9nLCAiIikucmVwbGFjZSgvXC5cZCsvLCAiIikucmVwbGFjZSgvLS8sICIvIikucmVwbGFjZSgvLS8sICIvIikucmVwbGFjZSgvKFxkKVQoXGQpLywgIiQxICQyIikucmVwbGFjZSgvWi8sICIgVVRDIikucmVwbGFjZSgvKFsrLV1cZFxkKTo/KFxkXGQpLywgIiAkMSQyIiksIG5ldyBEYXRlKHQpKTsKICAgIH0sCiAgICAgICAgYSA9IGZ1bmN0aW9uIGEoZSwgdCkgewogICAgICBmb3IgKHZhciBuID0gZS50b1N0cmluZygpOyBuLmxlbmd0aCA8IHQ7KSB7CiAgICAgICAgbiA9ICIwIiArIG47CiAgICAgIH0KCiAgICAgIHJldHVybiBuOwogICAgfTsKCiAgICBlLmV4cG9ydHMgPSByOwogIH0sIGZ1bmN0aW9uIChlLCB0LCBuKSB7CiAgICAidXNlIHN0cmljdCI7CgogICAgdC5fX2VzTW9kdWxlID0gITA7CgogICAgdmFyIHIgPSBuKDUxKSwKICAgICAgICBvID0gZnVuY3Rpb24gKGUpIHsKICAgICAgcmV0dXJuIGUgJiYgZS5fX2VzTW9kdWxlID8gZSA6IHsKICAgICAgICAiZGVmYXVsdCI6IGUKICAgICAgfTsKICAgIH0ocik7CgogICAgdFsiZGVmYXVsdCJdID0gZnVuY3Rpb24gKGUpIHsKICAgICAgcmV0dXJuICgwLCBvWyJkZWZhdWx0Il0pKGUsIHsKICAgICAgICBvblRhZ0F0dHI6IGZ1bmN0aW9uIG9uVGFnQXR0cihlLCB0LCBuLCByKSB7CiAgICAgICAgICByZXR1cm4gaShlLCB0LCBuLCByKTsKICAgICAgICB9LAogICAgICAgIG9uSWdub3JlVGFnQXR0cjogZnVuY3Rpb24gb25JZ25vcmVUYWdBdHRyKGUsIHQsIG4sIHIpIHsKICAgICAgICAgIHJldHVybiBpKGUsIHQsIG4sIHIpOwogICAgICAgIH0KICAgICAgfSkucmVwbGFjZSgvXDxcLz9kaXZcPi9naSwgIiIpOwogICAgfTsKCiAgICB2YXIgaSA9IGZ1bmN0aW9uIGkoZSwgdCwgbiwgcikgewogICAgICBpZiAoL2NvZGV8cHJlfHNwYW4vZ2kudGVzdChlKSkgewogICAgICAgIGlmICgic3R5bGUiID09IHQpIHJldHVybiB0ICsgJz0iJyArICgvXmNvbG9yL2dpLnRlc3QobikgPyBuIDogIiIpLnJlcGxhY2UoLyhjb2xvcjpbIzAtOWEtZkEtRl17MSw2fTs/KS4rL2dpLCAiJDEiKSArICciJzsKICAgICAgICBpZiAoImNsYXNzIiA9PSB0KSByZXR1cm4gdCArICI9JyIgKyBvWyJkZWZhdWx0Il0uZXNjYXBlQXR0clZhbHVlKG4pICsgIiciOwogICAgICB9CgogICAgICBpZiAoImltZyIgPT09IGUgJiYgWyJzcmMiLCAiY2xhc3MiXS5pbmRleE9mKHQpID4gLTEpIHJldHVybiB0ICsgJz0iJyArIG9bImRlZmF1bHQiXS5lc2NhcGVBdHRyVmFsdWUobikgKyAnIiByZWZlcnJlclBvbGljeT0ibm8tcmVmZXJyZXIiICc7CiAgICB9OwogIH0sIGZ1bmN0aW9uIChlLCB0LCBuKSB7CiAgICB2YXIgcjsKICAgICFmdW5jdGlvbiAobykgewogICAgICAidXNlIHN0cmljdCI7CgogICAgICBmdW5jdGlvbiBpKGUsIHQpIHsKICAgICAgICB2YXIgbiA9ICg2NTUzNSAmIGUpICsgKDY1NTM1ICYgdCk7CiAgICAgICAgcmV0dXJuIChlID4+IDE2KSArICh0ID4+IDE2KSArIChuID4+IDE2KSA8PCAxNiB8IDY1NTM1ICYgbjsKICAgICAgfQoKICAgICAgZnVuY3Rpb24gYShlLCB0KSB7CiAgICAgICAgcmV0dXJuIGUgPDwgdCB8IGUgPj4+IDMyIC0gdDsKICAgICAgfQoKICAgICAgZnVuY3Rpb24gcyhlLCB0LCBuLCByLCBvLCBzKSB7CiAgICAgICAgcmV0dXJuIGkoYShpKGkodCwgZSksIGkociwgcykpLCBvKSwgbik7CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIGwoZSwgdCwgbiwgciwgbywgaSwgYSkgewogICAgICAgIHJldHVybiBzKHQgJiBuIHwgfnQgJiByLCBlLCB0LCBvLCBpLCBhKTsKICAgICAgfQoKICAgICAgZnVuY3Rpb24gYyhlLCB0LCBuLCByLCBvLCBpLCBhKSB7CiAgICAgICAgcmV0dXJuIHModCAmIHIgfCBuICYgfnIsIGUsIHQsIG8sIGksIGEpOwogICAgICB9CgogICAgICBmdW5jdGlvbiB1KGUsIHQsIG4sIHIsIG8sIGksIGEpIHsKICAgICAgICByZXR1cm4gcyh0IF4gbiBeIHIsIGUsIHQsIG8sIGksIGEpOwogICAgICB9CgogICAgICBmdW5jdGlvbiBkKGUsIHQsIG4sIHIsIG8sIGksIGEpIHsKICAgICAgICByZXR1cm4gcyhuIF4gKHQgfCB+ciksIGUsIHQsIG8sIGksIGEpOwogICAgICB9CgogICAgICBmdW5jdGlvbiBwKGUsIHQpIHsKICAgICAgICBlW3QgPj4gNV0gfD0gMTI4IDw8IHQgJSAzMiwgZVsxNCArICh0ICsgNjQgPj4+IDkgPDwgNCldID0gdDsKICAgICAgICB2YXIgbiwKICAgICAgICAgICAgciwKICAgICAgICAgICAgbywKICAgICAgICAgICAgYSwKICAgICAgICAgICAgcywKICAgICAgICAgICAgcCA9IDE3MzI1ODQxOTMsCiAgICAgICAgICAgIGYgPSAtMjcxNzMzODc5LAogICAgICAgICAgICBoID0gLTE3MzI1ODQxOTQsCiAgICAgICAgICAgIHYgPSAyNzE3MzM4Nzg7CgogICAgICAgIGZvciAobiA9IDA7IG4gPCBlLmxlbmd0aDsgbiArPSAxNikgewogICAgICAgICAgciA9IHAsIG8gPSBmLCBhID0gaCwgcyA9IHYsIHAgPSBsKHAsIGYsIGgsIHYsIGVbbl0sIDcsIC02ODA4NzY5MzYpLCB2ID0gbCh2LCBwLCBmLCBoLCBlW24gKyAxXSwgMTIsIC0zODk1NjQ1ODYpLCBoID0gbChoLCB2LCBwLCBmLCBlW24gKyAyXSwgMTcsIDYwNjEwNTgxOSksIGYgPSBsKGYsIGgsIHYsIHAsIGVbbiArIDNdLCAyMiwgLTEwNDQ1MjUzMzApLCBwID0gbChwLCBmLCBoLCB2LCBlW24gKyA0XSwgNywgLTE3NjQxODg5NyksIHYgPSBsKHYsIHAsIGYsIGgsIGVbbiArIDVdLCAxMiwgMTIwMDA4MDQyNiksIGggPSBsKGgsIHYsIHAsIGYsIGVbbiArIDZdLCAxNywgLTE0NzMyMzEzNDEpLCBmID0gbChmLCBoLCB2LCBwLCBlW24gKyA3XSwgMjIsIC00NTcwNTk4MyksIHAgPSBsKHAsIGYsIGgsIHYsIGVbbiArIDhdLCA3LCAxNzcwMDM1NDE2KSwgdiA9IGwodiwgcCwgZiwgaCwgZVtuICsgOV0sIDEyLCAtMTk1ODQxNDQxNyksIGggPSBsKGgsIHYsIHAsIGYsIGVbbiArIDEwXSwgMTcsIC00MjA2MyksIGYgPSBsKGYsIGgsIHYsIHAsIGVbbiArIDExXSwgMjIsIC0xOTkwNDA0MTYyKSwgcCA9IGwocCwgZiwgaCwgdiwgZVtuICsgMTJdLCA3LCAxODA0NjAzNjgyKSwgdiA9IGwodiwgcCwgZiwgaCwgZVtuICsgMTNdLCAxMiwgLTQwMzQxMTAxKSwgaCA9IGwoaCwgdiwgcCwgZiwgZVtuICsgMTRdLCAxNywgLTE1MDIwMDIyOTApLCBmID0gbChmLCBoLCB2LCBwLCBlW24gKyAxNV0sIDIyLCAxMjM2NTM1MzI5KSwgcCA9IGMocCwgZiwgaCwgdiwgZVtuICsgMV0sIDUsIC0xNjU3OTY1MTApLCB2ID0gYyh2LCBwLCBmLCBoLCBlW24gKyA2XSwgOSwgLTEwNjk1MDE2MzIpLCBoID0gYyhoLCB2LCBwLCBmLCBlW24gKyAxMV0sIDE0LCA2NDM3MTc3MTMpLCBmID0gYyhmLCBoLCB2LCBwLCBlW25dLCAyMCwgLTM3Mzg5NzMwMiksIHAgPSBjKHAsIGYsIGgsIHYsIGVbbiArIDVdLCA1LCAtNzAxNTU4NjkxKSwgdiA9IGModiwgcCwgZiwgaCwgZVtuICsgMTBdLCA5LCAzODAxNjA4MyksIGggPSBjKGgsIHYsIHAsIGYsIGVbbiArIDE1XSwgMTQsIC02NjA0NzgzMzUpLCBmID0gYyhmLCBoLCB2LCBwLCBlW24gKyA0XSwgMjAsIC00MDU1Mzc4NDgpLCBwID0gYyhwLCBmLCBoLCB2LCBlW24gKyA5XSwgNSwgNTY4NDQ2NDM4KSwgdiA9IGModiwgcCwgZiwgaCwgZVtuICsgMTRdLCA5LCAtMTAxOTgwMzY5MCksIGggPSBjKGgsIHYsIHAsIGYsIGVbbiArIDNdLCAxNCwgLTE4NzM2Mzk2MSksIGYgPSBjKGYsIGgsIHYsIHAsIGVbbiArIDhdLCAyMCwgMTE2MzUzMTUwMSksIHAgPSBjKHAsIGYsIGgsIHYsIGVbbiArIDEzXSwgNSwgLTE0NDQ2ODE0NjcpLCB2ID0gYyh2LCBwLCBmLCBoLCBlW24gKyAyXSwgOSwgLTUxNDAzNzg0KSwgaCA9IGMoaCwgdiwgcCwgZiwgZVtuICsgN10sIDE0LCAxNzM1MzI4NDczKSwgZiA9IGMoZiwgaCwgdiwgcCwgZVtuICsgMTJdLCAyMCwgLTE5MjY2MDc3MzQpLCBwID0gdShwLCBmLCBoLCB2LCBlW24gKyA1XSwgNCwgLTM3ODU1OCksIHYgPSB1KHYsIHAsIGYsIGgsIGVbbiArIDhdLCAxMSwgLTIwMjI1NzQ0NjMpLCBoID0gdShoLCB2LCBwLCBmLCBlW24gKyAxMV0sIDE2LCAxODM5MDMwNTYyKSwgZiA9IHUoZiwgaCwgdiwgcCwgZVtuICsgMTRdLCAyMywgLTM1MzA5NTU2KSwgcCA9IHUocCwgZiwgaCwgdiwgZVtuICsgMV0sIDQsIC0xNTMwOTkyMDYwKSwgdiA9IHUodiwgcCwgZiwgaCwgZVtuICsgNF0sIDExLCAxMjcyODkzMzUzKSwgaCA9IHUoaCwgdiwgcCwgZiwgZVtuICsgN10sIDE2LCAtMTU1NDk3NjMyKSwgZiA9IHUoZiwgaCwgdiwgcCwgZVtuICsgMTBdLCAyMywgLTEwOTQ3MzA2NDApLCBwID0gdShwLCBmLCBoLCB2LCBlW24gKyAxM10sIDQsIDY4MTI3OTE3NCksIHYgPSB1KHYsIHAsIGYsIGgsIGVbbl0sIDExLCAtMzU4NTM3MjIyKSwgaCA9IHUoaCwgdiwgcCwgZiwgZVtuICsgM10sIDE2LCAtNzIyNTIxOTc5KSwgZiA9IHUoZiwgaCwgdiwgcCwgZVtuICsgNl0sIDIzLCA3NjAyOTE4OSksIHAgPSB1KHAsIGYsIGgsIHYsIGVbbiArIDldLCA0LCAtNjQwMzY0NDg3KSwgdiA9IHUodiwgcCwgZiwgaCwgZVtuICsgMTJdLCAxMSwgLTQyMTgxNTgzNSksIGggPSB1KGgsIHYsIHAsIGYsIGVbbiArIDE1XSwgMTYsIDUzMDc0MjUyMCksIGYgPSB1KGYsIGgsIHYsIHAsIGVbbiArIDJdLCAyMywgLTk5NTMzODY1MSksIHAgPSBkKHAsIGYsIGgsIHYsIGVbbl0sIDYsIC0xOTg2MzA4NDQpLCB2ID0gZCh2LCBwLCBmLCBoLCBlW24gKyA3XSwgMTAsIDExMjY4OTE0MTUpLCBoID0gZChoLCB2LCBwLCBmLCBlW24gKyAxNF0sIDE1LCAtMTQxNjM1NDkwNSksIGYgPSBkKGYsIGgsIHYsIHAsIGVbbiArIDVdLCAyMSwgLTU3NDM0MDU1KSwgcCA9IGQocCwgZiwgaCwgdiwgZVtuICsgMTJdLCA2LCAxNzAwNDg1NTcxKSwgdiA9IGQodiwgcCwgZiwgaCwgZVtuICsgM10sIDEwLCAtMTg5NDk4NjYwNiksIGggPSBkKGgsIHYsIHAsIGYsIGVbbiArIDEwXSwgMTUsIC0xMDUxNTIzKSwgZiA9IGQoZiwgaCwgdiwgcCwgZVtuICsgMV0sIDIxLCAtMjA1NDkyMjc5OSksIHAgPSBkKHAsIGYsIGgsIHYsIGVbbiArIDhdLCA2LCAxODczMzEzMzU5KSwgdiA9IGQodiwgcCwgZiwgaCwgZVtuICsgMTVdLCAxMCwgLTMwNjExNzQ0KSwgaCA9IGQoaCwgdiwgcCwgZiwgZVtuICsgNl0sIDE1LCAtMTU2MDE5ODM4MCksIGYgPSBkKGYsIGgsIHYsIHAsIGVbbiArIDEzXSwgMjEsIDEzMDkxNTE2NDkpLCBwID0gZChwLCBmLCBoLCB2LCBlW24gKyA0XSwgNiwgLTE0NTUyMzA3MCksIHYgPSBkKHYsIHAsIGYsIGgsIGVbbiArIDExXSwgMTAsIC0xMTIwMjEwMzc5KSwgaCA9IGQoaCwgdiwgcCwgZiwgZVtuICsgMl0sIDE1LCA3MTg3ODcyNTkpLCBmID0gZChmLCBoLCB2LCBwLCBlW24gKyA5XSwgMjEsIC0zNDM0ODU1NTEpLCBwID0gaShwLCByKSwgZiA9IGkoZiwgbyksIGggPSBpKGgsIGEpLCB2ID0gaSh2LCBzKTsKICAgICAgICB9CgogICAgICAgIHJldHVybiBbcCwgZiwgaCwgdl07CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIGYoZSkgewogICAgICAgIHZhciB0LAogICAgICAgICAgICBuID0gIiIsCiAgICAgICAgICAgIHIgPSAzMiAqIGUubGVuZ3RoOwoKICAgICAgICBmb3IgKHQgPSAwOyB0IDwgcjsgdCArPSA4KSB7CiAgICAgICAgICBuICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoZVt0ID4+IDVdID4+PiB0ICUgMzIgJiAyNTUpOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIG47CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIGgoZSkgewogICAgICAgIHZhciB0LAogICAgICAgICAgICBuID0gW107CgogICAgICAgIGZvciAoblsoZS5sZW5ndGggPj4gMikgLSAxXSA9IHZvaWQgMCwgdCA9IDA7IHQgPCBuLmxlbmd0aDsgdCArPSAxKSB7CiAgICAgICAgICBuW3RdID0gMDsKICAgICAgICB9CgogICAgICAgIHZhciByID0gOCAqIGUubGVuZ3RoOwoKICAgICAgICBmb3IgKHQgPSAwOyB0IDwgcjsgdCArPSA4KSB7CiAgICAgICAgICBuW3QgPj4gNV0gfD0gKDI1NSAmIGUuY2hhckNvZGVBdCh0IC8gOCkpIDw8IHQgJSAzMjsKICAgICAgICB9CgogICAgICAgIHJldHVybiBuOwogICAgICB9CgogICAgICBmdW5jdGlvbiB2KGUpIHsKICAgICAgICByZXR1cm4gZihwKGgoZSksIDggKiBlLmxlbmd0aCkpOwogICAgICB9CgogICAgICBmdW5jdGlvbiBnKGUsIHQpIHsKICAgICAgICB2YXIgbiwKICAgICAgICAgICAgciwKICAgICAgICAgICAgbyA9IGgoZSksCiAgICAgICAgICAgIGkgPSBbXSwKICAgICAgICAgICAgYSA9IFtdOwoKICAgICAgICBmb3IgKGlbMTVdID0gYVsxNV0gPSB2b2lkIDAsIG8ubGVuZ3RoID4gMTYgJiYgKG8gPSBwKG8sIDggKiBlLmxlbmd0aCkpLCBuID0gMDsgbiA8IDE2OyBuICs9IDEpIHsKICAgICAgICAgIGlbbl0gPSA5MDk1MjI0ODYgXiBvW25dLCBhW25dID0gMTU0OTU1NjgyOCBeIG9bbl07CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gciA9IHAoaS5jb25jYXQoaCh0KSksIDUxMiArIDggKiB0Lmxlbmd0aCksIGYocChhLmNvbmNhdChyKSwgNjQwKSk7CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIG0oZSkgewogICAgICAgIHZhciB0LAogICAgICAgICAgICBuLAogICAgICAgICAgICByID0gIjAxMjM0NTY3ODlhYmNkZWYiLAogICAgICAgICAgICBvID0gIiI7CgogICAgICAgIGZvciAobiA9IDA7IG4gPCBlLmxlbmd0aDsgbiArPSAxKSB7CiAgICAgICAgICB0ID0gZS5jaGFyQ29kZUF0KG4pLCBvICs9IHIuY2hhckF0KHQgPj4+IDQgJiAxNSkgKyByLmNoYXJBdCgxNSAmIHQpOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIG87CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIHkoZSkgewogICAgICAgIHJldHVybiB1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoZSkpOwogICAgICB9CgogICAgICBmdW5jdGlvbiBiKGUpIHsKICAgICAgICByZXR1cm4gdih5KGUpKTsKICAgICAgfQoKICAgICAgZnVuY3Rpb24gdyhlKSB7CiAgICAgICAgcmV0dXJuIG0oYihlKSk7CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIHgoZSwgdCkgewogICAgICAgIHJldHVybiBnKHkoZSksIHkodCkpOwogICAgICB9CgogICAgICBmdW5jdGlvbiBrKGUsIHQpIHsKICAgICAgICByZXR1cm4gbSh4KGUsIHQpKTsKICAgICAgfQoKICAgICAgZnVuY3Rpb24gXyhlLCB0LCBuKSB7CiAgICAgICAgcmV0dXJuIHQgPyBuID8geCh0LCBlKSA6IGsodCwgZSkgOiBuID8gYihlKSA6IHcoZSk7CiAgICAgIH0KCiAgICAgIHZvaWQgMCAhPT0gKHIgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIF87CiAgICAgIH0uY2FsbCh0LCBuLCB0LCBlKSkgJiYgKGUuZXhwb3J0cyA9IHIpOwogICAgfSgpOwogIH0sIGZ1bmN0aW9uIChlLCB0LCBuKSB7CiAgICAidXNlIHN0cmljdCI7CgogICAgdC5fX2VzTW9kdWxlID0gITA7CgogICAgdmFyIHIgPSBmdW5jdGlvbiByKGUpIHsKICAgICAgZSA9IGUgfHwgbmF2aWdhdG9yLnVzZXJBZ2VudDsKICAgICAgdmFyIHQgPSB7fSwKICAgICAgICAgIG4gPSB7CiAgICAgICAgVHJpZGVudDogZS5pbmRleE9mKCJUcmlkZW50IikgPiAtMSB8fCBlLmluZGV4T2YoIk5FVCBDTFIiKSA+IC0xLAogICAgICAgIFByZXN0bzogZS5pbmRleE9mKCJQcmVzdG8iKSA+IC0xLAogICAgICAgIFdlYktpdDogZS5pbmRleE9mKCJBcHBsZVdlYktpdCIpID4gLTEsCiAgICAgICAgR2Vja286IGUuaW5kZXhPZigiR2Vja28vIikgPiAtMSwKICAgICAgICBTYWZhcmk6IGUuaW5kZXhPZigiU2FmYXJpIikgPiAtMSwKICAgICAgICBFZGdlOiBlLmluZGV4T2YoIkVkZ2UiKSA+IC0xIHx8IGUuaW5kZXhPZigiRWRnIikgPiAtMSwKICAgICAgICBDaHJvbWU6IGUuaW5kZXhPZigiQ2hyb21lIikgPiAtMSB8fCBlLmluZGV4T2YoIkNyaU9TIikgPiAtMSwKICAgICAgICBJRTogZS5pbmRleE9mKCJNU0lFIikgPiAtMSB8fCBlLmluZGV4T2YoIlRyaWRlbnQiKSA+IC0xLAogICAgICAgIEZpcmVmb3g6IGUuaW5kZXhPZigiRmlyZWZveCIpID4gLTEgfHwgZS5pbmRleE9mKCJGeGlPUyIpID4gLTEsCiAgICAgICAgIkZpcmVmb3ggRm9jdXMiOiBlLmluZGV4T2YoIkZvY3VzIikgPiAtMSwKICAgICAgICBDaHJvbWl1bTogZS5pbmRleE9mKCJDaHJvbWl1bSIpID4gLTEsCiAgICAgICAgT3BlcmE6IGUuaW5kZXhPZigiT3BlcmEiKSA+IC0xIHx8IGUuaW5kZXhPZigiT1BSIikgPiAtMSwKICAgICAgICBWaXZhbGRpOiBlLmluZGV4T2YoIlZpdmFsZGkiKSA+IC0xLAogICAgICAgIFlhbmRleDogZS5pbmRleE9mKCJZYUJyb3dzZXIiKSA+IC0xLAogICAgICAgIEtpbmRsZTogZS5pbmRleE9mKCJLaW5kbGUiKSA+IC0xIHx8IGUuaW5kZXhPZigiU2lsay8iKSA+IC0xLAogICAgICAgIDM2MDogZS5pbmRleE9mKCIzNjBFRSIpID4gLTEgfHwgZS5pbmRleE9mKCIzNjBTRSIpID4gLTEsCiAgICAgICAgVUM6IGUuaW5kZXhPZigiVUMiKSA+IC0xIHx8IGUuaW5kZXhPZigiIFVCcm93c2VyIikgPiAtMSwKICAgICAgICBRUUJyb3dzZXI6IGUuaW5kZXhPZigiUVFCcm93c2VyIikgPiAtMSwKICAgICAgICBRUTogZS5pbmRleE9mKCJRUS8iKSA+IC0xLAogICAgICAgIEJhaWR1OiBlLmluZGV4T2YoIkJhaWR1IikgPiAtMSB8fCBlLmluZGV4T2YoIkJJRFVCcm93c2VyIikgPiAtMSwKICAgICAgICBNYXh0aG9uOiBlLmluZGV4T2YoIk1heHRob24iKSA+IC0xLAogICAgICAgIFNvZ291OiBlLmluZGV4T2YoIk1ldGFTciIpID4gLTEgfHwgZS5pbmRleE9mKCJTb2dvdSIpID4gLTEsCiAgICAgICAgTEJCUk9XU0VSOiBlLmluZGV4T2YoIkxCQlJPV1NFUiIpID4gLTEsCiAgICAgICAgIjIzNDVFeHBsb3JlciI6IGUuaW5kZXhPZigiMjM0NUV4cGxvcmVyIikgPiAtMSwKICAgICAgICBUaGVXb3JsZDogZS5pbmRleE9mKCJUaGVXb3JsZCIpID4gLTEsCiAgICAgICAgWGlhb01pOiBlLmluZGV4T2YoIk1pdWlCcm93c2VyIikgPiAtMSwKICAgICAgICBRdWFyazogZS5pbmRleE9mKCJRdWFyayIpID4gLTEsCiAgICAgICAgUWl5dTogZS5pbmRleE9mKCJRaXl1IikgPiAtMSwKICAgICAgICBXZWNoYXQ6IGUuaW5kZXhPZigiTWljcm9NZXNzZW5nZXIiKSA+IC0xLAogICAgICAgIFRhb2JhbzogZS5pbmRleE9mKCJBbGlBcHAoVEIiKSA+IC0xLAogICAgICAgIEFsaXBheTogZS5pbmRleE9mKCJBbGlBcHAoQVAiKSA+IC0xLAogICAgICAgIFdlaWJvOiBlLmluZGV4T2YoIldlaWJvIikgPiAtMSwKICAgICAgICBEb3ViYW46IGUuaW5kZXhPZigiY29tLmRvdWJhbi5mcm9kbyIpID4gLTEsCiAgICAgICAgU3VuaW5nOiBlLmluZGV4T2YoIlNORUJVWS1BUFAiKSA+IC0xLAogICAgICAgIGlRaVlpOiBlLmluZGV4T2YoIklxaXlpQXBwIikgPiAtMSwKICAgICAgICBXaW5kb3dzOiBlLmluZGV4T2YoIldpbmRvd3MiKSA+IC0xLAogICAgICAgIExpbnV4OiBlLmluZGV4T2YoIkxpbnV4IikgPiAtMSB8fCBlLmluZGV4T2YoIlgxMSIpID4gLTEsCiAgICAgICAgbWFjT1M6IGUuaW5kZXhPZigiTWFjaW50b3NoIikgPiAtMSwKICAgICAgICBBbmRyb2lkOiBlLmluZGV4T2YoIkFuZHJvaWQiKSA+IC0xIHx8IGUuaW5kZXhPZigiQWRyIikgPiAtMSwKICAgICAgICBVYnVudHU6IGUuaW5kZXhPZigiVWJ1bnR1IikgPiAtMSwKICAgICAgICBGcmVlQlNEOiBlLmluZGV4T2YoIkZyZWVCU0QiKSA+IC0xLAogICAgICAgIERlYmlhbjogZS5pbmRleE9mKCJEZWJpYW4iKSA+IC0xLAogICAgICAgICJXaW5kb3dzIFBob25lIjogZS5pbmRleE9mKCJJRU1vYmlsZSIpID4gLTEgfHwgZS5pbmRleE9mKCJXaW5kb3dzIFBob25lIikgPiAtMSwKICAgICAgICBCbGFja0JlcnJ5OiBlLmluZGV4T2YoIkJsYWNrQmVycnkiKSA+IC0xIHx8IGUuaW5kZXhPZigiUklNIikgPiAtMSB8fCBlLmluZGV4T2YoIkJCMTAiKSA+IC0xLAogICAgICAgIE1lZUdvOiBlLmluZGV4T2YoIk1lZUdvIikgPiAtMSwKICAgICAgICBTeW1iaWFuOiBlLmluZGV4T2YoIlN5bWJpYW4iKSA+IC0xLAogICAgICAgIGlPUzogZS5pbmRleE9mKCJsaWtlIE1hYyBPUyBYIikgPiAtMSwKICAgICAgICAiQ2hyb21lIE9TIjogZS5pbmRleE9mKCJDck9TIikgPiAtMSwKICAgICAgICBXZWJPUzogZS5pbmRleE9mKCJocHdPUyIpID4gLTEsCiAgICAgICAgTW9iaWxlOiBlLmluZGV4T2YoIk1vYmkiKSA+IC0xIHx8IGUuaW5kZXhPZigiaVBoIikgPiAtMSB8fCBlLmluZGV4T2YoIjQ4MCIpID4gLTEsCiAgICAgICAgVGFibGV0OiBlLmluZGV4T2YoIlRhYmxldCIpID4gLTEgfHwgZS5pbmRleE9mKCJQYWQiKSA+IC0xIHx8IGUuaW5kZXhPZigiTmV4dXMgNyIpID4gLTEKICAgICAgfTsKICAgICAgbi5Nb2JpbGUgJiYgKG4uTW9iaWxlID0gIShlLmluZGV4T2YoImlQYWQiKSA+IC0xKSk7CiAgICAgIHZhciByID0gewogICAgICAgIGJyb3dzZXI6IFsiU2FmYXJpIiwgIkNocm9tZSIsICJFZGdlIiwgIklFIiwgIkZpcmVmb3giLCAiRmlyZWZveCBGb2N1cyIsICJDaHJvbWl1bSIsICJPcGVyYSIsICJWaXZhbGRpIiwgIllhbmRleCIsICJLaW5kbGUiLCAiMzYwIiwgIlVDIiwgIlFRQnJvd3NlciIsICJRUSIsICJCYWlkdSIsICJNYXh0aG9uIiwgIlNvZ291IiwgIkxCQlJPV1NFUiIsICIyMzQ1RXhwbG9yZXIiLCAiVGhlV29ybGQiLCAiWGlhb01pIiwgIlF1YXJrIiwgIlFpeXUiLCAiV2VjaGF0IiwgIlRhb2JhbyIsICJBbGlwYXkiLCAiV2VpYm8iLCAiRG91YmFuIiwgIlN1bmluZyIsICJpUWlZaSJdLAogICAgICAgIG9zOiBbIldpbmRvd3MiLCAiTGludXgiLCAiTWFjIE9TIiwgIm1hY09TIiwgIkFuZHJvaWQiLCAiVWJ1bnR1IiwgIkZyZWVCU0QiLCAiRGViaWFuIiwgImlPUyIsICJXaW5kb3dzIFBob25lIiwgIkJsYWNrQmVycnkiLCAiTWVlR28iLCAiU3ltYmlhbiIsICJDaHJvbWUgT1MiLCAiV2ViT1MiXQogICAgICB9OwoKICAgICAgZm9yICh2YXIgbyBpbiByKSB7CiAgICAgICAgaWYgKHIuaGFzT3duUHJvcGVydHkobykpIGZvciAodmFyIGkgPSAwLCBhID0gcltvXS5sZW5ndGg7IGkgPCBhOyBpKyspIHsKICAgICAgICAgIHZhciBzID0gcltvXVtpXTsKICAgICAgICAgIG5bc10gJiYgKHRbb10gPSBzKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHZhciBsID0gewogICAgICAgIFdpbmRvd3M6IGZ1bmN0aW9uIFdpbmRvd3MoKSB7CiAgICAgICAgICB2YXIgdCA9IGUucmVwbGFjZSgvXi4qV2luZG93cyBOVCAoW1xkLl0rKS4qJC8sICIkMSIpOwogICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgNi40OiAiMTAiLAogICAgICAgICAgICA2LjM6ICI4LjEiLAogICAgICAgICAgICA2LjI6ICI4IiwKICAgICAgICAgICAgNi4xOiAiNyIsCiAgICAgICAgICAgICI2LjAiOiAiVmlzdGEiLAogICAgICAgICAgICA1LjI6ICJYUCIsCiAgICAgICAgICAgIDUuMTogIlhQIiwKICAgICAgICAgICAgIjUuMCI6ICIyMDAwIgogICAgICAgICAgfVt0XSB8fCB0OwogICAgICAgIH0sCiAgICAgICAgQW5kcm9pZDogZS5yZXBsYWNlKC9eLipBbmRyb2lkIChbXGQuXSspOy4qJC8sICIkMSIpLAogICAgICAgIGlPUzogZS5yZXBsYWNlKC9eLipPUyAoW1xkX10rKSBsaWtlLiokLywgIiQxIikucmVwbGFjZSgvXy9nLCAiLiIpLAogICAgICAgIERlYmlhbjogZS5yZXBsYWNlKC9eLipEZWJpYW5cLyhbXGQuXSspLiokLywgIiQxIiksCiAgICAgICAgIldpbmRvd3MgUGhvbmUiOiBlLnJlcGxhY2UoL14uKldpbmRvd3MgUGhvbmUoIE9TKT8gKFtcZC5dKyk7LiokLywgIiQyIiksCiAgICAgICAgbWFjT1M6IGUucmVwbGFjZSgvXi4qTWFjIE9TIFggKFtcZF9dKykuKiQvLCAiJDEiKS5yZXBsYWNlKC9fL2csICIuIiksCiAgICAgICAgV2ViT1M6IGUucmVwbGFjZSgvXi4qaHB3T1NcLyhbXGQuXSspOy4qJC8sICIkMSIpLAogICAgICAgIEJsYWNrQmVycnk6IGUucmVwbGFjZSgvXi4qQkIoW1xkLl0rKTsqJC8sICIkMSIpCiAgICAgIH07CiAgICAgIHQub3NWZXJzaW9uID0gIiI7CiAgICAgIHZhciBjID0gbFt0Lm9zXTsKICAgICAgYyAmJiAodC5vc1ZlcnNpb24gPSAiZnVuY3Rpb24iID09IHR5cGVvZiBjID8gYygpIDogYyA9PSBlID8gIiIgOiBjKTsKICAgICAgdmFyIHUgPSB7CiAgICAgICAgU2FmYXJpOiBlLnJlcGxhY2UoL14uKlZlcnNpb25cLyhbXGQuXSspLiokLywgIiQxIiksCiAgICAgICAgQ2hyb21lOiBlLnJlcGxhY2UoL14uKkNocm9tZVwvKFtcZC5dKykuKiQvLCAiJDEiKS5yZXBsYWNlKC9eLipDcmlPU1wvKFtcZC5dKykuKiQvLCAiJDEiKSwKICAgICAgICBJRTogZS5yZXBsYWNlKC9eLipNU0lFIChbXGQuXSspLiokLywgIiQxIikucmVwbGFjZSgvXi4qcnY6KFtcZC5dKykuKiQvLCAiJDEiKSwKICAgICAgICBFZGdlOiBlLnJlcGxhY2UoL14uKkVkZ2U/XC8oW1xkLl0rKS4qJC8sICIkMSIpLAogICAgICAgIEZpcmVmb3g6IGUucmVwbGFjZSgvXi4qRmlyZWZveFwvKFtcZC5dKykuKiQvLCAiJDEiKS5yZXBsYWNlKC9eLipGeGlPU1wvKFtcZC5dKykuKiQvLCAiJDEiKSwKICAgICAgICAiRmlyZWZveCBGb2N1cyI6IGUucmVwbGFjZSgvXi4qRm9jdXNcLyhbXGQuXSspLiokLywgIiQxIiksCiAgICAgICAgQ2hyb21pdW06IGUucmVwbGFjZSgvXi4qQ2hyb21pdW1cLyhbXGQuXSspLiokLywgIiQxIiksCiAgICAgICAgT3BlcmE6IGUucmVwbGFjZSgvXi4qT3BlcmFcLyhbXGQuXSspLiokLywgIiQxIikucmVwbGFjZSgvXi4qT1BSXC8oW1xkLl0rKS4qJC8sICIkMSIpLAogICAgICAgIFZpdmFsZGk6IGUucmVwbGFjZSgvXi4qVml2YWxkaVwvKFtcZC5dKykuKiQvLCAiJDEiKSwKICAgICAgICBZYW5kZXg6IGUucmVwbGFjZSgvXi4qWWFCcm93c2VyXC8oW1xkLl0rKS4qJC8sICIkMSIpLAogICAgICAgIEtpbmRsZTogZS5yZXBsYWNlKC9eLipWZXJzaW9uXC8oW1xkLl0rKS4qJC8sICIkMSIpLAogICAgICAgIE1heHRob246IGUucmVwbGFjZSgvXi4qTWF4dGhvblwvKFtcZC5dKykuKiQvLCAiJDEiKSwKICAgICAgICBRUUJyb3dzZXI6IGUucmVwbGFjZSgvXi4qUVFCcm93c2VyXC8oW1xkLl0rKS4qJC8sICIkMSIpLAogICAgICAgIFFROiBlLnJlcGxhY2UoL14uKlFRXC8oW1xkLl0rKS4qJC8sICIkMSIpLAogICAgICAgIEJhaWR1OiBlLnJlcGxhY2UoL14uKkJJRFVCcm93c2VyW1xzXC9dKFtcZC5dKykuKiQvLCAiJDEiKSwKICAgICAgICBVQzogZS5yZXBsYWNlKC9eLipVQz9Ccm93c2VyXC8oW1xkLl0rKS4qJC8sICIkMSIpLAogICAgICAgIFNvZ291OiBlLnJlcGxhY2UoL14uKlNFIChbXGQuWF0rKS4qJC8sICIkMSIpLnJlcGxhY2UoL14uKlNvZ291TW9iaWxlQnJvd3NlclwvKFtcZC5dKykuKiQvLCAiJDEiKSwKICAgICAgICAiMjM0NUV4cGxvcmVyIjogZS5yZXBsYWNlKC9eLioyMzQ1RXhwbG9yZXJcLyhbXGQuXSspLiokLywgIiQxIiksCiAgICAgICAgVGhlV29ybGQ6IGUucmVwbGFjZSgvXi4qVGhlV29ybGQgKFtcZC5dKykuKiQvLCAiJDEiKSwKICAgICAgICBYaWFvTWk6IGUucmVwbGFjZSgvXi4qTWl1aUJyb3dzZXJcLyhbXGQuXSspLiokLywgIiQxIiksCiAgICAgICAgUXVhcms6IGUucmVwbGFjZSgvXi4qUXVhcmtcLyhbXGQuXSspLiokLywgIiQxIiksCiAgICAgICAgUWl5dTogZS5yZXBsYWNlKC9eLipRaXl1XC8oW1xkLl0rKS4qJC8sICIkMSIpLAogICAgICAgIFdlY2hhdDogZS5yZXBsYWNlKC9eLipNaWNyb01lc3NlbmdlclwvKFtcZC5dKykuKiQvLCAiJDEiKSwKICAgICAgICBUYW9iYW86IGUucmVwbGFjZSgvXi4qQWxpQXBwXChUQlwvKFtcZC5dKykuKiQvLCAiJDEiKSwKICAgICAgICBBbGlwYXk6IGUucmVwbGFjZSgvXi4qQWxpQXBwXChBUFwvKFtcZC5dKykuKiQvLCAiJDEiKSwKICAgICAgICBXZWlibzogZS5yZXBsYWNlKC9eLip3ZWlib19fKFtcZC5dKykuKiQvLCAiJDEiKSwKICAgICAgICBEb3ViYW46IGUucmVwbGFjZSgvXi4qY29tLmRvdWJhbi5mcm9kb1wvKFtcZC5dKykuKiQvLCAiJDEiKSwKICAgICAgICBTdW5pbmc6IGUucmVwbGFjZSgvXi4qU05FQlVZLUFQUChbXGQuXSspLiokLywgIiQxIiksCiAgICAgICAgaVFpWWk6IGUucmVwbGFjZSgvXi4qSXFpeWlWZXJzaW9uXC8oW1xkLl0rKS4qJC8sICIkMSIpCiAgICAgIH07CiAgICAgIHQudmVyc2lvbiA9ICIiOwogICAgICB2YXIgZCA9IHVbdC5icm93c2VyXTsKICAgICAgcmV0dXJuIGQgJiYgKHQudmVyc2lvbiA9ICJmdW5jdGlvbiIgPT0gdHlwZW9mIGQgPyBkKCkgOiBkID09IGUgPyAiIiA6IGQpLCB2b2lkIDAgPT0gdC5icm93c2VyICYmICh0LmJyb3dzZXIgPSAiVW5rbm93IEFwcCIpLCB0OwogICAgfTsKCiAgICB0WyJkZWZhdWx0Il0gPSByOwogIH0sIGZ1bmN0aW9uIChlLCB0LCBuKSB7CiAgICB2YXIgciwgbzsKICAgICFmdW5jdGlvbiAobiwgaSkgewogICAgICB2YXIgaSA9IGZ1bmN0aW9uIChlLCB0LCBuKSB7CiAgICAgICAgZnVuY3Rpb24gcihvLCBpLCBhKSB7CiAgICAgICAgICByZXR1cm4gYSA9IE9iamVjdC5jcmVhdGUoci5mbiksIG8gJiYgYS5wdXNoLmFwcGx5KGEsIG9bdF0gPyBbb10gOiAiIiArIG8gPT09IG8gPyAvPC8udGVzdChvKSA/ICgoaSA9IGUuY3JlYXRlRWxlbWVudChpKSkuaW5uZXJIVE1MID0gbywgaS5jaGlsZHJlbikgOiBpID8gKGkgPSByKGkpWzBdKSA/IGlbbl0obykgOiBhIDogZVtuXShvKSA6IG8pLCBhOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHIuZm4gPSBbXSwgci5vbmUgPSBmdW5jdGlvbiAoZSwgdCkgewogICAgICAgICAgcmV0dXJuIHIoZSwgdClbMF0gfHwgbnVsbDsKICAgICAgICB9LCByOwogICAgICB9KGRvY3VtZW50LCAiYWRkRXZlbnRMaXN0ZW5lciIsICJxdWVyeVNlbGVjdG9yQWxsIik7CgogICAgICByID0gW10sIHZvaWQgMCAhPT0gKG8gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIGk7CiAgICAgIH0uYXBwbHkodCwgcikpICYmIChlLmV4cG9ydHMgPSBvKTsKICAgIH0oKTsKICB9LCBmdW5jdGlvbiAoZSwgdCwgbikgewogICAgZnVuY3Rpb24gcihlKSB7CiAgICAgIHJldHVybiB2b2lkIDAgPT09IGUgfHwgbnVsbCA9PT0gZTsKICAgIH0KCiAgICBmdW5jdGlvbiBvKGUpIHsKICAgICAgdmFyIHQgPSB7fTsKCiAgICAgIGZvciAodmFyIG4gaW4gZSkgewogICAgICAgIHRbbl0gPSBlW25dOwogICAgICB9CgogICAgICByZXR1cm4gdDsKICAgIH0KCiAgICBmdW5jdGlvbiBpKGUpIHsKICAgICAgZSA9IG8oZSB8fCB7fSksIGUud2hpdGVMaXN0ID0gZS53aGl0ZUxpc3QgfHwgYS53aGl0ZUxpc3QsIGUub25BdHRyID0gZS5vbkF0dHIgfHwgYS5vbkF0dHIsIGUub25JZ25vcmVBdHRyID0gZS5vbklnbm9yZUF0dHIgfHwgYS5vbklnbm9yZUF0dHIsIGUuc2FmZUF0dHJWYWx1ZSA9IGUuc2FmZUF0dHJWYWx1ZSB8fCBhLnNhZmVBdHRyVmFsdWUsIHRoaXMub3B0aW9ucyA9IGU7CiAgICB9CgogICAgdmFyIGEgPSBuKDcpLAogICAgICAgIHMgPSBuKDMwKTsKICAgIG4oOCk7CiAgICBpLnByb3RvdHlwZS5wcm9jZXNzID0gZnVuY3Rpb24gKGUpIHsKICAgICAgaWYgKGUgPSBlIHx8ICIiLCAhKGUgPSBlLnRvU3RyaW5nKCkpKSByZXR1cm4gIiI7CiAgICAgIHZhciB0ID0gdGhpcywKICAgICAgICAgIG4gPSB0Lm9wdGlvbnMsCiAgICAgICAgICBvID0gbi53aGl0ZUxpc3QsCiAgICAgICAgICBpID0gbi5vbkF0dHIsCiAgICAgICAgICBhID0gbi5vbklnbm9yZUF0dHIsCiAgICAgICAgICBsID0gbi5zYWZlQXR0clZhbHVlOwogICAgICByZXR1cm4gcyhlLCBmdW5jdGlvbiAoZSwgdCwgbiwgcywgYykgewogICAgICAgIHZhciB1ID0gb1tuXSwKICAgICAgICAgICAgZCA9ICExOwoKICAgICAgICBpZiAoITAgPT09IHUgPyBkID0gdSA6ICJmdW5jdGlvbiIgPT0gdHlwZW9mIHUgPyBkID0gdShzKSA6IHUgaW5zdGFuY2VvZiBSZWdFeHAgJiYgKGQgPSB1LnRlc3QocykpLCAhMCAhPT0gZCAmJiAoZCA9ICExKSwgcyA9IGwobiwgcykpIHsKICAgICAgICAgIHZhciBwID0gewogICAgICAgICAgICBwb3NpdGlvbjogdCwKICAgICAgICAgICAgc291cmNlUG9zaXRpb246IGUsCiAgICAgICAgICAgIHNvdXJjZTogYywKICAgICAgICAgICAgaXNXaGl0ZTogZAogICAgICAgICAgfTsKCiAgICAgICAgICBpZiAoZCkgewogICAgICAgICAgICB2YXIgZiA9IGkobiwgcywgcCk7CiAgICAgICAgICAgIHJldHVybiByKGYpID8gbiArICI6IiArIHMgOiBmOwogICAgICAgICAgfQoKICAgICAgICAgIHZhciBmID0gYShuLCBzLCBwKTsKICAgICAgICAgIHJldHVybiByKGYpID8gdm9pZCAwIDogZjsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwgZS5leHBvcnRzID0gaTsKICB9LCBmdW5jdGlvbiAoZSwgdCwgbikgewogICAgZnVuY3Rpb24gcihlLCB0KSB7CiAgICAgIGZ1bmN0aW9uIG4oKSB7CiAgICAgICAgaWYgKCFpKSB7CiAgICAgICAgICB2YXIgbiA9IG8udHJpbShlLnNsaWNlKGEsIHMpKSwKICAgICAgICAgICAgICByID0gbi5pbmRleE9mKCI6Iik7CgogICAgICAgICAgaWYgKC0xICE9PSByKSB7CiAgICAgICAgICAgIHZhciBjID0gby50cmltKG4uc2xpY2UoMCwgcikpLAogICAgICAgICAgICAgICAgdSA9IG8udHJpbShuLnNsaWNlKHIgKyAxKSk7CgogICAgICAgICAgICBpZiAoYykgewogICAgICAgICAgICAgIHZhciBkID0gdChhLCBsLmxlbmd0aCwgYywgdSwgbik7CiAgICAgICAgICAgICAgZCAmJiAobCArPSBkICsgIjsgIik7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGEgPSBzICsgMTsKICAgICAgfQoKICAgICAgZSA9IG8udHJpbVJpZ2h0KGUpLCAiOyIgIT09IGVbZS5sZW5ndGggLSAxXSAmJiAoZSArPSAiOyIpOwoKICAgICAgZm9yICh2YXIgciA9IGUubGVuZ3RoLCBpID0gITEsIGEgPSAwLCBzID0gMCwgbCA9ICIiOyBzIDwgcjsgcysrKSB7CiAgICAgICAgdmFyIGMgPSBlW3NdOwoKICAgICAgICBpZiAoIi8iID09PSBjICYmICIqIiA9PT0gZVtzICsgMV0pIHsKICAgICAgICAgIHZhciB1ID0gZS5pbmRleE9mKCIqLyIsIHMgKyAyKTsKICAgICAgICAgIGlmICgtMSA9PT0gdSkgYnJlYWs7CiAgICAgICAgICBzID0gdSArIDEsIGEgPSBzICsgMSwgaSA9ICExOwogICAgICAgIH0gZWxzZSAiKCIgPT09IGMgPyBpID0gITAgOiAiKSIgPT09IGMgPyBpID0gITEgOiAiOyIgPT09IGMgPyBpIHx8IG4oKSA6ICJcbiIgPT09IGMgJiYgbigpOwogICAgICB9CgogICAgICByZXR1cm4gby50cmltKGwpOwogICAgfQoKICAgIHZhciBvID0gbig4KTsKICAgIGUuZXhwb3J0cyA9IHI7CiAgfSwgZnVuY3Rpb24gKGUsIHQsIG4pIHsKICAgICJ1c2Ugc3RyaWN0IjsKCiAgICB2YXIgciA9IG4oMzUpLAogICAgICAgIG8gPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLAogICAgICAgIGkgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LAogICAgICAgIGEgPSBmdW5jdGlvbiBhKGUsIHQsIG4pIHsKICAgICAgZm9yICh2YXIgciA9IDAsIG8gPSBlLmxlbmd0aDsgciA8IG87IHIrKykgewogICAgICAgIGkuY2FsbChlLCByKSAmJiAobnVsbCA9PSBuID8gdChlW3JdLCByLCBlKSA6IHQuY2FsbChuLCBlW3JdLCByLCBlKSk7CiAgICAgIH0KICAgIH0sCiAgICAgICAgcyA9IGZ1bmN0aW9uIHMoZSwgdCwgbikgewogICAgICBmb3IgKHZhciByID0gMCwgbyA9IGUubGVuZ3RoOyByIDwgbzsgcisrKSB7CiAgICAgICAgbnVsbCA9PSBuID8gdChlLmNoYXJBdChyKSwgciwgZSkgOiB0LmNhbGwobiwgZS5jaGFyQXQociksIHIsIGUpOwogICAgICB9CiAgICB9LAogICAgICAgIGwgPSBmdW5jdGlvbiBsKGUsIHQsIG4pIHsKICAgICAgZm9yICh2YXIgciBpbiBlKSB7CiAgICAgICAgaS5jYWxsKGUsIHIpICYmIChudWxsID09IG4gPyB0KGVbcl0sIHIsIGUpIDogdC5jYWxsKG4sIGVbcl0sIHIsIGUpKTsKICAgICAgfQogICAgfSwKICAgICAgICBjID0gZnVuY3Rpb24gYyhlLCB0LCBuKSB7CiAgICAgIGlmICghcih0KSkgdGhyb3cgbmV3IFR5cGVFcnJvcigiaXRlcmF0b3IgbXVzdCBiZSBhIGZ1bmN0aW9uIik7CiAgICAgIHZhciBpOwogICAgICBhcmd1bWVudHMubGVuZ3RoID49IDMgJiYgKGkgPSBuKSwgIltvYmplY3QgQXJyYXldIiA9PT0gby5jYWxsKGUpID8gYShlLCB0LCBpKSA6ICJzdHJpbmciID09IHR5cGVvZiBlID8gcyhlLCB0LCBpKSA6IGwoZSwgdCwgaSk7CiAgICB9OwoKICAgIGUuZXhwb3J0cyA9IGM7CiAgfSwgZnVuY3Rpb24gKGUsIHQsIG4pIHsKICAgICJ1c2Ugc3RyaWN0IjsKCiAgICB2YXIgciA9IEFycmF5LnByb3RvdHlwZS5zbGljZSwKICAgICAgICBvID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZzsKCiAgICBlLmV4cG9ydHMgPSBmdW5jdGlvbiAoZSkgewogICAgICB2YXIgdCA9IHRoaXM7CiAgICAgIGlmICgiZnVuY3Rpb24iICE9IHR5cGVvZiB0IHx8ICJbb2JqZWN0IEZ1bmN0aW9uXSIgIT09IG8uY2FsbCh0KSkgdGhyb3cgbmV3IFR5cGVFcnJvcigiRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQgY2FsbGVkIG9uIGluY29tcGF0aWJsZSAiICsgdCk7CgogICAgICBmb3IgKHZhciBuLCBpID0gci5jYWxsKGFyZ3VtZW50cywgMSksIGEgPSBmdW5jdGlvbiBhKCkgewogICAgICAgIGlmICh0aGlzIGluc3RhbmNlb2YgbikgewogICAgICAgICAgdmFyIG8gPSB0LmFwcGx5KHRoaXMsIGkuY29uY2F0KHIuY2FsbChhcmd1bWVudHMpKSk7CiAgICAgICAgICByZXR1cm4gT2JqZWN0KG8pID09PSBvID8gbyA6IHRoaXM7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gdC5hcHBseShlLCBpLmNvbmNhdChyLmNhbGwoYXJndW1lbnRzKSkpOwogICAgICB9LCBzID0gTWF0aC5tYXgoMCwgdC5sZW5ndGggLSBpLmxlbmd0aCksIGwgPSBbXSwgYyA9IDA7IGMgPCBzOyBjKyspIHsKICAgICAgICBsLnB1c2goIiQiICsgYyk7CiAgICAgIH0KCiAgICAgIGlmIChuID0gRnVuY3Rpb24oImJpbmRlciIsICJyZXR1cm4gZnVuY3Rpb24gKCIgKyBsLmpvaW4oIiwiKSArICIpeyByZXR1cm4gYmluZGVyLmFwcGx5KHRoaXMsYXJndW1lbnRzKTsgfSIpKGEpLCB0LnByb3RvdHlwZSkgewogICAgICAgIHZhciB1ID0gZnVuY3Rpb24gdSgpIHt9OwoKICAgICAgICB1LnByb3RvdHlwZSA9IHQucHJvdG90eXBlLCBuLnByb3RvdHlwZSA9IG5ldyB1KCksIHUucHJvdG90eXBlID0gbnVsbDsKICAgICAgfQoKICAgICAgcmV0dXJuIG47CiAgICB9OwogIH0sIGZ1bmN0aW9uIChlLCB0LCBuKSB7CiAgICAhZnVuY3Rpb24gKHQsIG4pIHsKICAgICAgZS5leHBvcnRzID0gbigpOwogICAgfSgwLCBmdW5jdGlvbiAoKSB7CiAgICAgICJ1c2Ugc3RyaWN0IjsKCiAgICAgIGZ1bmN0aW9uIGUoZSkgewogICAgICAgIHJldHVybiAnPHNwYW4gc3R5bGU9ImNvbG9yOiBzbGF0ZWdyYXkiPicgKyBlICsgIjwvc3Bhbj4iOwogICAgICB9CgogICAgICB2YXIgdCA9IGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgICAgcmV0dXJuIHQgPSB7CiAgICAgICAgICBleHBvcnRzOiB7fQogICAgICAgIH0sIGUodCwgdC5leHBvcnRzKSwgdC5leHBvcnRzOwogICAgICB9KGZ1bmN0aW9uIChlKSB7CiAgICAgICAgdmFyIHQgPSBlLmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICByZXR1cm4gbmV3IFJlZ0V4cCgiKD86IiArIHQubGluZSgpLnNvdXJjZSArICIpfCg/OiIgKyB0LmJsb2NrKCkuc291cmNlICsgIikiLCAiZ20iKTsKICAgICAgICB9OwoKICAgICAgICB0LmxpbmUgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICByZXR1cm4gLyg/Ol58XHMpXC9cLyguKz8pJC9nbTsKICAgICAgICB9LCB0LmJsb2NrID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgcmV0dXJuIC9cL1wqKFtcU1xzXSo/KVwqXC8vZ207CiAgICAgICAgfTsKICAgICAgfSksCiAgICAgICAgICBuID0gWyIyM0FDNjkiLCAiOTFDMTMyIiwgIkYxOTcyNiIsICJFODU1MkQiLCAiMUFBQjhFIiwgIkUxMTQ3RiIsICIyOTgwQzEiLCAiMUJBMUU2IiwgIjlGQTBBMCIsICJGMTk3MjYiLCAiRTMwQjIwIiwgIkUzMEIyMCIsICJBMzMzOEIiXTsKCiAgICAgIHJldHVybiBmdW5jdGlvbiAociwgbykgewogICAgICAgIHZvaWQgMCA9PT0gbyAmJiAobyA9IHt9KTsKICAgICAgICB2YXIgaSA9IG8uY29sb3JzOwogICAgICAgIHZvaWQgMCA9PT0gaSAmJiAoaSA9IG4pOwogICAgICAgIHZhciBhID0gMCwKICAgICAgICAgICAgcyA9IHt9LAogICAgICAgICAgICBsID0gL1tcdTRFMDAtXHU5RkZGXHUzNDAwLVx1NGRiZlx1ZjkwMC1cdWZhZmZcdTMwNDAtXHUzMDlmXHVhYzAwLVx1ZDdhZlx1MDQwMC1cdTA0RkZdK3xcdysvLAogICAgICAgICAgICBjID0gLzwvLAogICAgICAgICAgICB1ID0gbmV3IFJlZ0V4cCgiKCIgKyBsLnNvdXJjZSArICJ8IiArIGMuc291cmNlICsgIil8KCIgKyB0KCkuc291cmNlICsgIikiLCAiZ21pIik7CiAgICAgICAgcmV0dXJuIHIucmVwbGFjZSh1LCBmdW5jdGlvbiAodCwgbiwgcikgewogICAgICAgICAgaWYgKHIpIHJldHVybiBlKHIpOwogICAgICAgICAgaWYgKCI8IiA9PT0gbikgcmV0dXJuICImbHQ7IjsKICAgICAgICAgIHZhciBvOwogICAgICAgICAgc1tuXSA/IG8gPSBzW25dIDogKG8gPSBpW2FdLCBzW25dID0gbyk7CiAgICAgICAgICB2YXIgbCA9ICc8c3BhbiBzdHlsZT0iY29sb3I6ICMnICsgbyArICciPicgKyBuICsgIjwvc3Bhbj4iOwogICAgICAgICAgcmV0dXJuIGEgPSArK2EgJSBpLmxlbmd0aCwgbDsKICAgICAgICB9KTsKICAgICAgfTsKICAgIH0pOwogIH0sIGZ1bmN0aW9uIChlLCB0LCBuKSB7CiAgICAidXNlIHN0cmljdCI7CgogICAgdmFyIHIgPSBuKDQpOwogICAgZS5leHBvcnRzID0gci5jYWxsKEZ1bmN0aW9uLmNhbGwsIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkpOwogIH0sIGZ1bmN0aW9uIChlLCB0LCBuKSB7CiAgICAidXNlIHN0cmljdCI7CgogICAgdmFyIHIgPSBGdW5jdGlvbi5wcm90b3R5cGUudG9TdHJpbmcsCiAgICAgICAgbyA9IC9eXHMqY2xhc3NcYi8sCiAgICAgICAgaSA9IGZ1bmN0aW9uIGkoZSkgewogICAgICB0cnkgewogICAgICAgIHZhciB0ID0gci5jYWxsKGUpOwogICAgICAgIHJldHVybiBvLnRlc3QodCk7CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICByZXR1cm4gITE7CiAgICAgIH0KICAgIH0sCiAgICAgICAgYSA9IGZ1bmN0aW9uIGEoZSkgewogICAgICB0cnkgewogICAgICAgIHJldHVybiAhaShlKSAmJiAoci5jYWxsKGUpLCAhMCk7CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICByZXR1cm4gITE7CiAgICAgIH0KICAgIH0sCiAgICAgICAgcyA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcsCiAgICAgICAgbCA9ICJmdW5jdGlvbiIgPT0gdHlwZW9mIFN5bWJvbCAmJiAic3ltYm9sIiA9PSBfdHlwZW9mKFN5bWJvbC50b1N0cmluZ1RhZyk7CgogICAgZS5leHBvcnRzID0gZnVuY3Rpb24gKGUpIHsKICAgICAgaWYgKCFlKSByZXR1cm4gITE7CiAgICAgIGlmICgiZnVuY3Rpb24iICE9IHR5cGVvZiBlICYmICJvYmplY3QiICE9IF90eXBlb2YoZSkpIHJldHVybiAhMTsKICAgICAgaWYgKCJmdW5jdGlvbiIgPT0gdHlwZW9mIGUgJiYgIWUucHJvdG90eXBlKSByZXR1cm4gITA7CiAgICAgIGlmIChsKSByZXR1cm4gYShlKTsKICAgICAgaWYgKGkoZSkpIHJldHVybiAhMTsKICAgICAgdmFyIHQgPSBzLmNhbGwoZSk7CiAgICAgIHJldHVybiAiW29iamVjdCBGdW5jdGlvbl0iID09PSB0IHx8ICJbb2JqZWN0IEdlbmVyYXRvckZ1bmN0aW9uXSIgPT09IHQ7CiAgICB9OwogIH0sIGZ1bmN0aW9uIChlLCB0LCBuKSB7CiAgICAoZnVuY3Rpb24gKHQpIHsKICAgICAgIWZ1bmN0aW9uICh0KSB7CiAgICAgICAgInVzZSBzdHJpY3QiOwoKICAgICAgICBmdW5jdGlvbiBuKGUpIHsKICAgICAgICAgIHRoaXMudG9rZW5zID0gW10sIHRoaXMudG9rZW5zLmxpbmtzID0ge30sIHRoaXMub3B0aW9ucyA9IGUgfHwgaC5kZWZhdWx0cywgdGhpcy5ydWxlcyA9IHYubm9ybWFsLCB0aGlzLm9wdGlvbnMucGVkYW50aWMgPyB0aGlzLnJ1bGVzID0gdi5wZWRhbnRpYyA6IHRoaXMub3B0aW9ucy5nZm0gJiYgKHRoaXMub3B0aW9ucy50YWJsZXMgPyB0aGlzLnJ1bGVzID0gdi50YWJsZXMgOiB0aGlzLnJ1bGVzID0gdi5nZm0pOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gcihlLCB0KSB7CiAgICAgICAgICBpZiAodGhpcy5vcHRpb25zID0gdCB8fCBoLmRlZmF1bHRzLCB0aGlzLmxpbmtzID0gZSwgdGhpcy5ydWxlcyA9IGcubm9ybWFsLCB0aGlzLnJlbmRlcmVyID0gdGhpcy5vcHRpb25zLnJlbmRlcmVyIHx8IG5ldyBvKCksIHRoaXMucmVuZGVyZXIub3B0aW9ucyA9IHRoaXMub3B0aW9ucywgIXRoaXMubGlua3MpIHRocm93IG5ldyBFcnJvcigiVG9rZW5zIGFycmF5IHJlcXVpcmVzIGEgYGxpbmtzYCBwcm9wZXJ0eS4iKTsKICAgICAgICAgIHRoaXMub3B0aW9ucy5wZWRhbnRpYyA/IHRoaXMucnVsZXMgPSBnLnBlZGFudGljIDogdGhpcy5vcHRpb25zLmdmbSAmJiAodGhpcy5vcHRpb25zLmJyZWFrcyA/IHRoaXMucnVsZXMgPSBnLmJyZWFrcyA6IHRoaXMucnVsZXMgPSBnLmdmbSk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBvKGUpIHsKICAgICAgICAgIHRoaXMub3B0aW9ucyA9IGUgfHwgaC5kZWZhdWx0czsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGkoKSB7fQoKICAgICAgICBmdW5jdGlvbiBhKGUpIHsKICAgICAgICAgIHRoaXMudG9rZW5zID0gW10sIHRoaXMudG9rZW4gPSBudWxsLCB0aGlzLm9wdGlvbnMgPSBlIHx8IGguZGVmYXVsdHMsIHRoaXMub3B0aW9ucy5yZW5kZXJlciA9IHRoaXMub3B0aW9ucy5yZW5kZXJlciB8fCBuZXcgbygpLCB0aGlzLnJlbmRlcmVyID0gdGhpcy5vcHRpb25zLnJlbmRlcmVyLCB0aGlzLnJlbmRlcmVyLm9wdGlvbnMgPSB0aGlzLm9wdGlvbnM7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBzKGUsIHQpIHsKICAgICAgICAgIHJldHVybiBlLnJlcGxhY2UodCA/IC8mL2cgOiAvJig/ISM/XHcrOykvZywgIiZhbXA7IikucmVwbGFjZSgvPC9nLCAiJmx0OyIpLnJlcGxhY2UoLz4vZywgIiZndDsiKS5yZXBsYWNlKC8iL2csICImcXVvdDsiKS5yZXBsYWNlKC8nL2csICImIzM5OyIpOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gbChlKSB7CiAgICAgICAgICByZXR1cm4gZS5yZXBsYWNlKC8mKCMoPzpcZCspfCg/OiN4WzAtOUEtRmEtZl0rKXwoPzpcdyspKTs/L2dpLCBmdW5jdGlvbiAoZSwgdCkgewogICAgICAgICAgICByZXR1cm4gdCA9IHQudG9Mb3dlckNhc2UoKSwgImNvbG9uIiA9PT0gdCA/ICI6IiA6ICIjIiA9PT0gdC5jaGFyQXQoMCkgPyAieCIgPT09IHQuY2hhckF0KDEpID8gU3RyaW5nLmZyb21DaGFyQ29kZShwYXJzZUludCh0LnN1YnN0cmluZygyKSwgMTYpKSA6IFN0cmluZy5mcm9tQ2hhckNvZGUoK3Quc3Vic3RyaW5nKDEpKSA6ICIiOwogICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBjKGUsIHQpIHsKICAgICAgICAgIHJldHVybiBlID0gZS5zb3VyY2UgfHwgZSwgdCA9IHQgfHwgIiIsIHsKICAgICAgICAgICAgcmVwbGFjZTogZnVuY3Rpb24gcmVwbGFjZSh0LCBuKSB7CiAgICAgICAgICAgICAgcmV0dXJuIG4gPSBuLnNvdXJjZSB8fCBuLCBuID0gbi5yZXBsYWNlKC8oXnxbXlxbXSlcXi9nLCAiJDEiKSwgZSA9IGUucmVwbGFjZSh0LCBuKSwgdGhpczsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZ2V0UmVnZXg6IGZ1bmN0aW9uIGdldFJlZ2V4KCkgewogICAgICAgICAgICAgIHJldHVybiBuZXcgUmVnRXhwKGUsIHQpOwogICAgICAgICAgICB9CiAgICAgICAgICB9OwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gdShlLCB0KSB7CiAgICAgICAgICByZXR1cm4gbVsiICIgKyBlXSB8fCAoL15bXjpdKzpcLypbXi9dKiQvLnRlc3QoZSkgPyBtWyIgIiArIGVdID0gZSArICIvIiA6IG1bIiAiICsgZV0gPSBlLnJlcGxhY2UoL1teL10qJC8sICIiKSksIGUgPSBtWyIgIiArIGVdLCAiLy8iID09PSB0LnNsaWNlKDAsIDIpID8gZS5yZXBsYWNlKC86W1xzXFNdKi8sICI6IikgKyB0IDogIi8iID09PSB0LmNoYXJBdCgwKSA/IGUucmVwbGFjZSgvKDpcLypbXi9dKilbXHNcU10qLywgIiQxIikgKyB0IDogZSArIHQ7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBkKCkge30KCiAgICAgICAgZnVuY3Rpb24gcChlKSB7CiAgICAgICAgICBmb3IgKHZhciB0LCBuLCByID0gMTsgciA8IGFyZ3VtZW50cy5sZW5ndGg7IHIrKykgewogICAgICAgICAgICB0ID0gYXJndW1lbnRzW3JdOwoKICAgICAgICAgICAgZm9yIChuIGluIHQpIHsKICAgICAgICAgICAgICBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCwgbikgJiYgKGVbbl0gPSB0W25dKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAgIHJldHVybiBlOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gZihlLCB0KSB7CiAgICAgICAgICB2YXIgbiA9IGUucmVwbGFjZSgvKFteXFxdKVx8L2csICIkMSB8Iikuc3BsaXQoLyArXHwgKi8pLAogICAgICAgICAgICAgIHIgPSAwOwogICAgICAgICAgaWYgKG4ubGVuZ3RoID4gdCkgbi5zcGxpY2UodCk7ZWxzZSBmb3IgKDsgbi5sZW5ndGggPCB0OykgewogICAgICAgICAgICBuLnB1c2goIiIpOwogICAgICAgICAgfQoKICAgICAgICAgIGZvciAoOyByIDwgbi5sZW5ndGg7IHIrKykgewogICAgICAgICAgICBuW3JdID0gbltyXS5yZXBsYWNlKC9cXFx8L2csICJ8Iik7CiAgICAgICAgICB9CgogICAgICAgICAgcmV0dXJuIG47CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBoKGUsIHQsIHIpIHsKICAgICAgICAgIGlmICh2b2lkIDAgPT09IGUgfHwgbnVsbCA9PT0gZSkgdGhyb3cgbmV3IEVycm9yKCJtYXJrZWQoKTogaW5wdXQgcGFyYW1ldGVyIGlzIHVuZGVmaW5lZCBvciBudWxsIik7CiAgICAgICAgICBpZiAoInN0cmluZyIgIT0gdHlwZW9mIGUpIHRocm93IG5ldyBFcnJvcigibWFya2VkKCk6IGlucHV0IHBhcmFtZXRlciBpcyBvZiB0eXBlICIgKyBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZSkgKyAiLCBzdHJpbmcgZXhwZWN0ZWQiKTsKCiAgICAgICAgICBpZiAociB8fCAiZnVuY3Rpb24iID09IHR5cGVvZiB0KSB7CiAgICAgICAgICAgIHIgfHwgKHIgPSB0LCB0ID0gbnVsbCksIHQgPSBwKHt9LCBoLmRlZmF1bHRzLCB0IHx8IHt9KTsKICAgICAgICAgICAgdmFyIG8sCiAgICAgICAgICAgICAgICBpLAogICAgICAgICAgICAgICAgbCA9IHQuaGlnaGxpZ2h0LAogICAgICAgICAgICAgICAgYyA9IDA7CgogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgIG8gPSBuLmxleChlLCB0KTsKICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgIHJldHVybiByKGUpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpID0gby5sZW5ndGg7CgogICAgICAgICAgICB2YXIgdSA9IGZ1bmN0aW9uIHUoZSkgewogICAgICAgICAgICAgIGlmIChlKSByZXR1cm4gdC5oaWdobGlnaHQgPSBsLCByKGUpOwogICAgICAgICAgICAgIHZhciBuOwoKICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgbiA9IGEucGFyc2UobywgdCk7CiAgICAgICAgICAgICAgfSBjYXRjaCAodCkgewogICAgICAgICAgICAgICAgZSA9IHQ7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICByZXR1cm4gdC5oaWdobGlnaHQgPSBsLCBlID8gcihlKSA6IHIobnVsbCwgbik7CiAgICAgICAgICAgIH07CgogICAgICAgICAgICBpZiAoIWwgfHwgbC5sZW5ndGggPCAzKSByZXR1cm4gdSgpOwogICAgICAgICAgICBpZiAoZGVsZXRlIHQuaGlnaGxpZ2h0LCAhaSkgcmV0dXJuIHUoKTsKCiAgICAgICAgICAgIGZvciAoOyBjIDwgby5sZW5ndGg7IGMrKykgewogICAgICAgICAgICAgICFmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgImNvZGUiICE9PSBlLnR5cGUgPyAtLWkgfHwgdSgpIDogbChlLnRleHQsIGUubGFuZywgZnVuY3Rpb24gKHQsIG4pIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIHQgPyB1KHQpIDogbnVsbCA9PSBuIHx8IG4gPT09IGUudGV4dCA/IC0taSB8fCB1KCkgOiAoZS50ZXh0ID0gbiwgZS5lc2NhcGVkID0gITAsIHZvaWQgKC0taSB8fCB1KCkpKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0ob1tjXSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gZWxzZSB0cnkgewogICAgICAgICAgICByZXR1cm4gdCAmJiAodCA9IHAoe30sIGguZGVmYXVsdHMsIHQpKSwgYS5wYXJzZShuLmxleChlLCB0KSwgdCk7CiAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgIGlmIChlLm1lc3NhZ2UgKz0gIlxuUGxlYXNlIHJlcG9ydCB0aGlzIHRvIGh0dHBzOi8vZ2l0aHViLmNvbS9tYXJrZWRqcy9tYXJrZWQuIiwgKHQgfHwgaC5kZWZhdWx0cykuc2lsZW50KSByZXR1cm4gIjxwPkFuIGVycm9yIG9jY3VycmVkOjwvcD48cHJlPiIgKyBzKGUubWVzc2FnZSArICIiLCAhMCkgKyAiPC9wcmU+IjsKICAgICAgICAgICAgdGhyb3cgZTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHZhciB2ID0gewogICAgICAgICAgbmV3bGluZTogL15cbisvLAogICAgICAgICAgY29kZTogL14oIHs0fVteXG5dK1xuKikrLywKICAgICAgICAgIGZlbmNlczogZCwKICAgICAgICAgIGhyOiAvXiB7MCwzfSgoPzotICopezMsfXwoPzpfICopezMsfXwoPzpcKiAqKXszLH0pKD86XG4rfCQpLywKICAgICAgICAgIGhlYWRpbmc6IC9eICooI3sxLDZ9KSAqKFteXG5dKz8pICooPzojKyAqKT8oPzpcbit8JCkvLAogICAgICAgICAgbnB0YWJsZTogZCwKICAgICAgICAgIGJsb2NrcXVvdGU6IC9eKCB7MCwzfT4gPyhwYXJhZ3JhcGh8W15cbl0qKSg/OlxufCQpKSsvLAogICAgICAgICAgbGlzdDogL14oICopKGJ1bGwpIFtcc1xTXSs/KD86aHJ8ZGVmfFxuezIsfSg/ISApKD8hXDFidWxsIClcbip8XHMqJCkvLAogICAgICAgICAgaHRtbDogIl4gezAsM30oPzo8KHNjcmlwdHxwcmV8c3R5bGUpW1xccz5dW1xcc1xcU10qPyg/OjwvXFwxPlteXFxuXSpcXG4rfCQpfGNvbW1lbnRbXlxcbl0qKFxcbit8JCl8PFxcP1tcXHNcXFNdKj9cXD8+XFxuKnw8IVtBLVpdW1xcc1xcU10qPz5cXG4qfDwhXFxbQ0RBVEFcXFtbXFxzXFxTXSo/XFxdXFxdPlxcbip8PC8/KHRhZykoPzogK3xcXG58Lz8+KVtcXHNcXFNdKj8oPzpcXG57Mix9fCQpfDwoPyFzY3JpcHR8cHJlfHN0eWxlKShbYS16XVtcXHctXSopKD86YXR0cmlidXRlKSo/ICovPz4oPz1cXGgqXFxuKVtcXHNcXFNdKj8oPzpcXG57Mix9fCQpfDwvKD8hc2NyaXB0fHByZXxzdHlsZSlbYS16XVtcXHctXSpcXHMqPig/PVxcaCpcXG4pW1xcc1xcU10qPyg/OlxcbnsyLH18JCkpIiwKICAgICAgICAgIGRlZjogL14gezAsM31cWyhsYWJlbClcXTogKlxuPyAqPD8oW15ccz5dKyk+Pyg/Oig/OiArXG4/ICp8ICpcbiAqKSh0aXRsZSkpPyAqKD86XG4rfCQpLywKICAgICAgICAgIHRhYmxlOiBkLAogICAgICAgICAgbGhlYWRpbmc6IC9eKFteXG5dKylcbiAqKD18LSl7Mix9ICooPzpcbit8JCkvLAogICAgICAgICAgcGFyYWdyYXBoOiAvXihbXlxuXSsoPzpcbig/IWhyfGhlYWRpbmd8bGhlYWRpbmd8IHswLDN9Pnw8XC8/KD86dGFnKSg/OiArfFxufFwvPz4pfDwoPzpzY3JpcHR8cHJlfHN0eWxlfCEtLSkpW15cbl0rKSopLywKICAgICAgICAgIHRleHQ6IC9eW15cbl0rLwogICAgICAgIH07CiAgICAgICAgdi5fbGFiZWwgPSAvKD8hXHMqXF0pKD86XFxbXFtcXV18W15cW1xdXSkrLywgdi5fdGl0bGUgPSAvKD86Iig/OlxcIj98W14iXFxdKSoifCdbXidcbl0qKD86XG5bXidcbl0rKSpcbj8nfFwoW14oKV0qXCkpLywgdi5kZWYgPSBjKHYuZGVmKS5yZXBsYWNlKCJsYWJlbCIsIHYuX2xhYmVsKS5yZXBsYWNlKCJ0aXRsZSIsIHYuX3RpdGxlKS5nZXRSZWdleCgpLCB2LmJ1bGxldCA9IC8oPzpbKistXXxcZCtcLikvLCB2Lml0ZW0gPSAvXiggKikoYnVsbCkgW15cbl0qKD86XG4oPyFcMWJ1bGwgKVteXG5dKikqLywgdi5pdGVtID0gYyh2Lml0ZW0sICJnbSIpLnJlcGxhY2UoL2J1bGwvZywgdi5idWxsZXQpLmdldFJlZ2V4KCksIHYubGlzdCA9IGModi5saXN0KS5yZXBsYWNlKC9idWxsL2csIHYuYnVsbGV0KS5yZXBsYWNlKCJociIsICJcXG4rKD89XFwxPyg/Oig/Oi0gKil7Myx9fCg/Ol8gKil7Myx9fCg/OlxcKiAqKXszLH0pKD86XFxuK3wkKSkiKS5yZXBsYWNlKCJkZWYiLCAiXFxuKyg/PSIgKyB2LmRlZi5zb3VyY2UgKyAiKSIpLmdldFJlZ2V4KCksIHYuX3RhZyA9ICJhZGRyZXNzfGFydGljbGV8YXNpZGV8YmFzZXxiYXNlZm9udHxibG9ja3F1b3RlfGJvZHl8Y2FwdGlvbnxjZW50ZXJ8Y29sfGNvbGdyb3VwfGRkfGRldGFpbHN8ZGlhbG9nfGRpcnxkaXZ8ZGx8ZHR8ZmllbGRzZXR8ZmlnY2FwdGlvbnxmaWd1cmV8Zm9vdGVyfGZvcm18ZnJhbWV8ZnJhbWVzZXR8aFsxLTZdfGhlYWR8aGVhZGVyfGhyfGh0bWx8aWZyYW1lfGxlZ2VuZHxsaXxsaW5rfG1haW58bWVudXxtZW51aXRlbXxtZXRhfG5hdnxub2ZyYW1lc3xvbHxvcHRncm91cHxvcHRpb258cHxwYXJhbXxzZWN0aW9ufHNvdXJjZXxzdW1tYXJ5fHRhYmxlfHRib2R5fHRkfHRmb290fHRofHRoZWFkfHRpdGxlfHRyfHRyYWNrfHVsIiwgdi5fY29tbWVudCA9IC88IS0tKD8hLT8+KVtcc1xTXSo/LS0+Lywgdi5odG1sID0gYyh2Lmh0bWwsICJpIikucmVwbGFjZSgiY29tbWVudCIsIHYuX2NvbW1lbnQpLnJlcGxhY2UoInRhZyIsIHYuX3RhZykucmVwbGFjZSgiYXR0cmlidXRlIiwgLyArW2EtekEtWjpfXVtcdy46LV0qKD86ICo9ICoiW14iXG5dKiJ8ICo9IConW14nXG5dKid8ICo9ICpbXlxzIic9PD5gXSspPy8pLmdldFJlZ2V4KCksIHYucGFyYWdyYXBoID0gYyh2LnBhcmFncmFwaCkucmVwbGFjZSgiaHIiLCB2LmhyKS5yZXBsYWNlKCJoZWFkaW5nIiwgdi5oZWFkaW5nKS5yZXBsYWNlKCJsaGVhZGluZyIsIHYubGhlYWRpbmcpLnJlcGxhY2UoInRhZyIsIHYuX3RhZykuZ2V0UmVnZXgoKSwgdi5ibG9ja3F1b3RlID0gYyh2LmJsb2NrcXVvdGUpLnJlcGxhY2UoInBhcmFncmFwaCIsIHYucGFyYWdyYXBoKS5nZXRSZWdleCgpLCB2Lm5vcm1hbCA9IHAoe30sIHYpLCB2LmdmbSA9IHAoe30sIHYubm9ybWFsLCB7CiAgICAgICAgICBmZW5jZXM6IC9eICooYHszLH18fnszLH0pWyBcLl0qKFxTKyk/ICpcbihbXHNcU10qPylcbj8gKlwxICooPzpcbit8JCkvLAogICAgICAgICAgcGFyYWdyYXBoOiAvXi8sCiAgICAgICAgICBoZWFkaW5nOiAvXiAqKCN7MSw2fSkgKyhbXlxuXSs/KSAqIyogKig/OlxuK3wkKS8KICAgICAgICB9KSwgdi5nZm0ucGFyYWdyYXBoID0gYyh2LnBhcmFncmFwaCkucmVwbGFjZSgiKD8hIiwgIig/ISIgKyB2LmdmbS5mZW5jZXMuc291cmNlLnJlcGxhY2UoIlxcMSIsICJcXDIiKSArICJ8IiArIHYubGlzdC5zb3VyY2UucmVwbGFjZSgiXFwxIiwgIlxcMyIpICsgInwiKS5nZXRSZWdleCgpLCB2LnRhYmxlcyA9IHAoe30sIHYuZ2ZtLCB7CiAgICAgICAgICBucHRhYmxlOiAvXiAqKFtefFxuIF0uKlx8LiopXG4gKihbLTpdKyAqXHxbLXwgOl0qKSg/OlxuKCg/Oi4qW14+XG4gXS4qKD86XG58JCkpKilcbip8JCkvLAogICAgICAgICAgdGFibGU6IC9eICpcfCguKylcbiAqXHw/KCAqWy06XStbLXwgOl0qKSg/OlxuKCg/OiAqW14+XG4gXS4qKD86XG58JCkpKilcbip8JCkvCiAgICAgICAgfSksIHYucGVkYW50aWMgPSBwKHt9LCB2Lm5vcm1hbCwgewogICAgICAgICAgaHRtbDogYygiXiAqKD86Y29tbWVudCAqKD86XFxufFxccyokKXw8KHRhZylbXFxzXFxTXSs/PC9cXDE+ICooPzpcXG57Mix9fFxccyokKXw8dGFnKD86XCJbXlwiXSpcInwnW14nXSonfFxcc1teJ1wiLz5cXHNdKikqPy8/PiAqKD86XFxuezIsfXxcXHMqJCkpIikucmVwbGFjZSgiY29tbWVudCIsIHYuX2NvbW1lbnQpLnJlcGxhY2UoL3RhZy9nLCAiKD8hKD86YXxlbXxzdHJvbmd8c21hbGx8c3xjaXRlfHF8ZGZufGFiYnJ8ZGF0YXx0aW1lfGNvZGV8dmFyfHNhbXB8a2JkfHN1YnxzdXB8aXxifHV8bWFya3xydWJ5fHJ0fHJwfGJkaXxiZG98c3Bhbnxicnx3YnJ8aW5zfGRlbHxpbWcpXFxiKVxcdysoPyE6fFteXFx3XFxzQF0qQClcXGIiKS5nZXRSZWdleCgpLAogICAgICAgICAgZGVmOiAvXiAqXFsoW15cXV0rKVxdOiAqPD8oW15ccz5dKyk+Pyg/OiArKFsiKF1bXlxuXStbIildKSk/ICooPzpcbit8JCkvCiAgICAgICAgfSksIG4ucnVsZXMgPSB2LCBuLmxleCA9IGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgICAgICByZXR1cm4gbmV3IG4odCkubGV4KGUpOwogICAgICAgIH0sIG4ucHJvdG90eXBlLmxleCA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICByZXR1cm4gZSA9IGUucmVwbGFjZSgvXHJcbnxcci9nLCAiXG4iKS5yZXBsYWNlKC9cdC9nLCAiICAgICIpLnJlcGxhY2UoL1x1MDBhMC9nLCAiICIpLnJlcGxhY2UoL1x1MjQyNC9nLCAiXG4iKSwgdGhpcy50b2tlbihlLCAhMCk7CiAgICAgICAgfSwgbi5wcm90b3R5cGUudG9rZW4gPSBmdW5jdGlvbiAoZSwgdCkgewogICAgICAgICAgZSA9IGUucmVwbGFjZSgvXiArJC9nbSwgIiIpOwoKICAgICAgICAgIGZvciAodmFyIG4sIHIsIG8sIGksIGEsIHMsIGwsIGMsIHUsIGQsIHAsIGgsIGc7IGU7KSB7CiAgICAgICAgICAgIGlmICgobyA9IHRoaXMucnVsZXMubmV3bGluZS5leGVjKGUpKSAmJiAoZSA9IGUuc3Vic3RyaW5nKG9bMF0ubGVuZ3RoKSwgb1swXS5sZW5ndGggPiAxICYmIHRoaXMudG9rZW5zLnB1c2goewogICAgICAgICAgICAgIHR5cGU6ICJzcGFjZSIKICAgICAgICAgICAgfSkpLCBvID0gdGhpcy5ydWxlcy5jb2RlLmV4ZWMoZSkpIGUgPSBlLnN1YnN0cmluZyhvWzBdLmxlbmd0aCksIG8gPSBvWzBdLnJlcGxhY2UoL14gezR9L2dtLCAiIiksIHRoaXMudG9rZW5zLnB1c2goewogICAgICAgICAgICAgIHR5cGU6ICJjb2RlIiwKICAgICAgICAgICAgICB0ZXh0OiB0aGlzLm9wdGlvbnMucGVkYW50aWMgPyBvIDogby5yZXBsYWNlKC9cbiskLywgIiIpCiAgICAgICAgICAgIH0pO2Vsc2UgaWYgKG8gPSB0aGlzLnJ1bGVzLmZlbmNlcy5leGVjKGUpKSBlID0gZS5zdWJzdHJpbmcob1swXS5sZW5ndGgpLCB0aGlzLnRva2Vucy5wdXNoKHsKICAgICAgICAgICAgICB0eXBlOiAiY29kZSIsCiAgICAgICAgICAgICAgbGFuZzogb1syXSwKICAgICAgICAgICAgICB0ZXh0OiBvWzNdIHx8ICIiCiAgICAgICAgICAgIH0pO2Vsc2UgaWYgKG8gPSB0aGlzLnJ1bGVzLmhlYWRpbmcuZXhlYyhlKSkgZSA9IGUuc3Vic3RyaW5nKG9bMF0ubGVuZ3RoKSwgdGhpcy50b2tlbnMucHVzaCh7CiAgICAgICAgICAgICAgdHlwZTogImhlYWRpbmciLAogICAgICAgICAgICAgIGRlcHRoOiBvWzFdLmxlbmd0aCwKICAgICAgICAgICAgICB0ZXh0OiBvWzJdCiAgICAgICAgICAgIH0pO2Vsc2UgaWYgKHQgJiYgKG8gPSB0aGlzLnJ1bGVzLm5wdGFibGUuZXhlYyhlKSkgJiYgKHMgPSB7CiAgICAgICAgICAgICAgdHlwZTogInRhYmxlIiwKICAgICAgICAgICAgICBoZWFkZXI6IGYob1sxXS5yZXBsYWNlKC9eICp8ICpcfCAqJC9nLCAiIikpLAogICAgICAgICAgICAgIGFsaWduOiBvWzJdLnJlcGxhY2UoL14gKnxcfCAqJC9nLCAiIikuc3BsaXQoLyAqXHwgKi8pLAogICAgICAgICAgICAgIGNlbGxzOiBvWzNdID8gb1szXS5yZXBsYWNlKC9cbiQvLCAiIikuc3BsaXQoIlxuIikgOiBbXQogICAgICAgICAgICB9LCBzLmhlYWRlci5sZW5ndGggPT09IHMuYWxpZ24ubGVuZ3RoKSkgewogICAgICAgICAgICAgIGZvciAoZSA9IGUuc3Vic3RyaW5nKG9bMF0ubGVuZ3RoKSwgYyA9IDA7IGMgPCBzLmFsaWduLmxlbmd0aDsgYysrKSB7CiAgICAgICAgICAgICAgICAvXiAqLSs6ICokLy50ZXN0KHMuYWxpZ25bY10pID8gcy5hbGlnbltjXSA9ICJyaWdodCIgOiAvXiAqOi0rOiAqJC8udGVzdChzLmFsaWduW2NdKSA/IHMuYWxpZ25bY10gPSAiY2VudGVyIiA6IC9eICo6LSsgKiQvLnRlc3Qocy5hbGlnbltjXSkgPyBzLmFsaWduW2NdID0gImxlZnQiIDogcy5hbGlnbltjXSA9IG51bGw7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBmb3IgKGMgPSAwOyBjIDwgcy5jZWxscy5sZW5ndGg7IGMrKykgewogICAgICAgICAgICAgICAgcy5jZWxsc1tjXSA9IGYocy5jZWxsc1tjXSwgcy5oZWFkZXIubGVuZ3RoKTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIHRoaXMudG9rZW5zLnB1c2gocyk7CiAgICAgICAgICAgIH0gZWxzZSBpZiAobyA9IHRoaXMucnVsZXMuaHIuZXhlYyhlKSkgZSA9IGUuc3Vic3RyaW5nKG9bMF0ubGVuZ3RoKSwgdGhpcy50b2tlbnMucHVzaCh7CiAgICAgICAgICAgICAgdHlwZTogImhyIgogICAgICAgICAgICB9KTtlbHNlIGlmIChvID0gdGhpcy5ydWxlcy5ibG9ja3F1b3RlLmV4ZWMoZSkpIGUgPSBlLnN1YnN0cmluZyhvWzBdLmxlbmd0aCksIHRoaXMudG9rZW5zLnB1c2goewogICAgICAgICAgICAgIHR5cGU6ICJibG9ja3F1b3RlX3N0YXJ0IgogICAgICAgICAgICB9KSwgbyA9IG9bMF0ucmVwbGFjZSgvXiAqPiA/L2dtLCAiIiksIHRoaXMudG9rZW4obywgdCksIHRoaXMudG9rZW5zLnB1c2goewogICAgICAgICAgICAgIHR5cGU6ICJibG9ja3F1b3RlX2VuZCIKICAgICAgICAgICAgfSk7ZWxzZSBpZiAobyA9IHRoaXMucnVsZXMubGlzdC5leGVjKGUpKSB7CiAgICAgICAgICAgICAgZm9yIChlID0gZS5zdWJzdHJpbmcob1swXS5sZW5ndGgpLCBpID0gb1syXSwgcCA9IGkubGVuZ3RoID4gMSwgdGhpcy50b2tlbnMucHVzaCh7CiAgICAgICAgICAgICAgICB0eXBlOiAibGlzdF9zdGFydCIsCiAgICAgICAgICAgICAgICBvcmRlcmVkOiBwLAogICAgICAgICAgICAgICAgc3RhcnQ6IHAgPyAraSA6ICIiCiAgICAgICAgICAgICAgfSksIG8gPSBvWzBdLm1hdGNoKHRoaXMucnVsZXMuaXRlbSksIG4gPSAhMSwgZCA9IG8ubGVuZ3RoLCBjID0gMDsgYyA8IGQ7IGMrKykgewogICAgICAgICAgICAgICAgcyA9IG9bY10sIGwgPSBzLmxlbmd0aCwgcyA9IHMucmVwbGFjZSgvXiAqKFsqKy1dfFxkK1wuKSArLywgIiIpLCB+cy5pbmRleE9mKCJcbiAiKSAmJiAobCAtPSBzLmxlbmd0aCwgcyA9IHRoaXMub3B0aW9ucy5wZWRhbnRpYyA/IHMucmVwbGFjZSgvXiB7MSw0fS9nbSwgIiIpIDogcy5yZXBsYWNlKG5ldyBSZWdFeHAoIl4gezEsIiArIGwgKyAifSIsICJnbSIpLCAiIikpLCB0aGlzLm9wdGlvbnMuc21hcnRMaXN0cyAmJiBjICE9PSBkIC0gMSAmJiAoYSA9IHYuYnVsbGV0LmV4ZWMob1tjICsgMV0pWzBdLCBpID09PSBhIHx8IGkubGVuZ3RoID4gMSAmJiBhLmxlbmd0aCA+IDEgfHwgKGUgPSBvLnNsaWNlKGMgKyAxKS5qb2luKCJcbiIpICsgZSwgYyA9IGQgLSAxKSksIHIgPSBuIHx8IC9cblxuKD8hXHMqJCkvLnRlc3QocyksIGMgIT09IGQgLSAxICYmIChuID0gIlxuIiA9PT0gcy5jaGFyQXQocy5sZW5ndGggLSAxKSwgciB8fCAociA9IG4pKSwgaCA9IC9eXFtbIHhYXVxdIC8udGVzdChzKSwgZyA9IHZvaWQgMCwgaCAmJiAoZyA9ICIgIiAhPT0gc1sxXSwgcyA9IHMucmVwbGFjZSgvXlxbWyB4WF1cXSArLywgIiIpKSwgdGhpcy50b2tlbnMucHVzaCh7CiAgICAgICAgICAgICAgICAgIHR5cGU6IHIgPyAibG9vc2VfaXRlbV9zdGFydCIgOiAibGlzdF9pdGVtX3N0YXJ0IiwKICAgICAgICAgICAgICAgICAgdGFzazogaCwKICAgICAgICAgICAgICAgICAgY2hlY2tlZDogZwogICAgICAgICAgICAgICAgfSksIHRoaXMudG9rZW4ocywgITEpLCB0aGlzLnRva2Vucy5wdXNoKHsKICAgICAgICAgICAgICAgICAgdHlwZTogImxpc3RfaXRlbV9lbmQiCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIHRoaXMudG9rZW5zLnB1c2goewogICAgICAgICAgICAgICAgdHlwZTogImxpc3RfZW5kIgogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9IGVsc2UgaWYgKG8gPSB0aGlzLnJ1bGVzLmh0bWwuZXhlYyhlKSkgZSA9IGUuc3Vic3RyaW5nKG9bMF0ubGVuZ3RoKSwgdGhpcy50b2tlbnMucHVzaCh7CiAgICAgICAgICAgICAgdHlwZTogdGhpcy5vcHRpb25zLnNhbml0aXplID8gInBhcmFncmFwaCIgOiAiaHRtbCIsCiAgICAgICAgICAgICAgcHJlOiAhdGhpcy5vcHRpb25zLnNhbml0aXplciAmJiAoInByZSIgPT09IG9bMV0gfHwgInNjcmlwdCIgPT09IG9bMV0gfHwgInN0eWxlIiA9PT0gb1sxXSksCiAgICAgICAgICAgICAgdGV4dDogb1swXQogICAgICAgICAgICB9KTtlbHNlIGlmICh0ICYmIChvID0gdGhpcy5ydWxlcy5kZWYuZXhlYyhlKSkpIGUgPSBlLnN1YnN0cmluZyhvWzBdLmxlbmd0aCksIG9bM10gJiYgKG9bM10gPSBvWzNdLnN1YnN0cmluZygxLCBvWzNdLmxlbmd0aCAtIDEpKSwgdSA9IG9bMV0udG9Mb3dlckNhc2UoKS5yZXBsYWNlKC9ccysvZywgIiAiKSwgdGhpcy50b2tlbnMubGlua3NbdV0gfHwgKHRoaXMudG9rZW5zLmxpbmtzW3VdID0gewogICAgICAgICAgICAgIGhyZWY6IG9bMl0sCiAgICAgICAgICAgICAgdGl0bGU6IG9bM10KICAgICAgICAgICAgfSk7ZWxzZSBpZiAodCAmJiAobyA9IHRoaXMucnVsZXMudGFibGUuZXhlYyhlKSkgJiYgKHMgPSB7CiAgICAgICAgICAgICAgdHlwZTogInRhYmxlIiwKICAgICAgICAgICAgICBoZWFkZXI6IGYob1sxXS5yZXBsYWNlKC9eICp8ICpcfCAqJC9nLCAiIikpLAogICAgICAgICAgICAgIGFsaWduOiBvWzJdLnJlcGxhY2UoL14gKnxcfCAqJC9nLCAiIikuc3BsaXQoLyAqXHwgKi8pLAogICAgICAgICAgICAgIGNlbGxzOiBvWzNdID8gb1szXS5yZXBsYWNlKC8oPzogKlx8ICopP1xuJC8sICIiKS5zcGxpdCgiXG4iKSA6IFtdCiAgICAgICAgICAgIH0sIHMuaGVhZGVyLmxlbmd0aCA9PT0gcy5hbGlnbi5sZW5ndGgpKSB7CiAgICAgICAgICAgICAgZm9yIChlID0gZS5zdWJzdHJpbmcob1swXS5sZW5ndGgpLCBjID0gMDsgYyA8IHMuYWxpZ24ubGVuZ3RoOyBjKyspIHsKICAgICAgICAgICAgICAgIC9eICotKzogKiQvLnRlc3Qocy5hbGlnbltjXSkgPyBzLmFsaWduW2NdID0gInJpZ2h0IiA6IC9eICo6LSs6ICokLy50ZXN0KHMuYWxpZ25bY10pID8gcy5hbGlnbltjXSA9ICJjZW50ZXIiIDogL14gKjotKyAqJC8udGVzdChzLmFsaWduW2NdKSA/IHMuYWxpZ25bY10gPSAibGVmdCIgOiBzLmFsaWduW2NdID0gbnVsbDsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGZvciAoYyA9IDA7IGMgPCBzLmNlbGxzLmxlbmd0aDsgYysrKSB7CiAgICAgICAgICAgICAgICBzLmNlbGxzW2NdID0gZihzLmNlbGxzW2NdLnJlcGxhY2UoL14gKlx8ICp8ICpcfCAqJC9nLCAiIiksIHMuaGVhZGVyLmxlbmd0aCk7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICB0aGlzLnRva2Vucy5wdXNoKHMpOwogICAgICAgICAgICB9IGVsc2UgaWYgKG8gPSB0aGlzLnJ1bGVzLmxoZWFkaW5nLmV4ZWMoZSkpIGUgPSBlLnN1YnN0cmluZyhvWzBdLmxlbmd0aCksIHRoaXMudG9rZW5zLnB1c2goewogICAgICAgICAgICAgIHR5cGU6ICJoZWFkaW5nIiwKICAgICAgICAgICAgICBkZXB0aDogIj0iID09PSBvWzJdID8gMSA6IDIsCiAgICAgICAgICAgICAgdGV4dDogb1sxXQogICAgICAgICAgICB9KTtlbHNlIGlmICh0ICYmIChvID0gdGhpcy5ydWxlcy5wYXJhZ3JhcGguZXhlYyhlKSkpIGUgPSBlLnN1YnN0cmluZyhvWzBdLmxlbmd0aCksIHRoaXMudG9rZW5zLnB1c2goewogICAgICAgICAgICAgIHR5cGU6ICJwYXJhZ3JhcGgiLAogICAgICAgICAgICAgIHRleHQ6ICJcbiIgPT09IG9bMV0uY2hhckF0KG9bMV0ubGVuZ3RoIC0gMSkgPyBvWzFdLnNsaWNlKDAsIC0xKSA6IG9bMV0KICAgICAgICAgICAgfSk7ZWxzZSBpZiAobyA9IHRoaXMucnVsZXMudGV4dC5leGVjKGUpKSBlID0gZS5zdWJzdHJpbmcob1swXS5sZW5ndGgpLCB0aGlzLnRva2Vucy5wdXNoKHsKICAgICAgICAgICAgICB0eXBlOiAidGV4dCIsCiAgICAgICAgICAgICAgdGV4dDogb1swXQogICAgICAgICAgICB9KTtlbHNlIGlmIChlKSB0aHJvdyBuZXcgRXJyb3IoIkluZmluaXRlIGxvb3Agb24gYnl0ZTogIiArIGUuY2hhckNvZGVBdCgwKSk7CiAgICAgICAgICB9CgogICAgICAgICAgcmV0dXJuIHRoaXMudG9rZW5zOwogICAgICAgIH07CiAgICAgICAgdmFyIGcgPSB7CiAgICAgICAgICBlc2NhcGU6IC9eXFwoWyEiIyQlJicoKSorLFwtLi86Ozw9Pj9AXFtcXVxcXl9ge3x9fl0pLywKICAgICAgICAgIGF1dG9saW5rOiAvXjwoc2NoZW1lOlteXHNceDAwLVx4MWY8Pl0qfGVtYWlsKT4vLAogICAgICAgICAgdXJsOiBkLAogICAgICAgICAgdGFnOiAiXmNvbW1lbnR8XjwvW2EtekEtWl1bXFx3Oi1dKlxccyo+fF48W2EtekEtWl1bXFx3LV0qKD86YXR0cmlidXRlKSo/XFxzKi8/PnxePFxcP1tcXHNcXFNdKj9cXD8+fF48IVthLXpBLVpdK1xcc1tcXHNcXFNdKj8+fF48IVxcW0NEQVRBXFxbW1xcc1xcU10qP1xcXVxcXT4iLAogICAgICAgICAgbGluazogL14hP1xbKGxhYmVsKVxdXChocmVmKD86XHMrKHRpdGxlKSk/XHMqXCkvLAogICAgICAgICAgcmVmbGluazogL14hP1xbKGxhYmVsKVxdXFsoPyFccypcXSkoKD86XFxbXFtcXV0/fFteXFtcXVxcXSkrKVxdLywKICAgICAgICAgIG5vbGluazogL14hP1xbKD8hXHMqXF0pKCg/OlxbW15cW1xdXSpcXXxcXFtcW1xdXXxbXlxbXF1dKSopXF0oPzpcW1xdKT8vLAogICAgICAgICAgc3Ryb25nOiAvXl9fKFteXHNdW1xzXFNdKj9bXlxzXSlfXyg/IV8pfF5cKlwqKFteXHNdW1xzXFNdKj9bXlxzXSlcKlwqKD8hXCopfF5fXyhbXlxzXSlfXyg/IV8pfF5cKlwqKFteXHNdKVwqXCooPyFcKikvLAogICAgICAgICAgZW06IC9eXyhbXlxzXVtcc1xTXSo/W15cc19dKV8oPyFfKXxeXyhbXlxzX11bXHNcU10qP1teXHNdKV8oPyFfKXxeXCooW15cc11bXHNcU10qP1teXHMqXSlcKig/IVwqKXxeXCooW15ccypdW1xzXFNdKj9bXlxzXSlcKig/IVwqKXxeXyhbXlxzX10pXyg/IV8pfF5cKihbXlxzKl0pXCooPyFcKikvLAogICAgICAgICAgY29kZTogL14oYCspXHMqKFtcc1xTXSo/W15gXT8pXHMqXDEoPyFgKS8sCiAgICAgICAgICBicjogL14gezIsfVxuKD8hXHMqJCkvLAogICAgICAgICAgZGVsOiBkLAogICAgICAgICAgdGV4dDogL15bXHNcU10rPyg/PVtcXDwhXFtgKl18XGJffCB7Mix9XG58JCkvCiAgICAgICAgfTsKICAgICAgICBnLl9lc2NhcGVzID0gL1xcKFshIiMkJSYnKCkqKyxcLS4vOjs8PT4/QFxbXF1cXF5fYHt8fX5dKS9nLCBnLl9zY2hlbWUgPSAvW2EtekEtWl1bYS16QS1aMC05Ky4tXXsxLDMxfS8sIGcuX2VtYWlsID0gL1thLXpBLVowLTkuISMkJSYnKisvPT9eX2B7fH1+LV0rKEApW2EtekEtWjAtOV0oPzpbYS16QS1aMC05LV17MCw2MX1bYS16QS1aMC05XSk/KD86XC5bYS16QS1aMC05XSg/OlthLXpBLVowLTktXXswLDYxfVthLXpBLVowLTldKT8pKyg/IVstX10pLywgZy5hdXRvbGluayA9IGMoZy5hdXRvbGluaykucmVwbGFjZSgic2NoZW1lIiwgZy5fc2NoZW1lKS5yZXBsYWNlKCJlbWFpbCIsIGcuX2VtYWlsKS5nZXRSZWdleCgpLCBnLl9hdHRyaWJ1dGUgPSAvXHMrW2EtekEtWjpfXVtcdy46LV0qKD86XHMqPVxzKiJbXiJdKiJ8XHMqPVxzKidbXiddKid8XHMqPVxzKlteXHMiJz08PmBdKyk/LywgZy50YWcgPSBjKGcudGFnKS5yZXBsYWNlKCJjb21tZW50Iiwgdi5fY29tbWVudCkucmVwbGFjZSgiYXR0cmlidXRlIiwgZy5fYXR0cmlidXRlKS5nZXRSZWdleCgpLCBnLl9sYWJlbCA9IC8oPzpcW1teXFtcXV0qXF18XFxbXFtcXV0/fGBbXmBdKmB8W15cW1xdXFxdKSo/LywgZy5faHJlZiA9IC9ccyooPCg/OlxcWzw+XT98W15cczw+XFxdKSo+fCg/OlxcWygpXT98XChbXlxzXHgwMC1ceDFmKClcXF0qXCl8W15cc1x4MDAtXHgxZigpXFxdKSo/KS8sIGcuX3RpdGxlID0gLyIoPzpcXCI/fFteIlxcXSkqInwnKD86XFwnP3xbXidcXF0pKid8XCgoPzpcXFwpP3xbXilcXF0pKlwpLywgZy5saW5rID0gYyhnLmxpbmspLnJlcGxhY2UoImxhYmVsIiwgZy5fbGFiZWwpLnJlcGxhY2UoImhyZWYiLCBnLl9ocmVmKS5yZXBsYWNlKCJ0aXRsZSIsIGcuX3RpdGxlKS5nZXRSZWdleCgpLCBnLnJlZmxpbmsgPSBjKGcucmVmbGluaykucmVwbGFjZSgibGFiZWwiLCBnLl9sYWJlbCkuZ2V0UmVnZXgoKSwgZy5ub3JtYWwgPSBwKHt9LCBnKSwgZy5wZWRhbnRpYyA9IHAoe30sIGcubm9ybWFsLCB7CiAgICAgICAgICBzdHJvbmc6IC9eX18oPz1cUykoW1xzXFNdKj9cUylfXyg/IV8pfF5cKlwqKD89XFMpKFtcc1xTXSo/XFMpXCpcKig/IVwqKS8sCiAgICAgICAgICBlbTogL15fKD89XFMpKFtcc1xTXSo/XFMpXyg/IV8pfF5cKig/PVxTKShbXHNcU10qP1xTKVwqKD8hXCopLywKICAgICAgICAgIGxpbms6IGMoL14hP1xbKGxhYmVsKVxdXCgoLio/KVwpLykucmVwbGFjZSgibGFiZWwiLCBnLl9sYWJlbCkuZ2V0UmVnZXgoKSwKICAgICAgICAgIHJlZmxpbms6IGMoL14hP1xbKGxhYmVsKVxdXHMqXFsoW15cXV0qKVxdLykucmVwbGFjZSgibGFiZWwiLCBnLl9sYWJlbCkuZ2V0UmVnZXgoKQogICAgICAgIH0pLCBnLmdmbSA9IHAoe30sIGcubm9ybWFsLCB7CiAgICAgICAgICBlc2NhcGU6IGMoZy5lc2NhcGUpLnJlcGxhY2UoIl0pIiwgIn58XSkiKS5nZXRSZWdleCgpLAogICAgICAgICAgdXJsOiBjKC9eKCg/OmZ0cHxodHRwcz8pOlwvXC98d3d3XC4pKD86W2EtekEtWjAtOVwtXStcLj8pK1teXHM8XSp8XmVtYWlsLykucmVwbGFjZSgiZW1haWwiLCBnLl9lbWFpbCkuZ2V0UmVnZXgoKSwKICAgICAgICAgIF9iYWNrcGVkYWw6IC8oPzpbXj8hLiw6OypffigpJl0rfFwoW14pXSpcKXwmKD8hW2EtekEtWjAtOV0rOyQpfFs/IS4sOjsqX34pXSsoPyEkKSkrLywKICAgICAgICAgIGRlbDogL15+fig/PVxTKShbXHNcU10qP1xTKX5+LywKICAgICAgICAgIHRleHQ6IGMoZy50ZXh0KS5yZXBsYWNlKCJdfCIsICJ+XXwiKS5yZXBsYWNlKCJ8IiwgInxodHRwcz86Ly98ZnRwOi8vfHd3d1xcLnxbYS16QS1aMC05LiEjJCUmJyorLz0/Xl9ge1xcfH1+LV0rQHwiKS5nZXRSZWdleCgpCiAgICAgICAgfSksIGcuYnJlYWtzID0gcCh7fSwgZy5nZm0sIHsKICAgICAgICAgIGJyOiBjKGcuYnIpLnJlcGxhY2UoInsyLH0iLCAiKiIpLmdldFJlZ2V4KCksCiAgICAgICAgICB0ZXh0OiBjKGcuZ2ZtLnRleHQpLnJlcGxhY2UoInsyLH0iLCAiKiIpLmdldFJlZ2V4KCkKICAgICAgICB9KSwgci5ydWxlcyA9IGcsIHIub3V0cHV0ID0gZnVuY3Rpb24gKGUsIHQsIG4pIHsKICAgICAgICAgIHJldHVybiBuZXcgcih0LCBuKS5vdXRwdXQoZSk7CiAgICAgICAgfSwgci5wcm90b3R5cGUub3V0cHV0ID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICAgIGZvciAodmFyIHQsIG4sIG8sIGksIGEsIGwgPSAiIjsgZTspIHsKICAgICAgICAgICAgaWYgKGEgPSB0aGlzLnJ1bGVzLmVzY2FwZS5leGVjKGUpKSBlID0gZS5zdWJzdHJpbmcoYVswXS5sZW5ndGgpLCBsICs9IGFbMV07ZWxzZSBpZiAoYSA9IHRoaXMucnVsZXMuYXV0b2xpbmsuZXhlYyhlKSkgZSA9IGUuc3Vic3RyaW5nKGFbMF0ubGVuZ3RoKSwgIkAiID09PSBhWzJdID8gKG4gPSBzKHRoaXMubWFuZ2xlKGFbMV0pKSwgbyA9ICJtYWlsdG86IiArIG4pIDogKG4gPSBzKGFbMV0pLCBvID0gbiksIGwgKz0gdGhpcy5yZW5kZXJlci5saW5rKG8sIG51bGwsIG4pO2Vsc2UgaWYgKHRoaXMuaW5MaW5rIHx8ICEoYSA9IHRoaXMucnVsZXMudXJsLmV4ZWMoZSkpKSB7CiAgICAgICAgICAgICAgaWYgKGEgPSB0aGlzLnJ1bGVzLnRhZy5leGVjKGUpKSAhdGhpcy5pbkxpbmsgJiYgL148YSAvaS50ZXN0KGFbMF0pID8gdGhpcy5pbkxpbmsgPSAhMCA6IHRoaXMuaW5MaW5rICYmIC9ePFwvYT4vaS50ZXN0KGFbMF0pICYmICh0aGlzLmluTGluayA9ICExKSwgZSA9IGUuc3Vic3RyaW5nKGFbMF0ubGVuZ3RoKSwgbCArPSB0aGlzLm9wdGlvbnMuc2FuaXRpemUgPyB0aGlzLm9wdGlvbnMuc2FuaXRpemVyID8gdGhpcy5vcHRpb25zLnNhbml0aXplcihhWzBdKSA6IHMoYVswXSkgOiBhWzBdO2Vsc2UgaWYgKGEgPSB0aGlzLnJ1bGVzLmxpbmsuZXhlYyhlKSkgZSA9IGUuc3Vic3RyaW5nKGFbMF0ubGVuZ3RoKSwgdGhpcy5pbkxpbmsgPSAhMCwgbyA9IGFbMl0sIHRoaXMub3B0aW9ucy5wZWRhbnRpYyA/ICh0ID0gL14oW14nIl0qW15cc10pXHMrKFsnIl0pKC4qKVwyLy5leGVjKG8pLCB0ID8gKG8gPSB0WzFdLCBpID0gdFszXSkgOiBpID0gIiIpIDogaSA9IGFbM10gPyBhWzNdLnNsaWNlKDEsIC0xKSA6ICIiLCBvID0gby50cmltKCkucmVwbGFjZSgvXjwoW1xzXFNdKik+JC8sICIkMSIpLCBsICs9IHRoaXMub3V0cHV0TGluayhhLCB7CiAgICAgICAgICAgICAgICBocmVmOiByLmVzY2FwZXMobyksCiAgICAgICAgICAgICAgICB0aXRsZTogci5lc2NhcGVzKGkpCiAgICAgICAgICAgICAgfSksIHRoaXMuaW5MaW5rID0gITE7ZWxzZSBpZiAoKGEgPSB0aGlzLnJ1bGVzLnJlZmxpbmsuZXhlYyhlKSkgfHwgKGEgPSB0aGlzLnJ1bGVzLm5vbGluay5leGVjKGUpKSkgewogICAgICAgICAgICAgICAgaWYgKGUgPSBlLnN1YnN0cmluZyhhWzBdLmxlbmd0aCksIHQgPSAoYVsyXSB8fCBhWzFdKS5yZXBsYWNlKC9ccysvZywgIiAiKSwgISh0ID0gdGhpcy5saW5rc1t0LnRvTG93ZXJDYXNlKCldKSB8fCAhdC5ocmVmKSB7CiAgICAgICAgICAgICAgICAgIGwgKz0gYVswXS5jaGFyQXQoMCksIGUgPSBhWzBdLnN1YnN0cmluZygxKSArIGU7CiAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHRoaXMuaW5MaW5rID0gITAsIGwgKz0gdGhpcy5vdXRwdXRMaW5rKGEsIHQpLCB0aGlzLmluTGluayA9ICExOwogICAgICAgICAgICAgIH0gZWxzZSBpZiAoYSA9IHRoaXMucnVsZXMuc3Ryb25nLmV4ZWMoZSkpIGUgPSBlLnN1YnN0cmluZyhhWzBdLmxlbmd0aCksIGwgKz0gdGhpcy5yZW5kZXJlci5zdHJvbmcodGhpcy5vdXRwdXQoYVs0XSB8fCBhWzNdIHx8IGFbMl0gfHwgYVsxXSkpO2Vsc2UgaWYgKGEgPSB0aGlzLnJ1bGVzLmVtLmV4ZWMoZSkpIGUgPSBlLnN1YnN0cmluZyhhWzBdLmxlbmd0aCksIGwgKz0gdGhpcy5yZW5kZXJlci5lbSh0aGlzLm91dHB1dChhWzZdIHx8IGFbNV0gfHwgYVs0XSB8fCBhWzNdIHx8IGFbMl0gfHwgYVsxXSkpO2Vsc2UgaWYgKGEgPSB0aGlzLnJ1bGVzLmNvZGUuZXhlYyhlKSkgZSA9IGUuc3Vic3RyaW5nKGFbMF0ubGVuZ3RoKSwgbCArPSB0aGlzLnJlbmRlcmVyLmNvZGVzcGFuKHMoYVsyXS50cmltKCksICEwKSk7ZWxzZSBpZiAoYSA9IHRoaXMucnVsZXMuYnIuZXhlYyhlKSkgZSA9IGUuc3Vic3RyaW5nKGFbMF0ubGVuZ3RoKSwgbCArPSB0aGlzLnJlbmRlcmVyLmJyKCk7ZWxzZSBpZiAoYSA9IHRoaXMucnVsZXMuZGVsLmV4ZWMoZSkpIGUgPSBlLnN1YnN0cmluZyhhWzBdLmxlbmd0aCksIGwgKz0gdGhpcy5yZW5kZXJlci5kZWwodGhpcy5vdXRwdXQoYVsxXSkpO2Vsc2UgaWYgKGEgPSB0aGlzLnJ1bGVzLnRleHQuZXhlYyhlKSkgZSA9IGUuc3Vic3RyaW5nKGFbMF0ubGVuZ3RoKSwgbCArPSB0aGlzLnJlbmRlcmVyLnRleHQocyh0aGlzLnNtYXJ0eXBhbnRzKGFbMF0pKSk7ZWxzZSBpZiAoZSkgdGhyb3cgbmV3IEVycm9yKCJJbmZpbml0ZSBsb29wIG9uIGJ5dGU6ICIgKyBlLmNoYXJDb2RlQXQoMCkpOwogICAgICAgICAgICB9IGVsc2UgYVswXSA9IHRoaXMucnVsZXMuX2JhY2twZWRhbC5leGVjKGFbMF0pWzBdLCBlID0gZS5zdWJzdHJpbmcoYVswXS5sZW5ndGgpLCAiQCIgPT09IGFbMl0gPyAobiA9IHMoYVswXSksIG8gPSAibWFpbHRvOiIgKyBuKSA6IChuID0gcyhhWzBdKSwgbyA9ICJ3d3cuIiA9PT0gYVsxXSA/ICJodHRwOi8vIiArIG4gOiBuKSwgbCArPSB0aGlzLnJlbmRlcmVyLmxpbmsobywgbnVsbCwgbik7CiAgICAgICAgICB9CgogICAgICAgICAgcmV0dXJuIGw7CiAgICAgICAgfSwgci5lc2NhcGVzID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICAgIHJldHVybiBlID8gZS5yZXBsYWNlKHIucnVsZXMuX2VzY2FwZXMsICIkMSIpIDogZTsKICAgICAgICB9LCByLnByb3RvdHlwZS5vdXRwdXRMaW5rID0gZnVuY3Rpb24gKGUsIHQpIHsKICAgICAgICAgIHZhciBuID0gdC5ocmVmLAogICAgICAgICAgICAgIHIgPSB0LnRpdGxlID8gcyh0LnRpdGxlKSA6IG51bGw7CiAgICAgICAgICByZXR1cm4gIiEiICE9PSBlWzBdLmNoYXJBdCgwKSA/IHRoaXMucmVuZGVyZXIubGluayhuLCByLCB0aGlzLm91dHB1dChlWzFdKSkgOiB0aGlzLnJlbmRlcmVyLmltYWdlKG4sIHIsIHMoZVsxXSkpOwogICAgICAgIH0sIHIucHJvdG90eXBlLnNtYXJ0eXBhbnRzID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICAgIHJldHVybiB0aGlzLm9wdGlvbnMuc21hcnR5cGFudHMgPyBlLnJlcGxhY2UoLy0tLS9nLCAi4oCUIikucmVwbGFjZSgvLS0vZywgIuKAkyIpLnJlcGxhY2UoLyhefFstXHUyMDE0LyhcW3siXHNdKScvZywgIiQx4oCYIikucmVwbGFjZSgvJy9nLCAi4oCZIikucmVwbGFjZSgvKF58Wy1cdTIwMTQvKFxbe1x1MjAxOFxzXSkiL2csICIkMeKAnCIpLnJlcGxhY2UoLyIvZywgIuKAnSIpLnJlcGxhY2UoL1wuezN9L2csICLigKYiKSA6IGU7CiAgICAgICAgfSwgci5wcm90b3R5cGUubWFuZ2xlID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICAgIGlmICghdGhpcy5vcHRpb25zLm1hbmdsZSkgcmV0dXJuIGU7CgogICAgICAgICAgZm9yICh2YXIgdCwgbiA9ICIiLCByID0gZS5sZW5ndGgsIG8gPSAwOyBvIDwgcjsgbysrKSB7CiAgICAgICAgICAgIHQgPSBlLmNoYXJDb2RlQXQobyksIE1hdGgucmFuZG9tKCkgPiAuNSAmJiAodCA9ICJ4IiArIHQudG9TdHJpbmcoMTYpKSwgbiArPSAiJiMiICsgdCArICI7IjsKICAgICAgICAgIH0KCiAgICAgICAgICByZXR1cm4gbjsKICAgICAgICB9LCBvLnByb3RvdHlwZS5jb2RlID0gZnVuY3Rpb24gKGUsIHQsIG4pIHsKICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMuaGlnaGxpZ2h0KSB7CiAgICAgICAgICAgIHZhciByID0gdGhpcy5vcHRpb25zLmhpZ2hsaWdodChlLCB0KTsKICAgICAgICAgICAgbnVsbCAhPSByICYmIHIgIT09IGUgJiYgKG4gPSAhMCwgZSA9IHIpOwogICAgICAgICAgfQoKICAgICAgICAgIHJldHVybiB0ID8gJzxwcmU+PGNvZGUgY2xhc3M9IicgKyB0aGlzLm9wdGlvbnMubGFuZ1ByZWZpeCArIHModCwgITApICsgJyI+JyArIChuID8gZSA6IHMoZSwgITApKSArICI8L2NvZGU+PC9wcmU+XG4iIDogIjxwcmU+PGNvZGU+IiArIChuID8gZSA6IHMoZSwgITApKSArICI8L2NvZGU+PC9wcmU+IjsKICAgICAgICB9LCBvLnByb3RvdHlwZS5ibG9ja3F1b3RlID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICAgIHJldHVybiAiPGJsb2NrcXVvdGU+XG4iICsgZSArICI8L2Jsb2NrcXVvdGU+XG4iOwogICAgICAgIH0sIG8ucHJvdG90eXBlLmh0bWwgPSBmdW5jdGlvbiAoZSkgewogICAgICAgICAgcmV0dXJuIGU7CiAgICAgICAgfSwgby5wcm90b3R5cGUuaGVhZGluZyA9IGZ1bmN0aW9uIChlLCB0LCBuKSB7CiAgICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25zLmhlYWRlcklkcyA/ICI8aCIgKyB0ICsgJyBpZD0iJyArIHRoaXMub3B0aW9ucy5oZWFkZXJQcmVmaXggKyBuLnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvW15cd10rL2csICItIikgKyAnIj4nICsgZSArICI8L2giICsgdCArICI+XG4iIDogIjxoIiArIHQgKyAiPiIgKyBlICsgIjwvaCIgKyB0ICsgIj5cbiI7CiAgICAgICAgfSwgby5wcm90b3R5cGUuaHIgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25zLnhodG1sID8gIjxoci8+XG4iIDogIjxocj5cbiI7CiAgICAgICAgfSwgby5wcm90b3R5cGUubGlzdCA9IGZ1bmN0aW9uIChlLCB0LCBuKSB7CiAgICAgICAgICB2YXIgciA9IHQgPyAib2wiIDogInVsIjsKICAgICAgICAgIHJldHVybiAiPCIgKyByICsgKHQgJiYgMSAhPT0gbiA/ICcgc3RhcnQ9IicgKyBuICsgJyInIDogIiIpICsgIj5cbiIgKyBlICsgIjwvIiArIHIgKyAiPlxuIjsKICAgICAgICB9LCBvLnByb3RvdHlwZS5saXN0aXRlbSA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICByZXR1cm4gIjxsaT4iICsgZSArICI8L2xpPlxuIjsKICAgICAgICB9LCBvLnByb3RvdHlwZS5jaGVja2JveCA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICByZXR1cm4gIjxpbnB1dCAiICsgKGUgPyAnY2hlY2tlZD0iIiAnIDogIiIpICsgJ2Rpc2FibGVkPSIiIHR5cGU9ImNoZWNrYm94IicgKyAodGhpcy5vcHRpb25zLnhodG1sID8gIiAvIiA6ICIiKSArICI+ICI7CiAgICAgICAgfSwgby5wcm90b3R5cGUucGFyYWdyYXBoID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICAgIHJldHVybiAiPHA+IiArIGUgKyAiPC9wPlxuIjsKICAgICAgICB9LCBvLnByb3RvdHlwZS50YWJsZSA9IGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgICAgICByZXR1cm4gdCAmJiAodCA9ICI8dGJvZHk+IiArIHQgKyAiPC90Ym9keT4iKSwgIjx0YWJsZT5cbjx0aGVhZD5cbiIgKyBlICsgIjwvdGhlYWQ+XG4iICsgdCArICI8L3RhYmxlPlxuIjsKICAgICAgICB9LCBvLnByb3RvdHlwZS50YWJsZXJvdyA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICByZXR1cm4gIjx0cj5cbiIgKyBlICsgIjwvdHI+XG4iOwogICAgICAgIH0sIG8ucHJvdG90eXBlLnRhYmxlY2VsbCA9IGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgICAgICB2YXIgbiA9IHQuaGVhZGVyID8gInRoIiA6ICJ0ZCI7CiAgICAgICAgICByZXR1cm4gKHQuYWxpZ24gPyAiPCIgKyBuICsgJyBhbGlnbj0iJyArIHQuYWxpZ24gKyAnIj4nIDogIjwiICsgbiArICI+IikgKyBlICsgIjwvIiArIG4gKyAiPlxuIjsKICAgICAgICB9LCBvLnByb3RvdHlwZS5zdHJvbmcgPSBmdW5jdGlvbiAoZSkgewogICAgICAgICAgcmV0dXJuICI8c3Ryb25nPiIgKyBlICsgIjwvc3Ryb25nPiI7CiAgICAgICAgfSwgby5wcm90b3R5cGUuZW0gPSBmdW5jdGlvbiAoZSkgewogICAgICAgICAgcmV0dXJuICI8ZW0+IiArIGUgKyAiPC9lbT4iOwogICAgICAgIH0sIG8ucHJvdG90eXBlLmNvZGVzcGFuID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICAgIHJldHVybiAiPGNvZGU+IiArIGUgKyAiPC9jb2RlPiI7CiAgICAgICAgfSwgby5wcm90b3R5cGUuYnIgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25zLnhodG1sID8gIjxici8+IiA6ICI8YnI+IjsKICAgICAgICB9LCBvLnByb3RvdHlwZS5kZWwgPSBmdW5jdGlvbiAoZSkgewogICAgICAgICAgcmV0dXJuICI8ZGVsPiIgKyBlICsgIjwvZGVsPiI7CiAgICAgICAgfSwgby5wcm90b3R5cGUubGluayA9IGZ1bmN0aW9uIChlLCB0LCBuKSB7CiAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLnNhbml0aXplKSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgdmFyIHIgPSBkZWNvZGVVUklDb21wb25lbnQobChlKSkucmVwbGFjZSgvW15cdzpdL2csICIiKS50b0xvd2VyQ2FzZSgpOwogICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgcmV0dXJuIG47CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmICgwID09PSByLmluZGV4T2YoImphdmFzY3JpcHQ6IikgfHwgMCA9PT0gci5pbmRleE9mKCJ2YnNjcmlwdDoiKSB8fCAwID09PSByLmluZGV4T2YoImRhdGE6IikpIHJldHVybiBuOwogICAgICAgICAgfQoKICAgICAgICAgIHRoaXMub3B0aW9ucy5iYXNlVXJsICYmICF5LnRlc3QoZSkgJiYgKGUgPSB1KHRoaXMub3B0aW9ucy5iYXNlVXJsLCBlKSk7CgogICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgZSA9IGVuY29kZVVSSShlKS5yZXBsYWNlKC8lMjUvZywgIiUiKTsKICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgcmV0dXJuIG47CiAgICAgICAgICB9CgogICAgICAgICAgdmFyIG8gPSAnPGEgaHJlZj0iJyArIHMoZSkgKyAnIic7CiAgICAgICAgICByZXR1cm4gdCAmJiAobyArPSAnIHRpdGxlPSInICsgdCArICciJyksIG8gKz0gIj4iICsgbiArICI8L2E+IjsKICAgICAgICB9LCBvLnByb3RvdHlwZS5pbWFnZSA9IGZ1bmN0aW9uIChlLCB0LCBuKSB7CiAgICAgICAgICB0aGlzLm9wdGlvbnMuYmFzZVVybCAmJiAheS50ZXN0KGUpICYmIChlID0gdSh0aGlzLm9wdGlvbnMuYmFzZVVybCwgZSkpOwogICAgICAgICAgdmFyIHIgPSAnPGltZyBzcmM9IicgKyBlICsgJyIgYWx0PSInICsgbiArICciJzsKICAgICAgICAgIHJldHVybiB0ICYmIChyICs9ICcgdGl0bGU9IicgKyB0ICsgJyInKSwgciArPSB0aGlzLm9wdGlvbnMueGh0bWwgPyAiLz4iIDogIj4iOwogICAgICAgIH0sIG8ucHJvdG90eXBlLnRleHQgPSBmdW5jdGlvbiAoZSkgewogICAgICAgICAgcmV0dXJuIGU7CiAgICAgICAgfSwgaS5wcm90b3R5cGUuc3Ryb25nID0gaS5wcm90b3R5cGUuZW0gPSBpLnByb3RvdHlwZS5jb2Rlc3BhbiA9IGkucHJvdG90eXBlLmRlbCA9IGkucHJvdG90eXBlLnRleHQgPSBmdW5jdGlvbiAoZSkgewogICAgICAgICAgcmV0dXJuIGU7CiAgICAgICAgfSwgaS5wcm90b3R5cGUubGluayA9IGkucHJvdG90eXBlLmltYWdlID0gZnVuY3Rpb24gKGUsIHQsIG4pIHsKICAgICAgICAgIHJldHVybiAiIiArIG47CiAgICAgICAgfSwgaS5wcm90b3R5cGUuYnIgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICByZXR1cm4gIiI7CiAgICAgICAgfSwgYS5wYXJzZSA9IGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgICAgICByZXR1cm4gbmV3IGEodCkucGFyc2UoZSk7CiAgICAgICAgfSwgYS5wcm90b3R5cGUucGFyc2UgPSBmdW5jdGlvbiAoZSkgewogICAgICAgICAgdGhpcy5pbmxpbmUgPSBuZXcgcihlLmxpbmtzLCB0aGlzLm9wdGlvbnMpLCB0aGlzLmlubGluZVRleHQgPSBuZXcgcihlLmxpbmtzLCBwKHt9LCB0aGlzLm9wdGlvbnMsIHsKICAgICAgICAgICAgcmVuZGVyZXI6IG5ldyBpKCkKICAgICAgICAgIH0pKSwgdGhpcy50b2tlbnMgPSBlLnJldmVyc2UoKTsKCiAgICAgICAgICBmb3IgKHZhciB0ID0gIiI7IHRoaXMubmV4dCgpOykgewogICAgICAgICAgICB0ICs9IHRoaXMudG9rKCk7CiAgICAgICAgICB9CgogICAgICAgICAgcmV0dXJuIHQ7CiAgICAgICAgfSwgYS5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHJldHVybiB0aGlzLnRva2VuID0gdGhpcy50b2tlbnMucG9wKCk7CiAgICAgICAgfSwgYS5wcm90b3R5cGUucGVlayA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHJldHVybiB0aGlzLnRva2Vuc1t0aGlzLnRva2Vucy5sZW5ndGggLSAxXSB8fCAwOwogICAgICAgIH0sIGEucHJvdG90eXBlLnBhcnNlVGV4dCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGZvciAodmFyIGUgPSB0aGlzLnRva2VuLnRleHQ7ICJ0ZXh0IiA9PT0gdGhpcy5wZWVrKCkudHlwZTspIHsKICAgICAgICAgICAgZSArPSAiXG4iICsgdGhpcy5uZXh0KCkudGV4dDsKICAgICAgICAgIH0KCiAgICAgICAgICByZXR1cm4gdGhpcy5pbmxpbmUub3V0cHV0KGUpOwogICAgICAgIH0sIGEucHJvdG90eXBlLnRvayA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHN3aXRjaCAodGhpcy50b2tlbi50eXBlKSB7CiAgICAgICAgICAgIGNhc2UgInNwYWNlIjoKICAgICAgICAgICAgICByZXR1cm4gIiI7CgogICAgICAgICAgICBjYXNlICJociI6CiAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVuZGVyZXIuaHIoKTsKCiAgICAgICAgICAgIGNhc2UgImhlYWRpbmciOgogICAgICAgICAgICAgIHJldHVybiB0aGlzLnJlbmRlcmVyLmhlYWRpbmcodGhpcy5pbmxpbmUub3V0cHV0KHRoaXMudG9rZW4udGV4dCksIHRoaXMudG9rZW4uZGVwdGgsIGwodGhpcy5pbmxpbmVUZXh0Lm91dHB1dCh0aGlzLnRva2VuLnRleHQpKSk7CgogICAgICAgICAgICBjYXNlICJjb2RlIjoKICAgICAgICAgICAgICByZXR1cm4gdGhpcy5yZW5kZXJlci5jb2RlKHRoaXMudG9rZW4udGV4dCwgdGhpcy50b2tlbi5sYW5nLCB0aGlzLnRva2VuLmVzY2FwZWQpOwoKICAgICAgICAgICAgY2FzZSAidGFibGUiOgogICAgICAgICAgICAgIHZhciBlLAogICAgICAgICAgICAgICAgICB0LAogICAgICAgICAgICAgICAgICBuLAogICAgICAgICAgICAgICAgICByLAogICAgICAgICAgICAgICAgICBvID0gIiIsCiAgICAgICAgICAgICAgICAgIGkgPSAiIjsKCiAgICAgICAgICAgICAgZm9yIChuID0gIiIsIGUgPSAwOyBlIDwgdGhpcy50b2tlbi5oZWFkZXIubGVuZ3RoOyBlKyspIHsKICAgICAgICAgICAgICAgIG4gKz0gdGhpcy5yZW5kZXJlci50YWJsZWNlbGwodGhpcy5pbmxpbmUub3V0cHV0KHRoaXMudG9rZW4uaGVhZGVyW2VdKSwgewogICAgICAgICAgICAgICAgICBoZWFkZXI6ICEwLAogICAgICAgICAgICAgICAgICBhbGlnbjogdGhpcy50b2tlbi5hbGlnbltlXQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBmb3IgKG8gKz0gdGhpcy5yZW5kZXJlci50YWJsZXJvdyhuKSwgZSA9IDA7IGUgPCB0aGlzLnRva2VuLmNlbGxzLmxlbmd0aDsgZSsrKSB7CiAgICAgICAgICAgICAgICBmb3IgKHQgPSB0aGlzLnRva2VuLmNlbGxzW2VdLCBuID0gIiIsIHIgPSAwOyByIDwgdC5sZW5ndGg7IHIrKykgewogICAgICAgICAgICAgICAgICBuICs9IHRoaXMucmVuZGVyZXIudGFibGVjZWxsKHRoaXMuaW5saW5lLm91dHB1dCh0W3JdKSwgewogICAgICAgICAgICAgICAgICAgIGhlYWRlcjogITEsCiAgICAgICAgICAgICAgICAgICAgYWxpZ246IHRoaXMudG9rZW4uYWxpZ25bcl0KICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaSArPSB0aGlzLnJlbmRlcmVyLnRhYmxlcm93KG4pOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVuZGVyZXIudGFibGUobywgaSk7CgogICAgICAgICAgICBjYXNlICJibG9ja3F1b3RlX3N0YXJ0IjoKICAgICAgICAgICAgICBmb3IgKGkgPSAiIjsgImJsb2NrcXVvdGVfZW5kIiAhPT0gdGhpcy5uZXh0KCkudHlwZTspIHsKICAgICAgICAgICAgICAgIGkgKz0gdGhpcy50b2soKTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIHJldHVybiB0aGlzLnJlbmRlcmVyLmJsb2NrcXVvdGUoaSk7CgogICAgICAgICAgICBjYXNlICJsaXN0X3N0YXJ0IjoKICAgICAgICAgICAgICBpID0gIiI7CgogICAgICAgICAgICAgIGZvciAodmFyIGEgPSB0aGlzLnRva2VuLm9yZGVyZWQsIHMgPSB0aGlzLnRva2VuLnN0YXJ0OyAibGlzdF9lbmQiICE9PSB0aGlzLm5leHQoKS50eXBlOykgewogICAgICAgICAgICAgICAgaSArPSB0aGlzLnRvaygpOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVuZGVyZXIubGlzdChpLCBhLCBzKTsKCiAgICAgICAgICAgIGNhc2UgImxpc3RfaXRlbV9zdGFydCI6CiAgICAgICAgICAgICAgZm9yIChpID0gIiIsIHRoaXMudG9rZW4udGFzayAmJiAoaSArPSB0aGlzLnJlbmRlcmVyLmNoZWNrYm94KHRoaXMudG9rZW4uY2hlY2tlZCkpOyAibGlzdF9pdGVtX2VuZCIgIT09IHRoaXMubmV4dCgpLnR5cGU7KSB7CiAgICAgICAgICAgICAgICBpICs9ICJ0ZXh0IiA9PT0gdGhpcy50b2tlbi50eXBlID8gdGhpcy5wYXJzZVRleHQoKSA6IHRoaXMudG9rKCk7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICByZXR1cm4gdGhpcy5yZW5kZXJlci5saXN0aXRlbShpKTsKCiAgICAgICAgICAgIGNhc2UgImxvb3NlX2l0ZW1fc3RhcnQiOgogICAgICAgICAgICAgIGZvciAoaSA9ICIiOyAibGlzdF9pdGVtX2VuZCIgIT09IHRoaXMubmV4dCgpLnR5cGU7KSB7CiAgICAgICAgICAgICAgICBpICs9IHRoaXMudG9rKCk7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICByZXR1cm4gdGhpcy5yZW5kZXJlci5saXN0aXRlbShpKTsKCiAgICAgICAgICAgIGNhc2UgImh0bWwiOgogICAgICAgICAgICAgIHJldHVybiB0aGlzLnJlbmRlcmVyLmh0bWwodGhpcy50b2tlbi50ZXh0KTsKCiAgICAgICAgICAgIGNhc2UgInBhcmFncmFwaCI6CiAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVuZGVyZXIucGFyYWdyYXBoKHRoaXMuaW5saW5lLm91dHB1dCh0aGlzLnRva2VuLnRleHQpKTsKCiAgICAgICAgICAgIGNhc2UgInRleHQiOgogICAgICAgICAgICAgIHJldHVybiB0aGlzLnJlbmRlcmVyLnBhcmFncmFwaCh0aGlzLnBhcnNlVGV4dCgpKTsKICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgIHZhciBtID0ge30sCiAgICAgICAgICAgIHkgPSAvXiR8XlthLXpdW2EtejAtOSsuLV0qOnxeWz8jXS9pOwogICAgICAgIGQuZXhlYyA9IGQsIGgub3B0aW9ucyA9IGguc2V0T3B0aW9ucyA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICByZXR1cm4gcChoLmRlZmF1bHRzLCBlKSwgaDsKICAgICAgICB9LCBoLmdldERlZmF1bHRzID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgYmFzZVVybDogbnVsbCwKICAgICAgICAgICAgYnJlYWtzOiAhMSwKICAgICAgICAgICAgZ2ZtOiAhMCwKICAgICAgICAgICAgaGVhZGVySWRzOiAhMCwKICAgICAgICAgICAgaGVhZGVyUHJlZml4OiAiIiwKICAgICAgICAgICAgaGlnaGxpZ2h0OiBudWxsLAogICAgICAgICAgICBsYW5nUHJlZml4OiAibGFuZ3VhZ2UtIiwKICAgICAgICAgICAgbWFuZ2xlOiAhMCwKICAgICAgICAgICAgcGVkYW50aWM6ICExLAogICAgICAgICAgICByZW5kZXJlcjogbmV3IG8oKSwKICAgICAgICAgICAgc2FuaXRpemU6ICExLAogICAgICAgICAgICBzYW5pdGl6ZXI6IG51bGwsCiAgICAgICAgICAgIHNpbGVudDogITEsCiAgICAgICAgICAgIHNtYXJ0TGlzdHM6ICExLAogICAgICAgICAgICBzbWFydHlwYW50czogITEsCiAgICAgICAgICAgIHRhYmxlczogITAsCiAgICAgICAgICAgIHhodG1sOiAhMQogICAgICAgICAgfTsKICAgICAgICB9LCBoLmRlZmF1bHRzID0gaC5nZXREZWZhdWx0cygpLCBoLlBhcnNlciA9IGEsIGgucGFyc2VyID0gYS5wYXJzZSwgaC5SZW5kZXJlciA9IG8sIGguVGV4dFJlbmRlcmVyID0gaSwgaC5MZXhlciA9IG4sIGgubGV4ZXIgPSBuLmxleCwgaC5JbmxpbmVMZXhlciA9IHIsIGguaW5saW5lTGV4ZXIgPSByLm91dHB1dCwgaC5wYXJzZSA9IGgsIGUuZXhwb3J0cyA9IGg7CiAgICAgIH0odGhpcyB8fCAidW5kZWZpbmVkIiAhPSB0eXBlb2Ygd2luZG93ICYmIHdpbmRvdyk7CiAgICB9KS5jYWxsKHQsIG4oMTQpKTsKICB9LCBmdW5jdGlvbiAoZSwgdCwgbikgewogICAgInVzZSBzdHJpY3QiOwoKICAgIGZ1bmN0aW9uIHIoZSkgewogICAgICB2YXIgdCA9IHt9OwogICAgICByZXR1cm4gdShlLCBmdW5jdGlvbiAoZSwgbikgewogICAgICAgIHUoZSwgZnVuY3Rpb24gKGUpIHsKICAgICAgICAgIHRbZV0gPSBuOwogICAgICAgIH0pOwogICAgICB9KSwgdDsKICAgIH0KCiAgICBmdW5jdGlvbiBvKGUsIHQpIHsKICAgICAgdmFyIG4gPSByKGUucGx1cmFsVHlwZVRvTGFuZ3VhZ2VzKTsKICAgICAgcmV0dXJuIG5bdF0gfHwgbltnLmNhbGwodCwgLy0vLCAxKVswXV0gfHwgbi5lbjsKICAgIH0KCiAgICBmdW5jdGlvbiBpKGUsIHQsIG4pIHsKICAgICAgcmV0dXJuIGUucGx1cmFsVHlwZXNbbyhlLCB0KV0obik7CiAgICB9CgogICAgZnVuY3Rpb24gYShlKSB7CiAgICAgIHJldHVybiBlLnJlcGxhY2UoL1suKis/XiR7fSgpfFtcXVxcXS9nLCAiXFwkJiIpOwogICAgfQoKICAgIGZ1bmN0aW9uIHMoZSkgewogICAgICB2YXIgdCA9IGUgJiYgZS5wcmVmaXggfHwgIiV7IiwKICAgICAgICAgIG4gPSBlICYmIGUuc3VmZml4IHx8ICJ9IjsKICAgICAgaWYgKHQgPT09IG0gfHwgbiA9PT0gbSkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJyInICsgbSArICciIHRva2VuIGlzIHJlc2VydmVkIGZvciBwbHVyYWxpemF0aW9uJyk7CiAgICAgIHJldHVybiBuZXcgUmVnRXhwKGEodCkgKyAiKC4qPykiICsgYShuKSwgImciKTsKICAgIH0KCiAgICBmdW5jdGlvbiBsKGUsIHQsIG4sIHIsIG8pIHsKICAgICAgaWYgKCJzdHJpbmciICE9IHR5cGVvZiBlKSB0aHJvdyBuZXcgVHlwZUVycm9yKCJQb2x5Z2xvdC50cmFuc2Zvcm1QaHJhc2UgZXhwZWN0cyBhcmd1bWVudCAjMSB0byBiZSBzdHJpbmciKTsKICAgICAgaWYgKG51bGwgPT0gdCkgcmV0dXJuIGU7CiAgICAgIHZhciBhID0gZSwKICAgICAgICAgIHMgPSByIHx8IHcsCiAgICAgICAgICBsID0gbyB8fCBiLAogICAgICAgICAgYyA9ICJudW1iZXIiID09IHR5cGVvZiB0ID8gewogICAgICAgIHNtYXJ0X2NvdW50OiB0CiAgICAgIH0gOiB0OwoKICAgICAgaWYgKG51bGwgIT0gYy5zbWFydF9jb3VudCAmJiBhKSB7CiAgICAgICAgdmFyIHUgPSBnLmNhbGwoYSwgbSk7CiAgICAgICAgYSA9IGYodVtpKGwsIG4gfHwgImVuIiwgYy5zbWFydF9jb3VudCldIHx8IHVbMF0pOwogICAgICB9CgogICAgICByZXR1cm4gYSA9IHYuY2FsbChhLCBzLCBmdW5jdGlvbiAoZSwgdCkgewogICAgICAgIHJldHVybiBwKGMsIHQpICYmIG51bGwgIT0gY1t0XSA/IGNbdF0gOiBlOwogICAgICB9KTsKICAgIH0KCiAgICBmdW5jdGlvbiBjKGUpIHsKICAgICAgdmFyIHQgPSBlIHx8IHt9OwogICAgICB0aGlzLnBocmFzZXMgPSB7fSwgdGhpcy5leHRlbmQodC5waHJhc2VzIHx8IHt9KSwgdGhpcy5jdXJyZW50TG9jYWxlID0gdC5sb2NhbGUgfHwgImVuIjsKICAgICAgdmFyIG4gPSB0LmFsbG93TWlzc2luZyA/IGwgOiBudWxsOwogICAgICB0aGlzLm9uTWlzc2luZ0tleSA9ICJmdW5jdGlvbiIgPT0gdHlwZW9mIHQub25NaXNzaW5nS2V5ID8gdC5vbk1pc3NpbmdLZXkgOiBuLCB0aGlzLndhcm4gPSB0Lndhcm4gfHwgaCwgdGhpcy50b2tlblJlZ2V4ID0gcyh0LmludGVycG9sYXRpb24pLCB0aGlzLnBsdXJhbFJ1bGVzID0gdC5wbHVyYWxSdWxlcyB8fCBiOwogICAgfQoKICAgIHZhciB1ID0gbigzMSksCiAgICAgICAgZCA9IG4oNTApLAogICAgICAgIHAgPSBuKDM0KSwKICAgICAgICBmID0gbig0MyksCiAgICAgICAgaCA9IGZ1bmN0aW9uIGgoZSkgewogICAgICBkKCExLCBlKTsKICAgIH0sCiAgICAgICAgdiA9IFN0cmluZy5wcm90b3R5cGUucmVwbGFjZSwKICAgICAgICBnID0gU3RyaW5nLnByb3RvdHlwZS5zcGxpdCwKICAgICAgICBtID0gInx8fHwiLAogICAgICAgIHkgPSBmdW5jdGlvbiB5KGUpIHsKICAgICAgdmFyIHQgPSBlICUgMTAwLAogICAgICAgICAgbiA9IHQgJSAxMDsKICAgICAgcmV0dXJuIDExICE9PSB0ICYmIDEgPT09IG4gPyAwIDogMiA8PSBuICYmIG4gPD0gNCAmJiAhKHQgPj0gMTIgJiYgdCA8PSAxNCkgPyAxIDogMjsKICAgIH0sCiAgICAgICAgYiA9IHsKICAgICAgcGx1cmFsVHlwZXM6IHsKICAgICAgICBhcmFiaWM6IGZ1bmN0aW9uIGFyYWJpYyhlKSB7CiAgICAgICAgICBpZiAoZSA8IDMpIHJldHVybiBlOwogICAgICAgICAgdmFyIHQgPSBlICUgMTAwOwogICAgICAgICAgcmV0dXJuIHQgPj0gMyAmJiB0IDw9IDEwID8gMyA6IHQgPj0gMTEgPyA0IDogNTsKICAgICAgICB9LAogICAgICAgIGJvc25pYW5fc2VyYmlhbjogeSwKICAgICAgICBjaGluZXNlOiBmdW5jdGlvbiBjaGluZXNlKCkgewogICAgICAgICAgcmV0dXJuIDA7CiAgICAgICAgfSwKICAgICAgICBjcm9hdGlhbjogeSwKICAgICAgICBmcmVuY2g6IGZ1bmN0aW9uIGZyZW5jaChlKSB7CiAgICAgICAgICByZXR1cm4gZSA+IDEgPyAxIDogMDsKICAgICAgICB9LAogICAgICAgIGdlcm1hbjogZnVuY3Rpb24gZ2VybWFuKGUpIHsKICAgICAgICAgIHJldHVybiAxICE9PSBlID8gMSA6IDA7CiAgICAgICAgfSwKICAgICAgICBydXNzaWFuOiB5LAogICAgICAgIGxpdGh1YW5pYW46IGZ1bmN0aW9uIGxpdGh1YW5pYW4oZSkgewogICAgICAgICAgcmV0dXJuIGUgJSAxMCA9PSAxICYmIGUgJSAxMDAgIT0gMTEgPyAwIDogZSAlIDEwID49IDIgJiYgZSAlIDEwIDw9IDkgJiYgKGUgJSAxMDAgPCAxMSB8fCBlICUgMTAwID4gMTkpID8gMSA6IDI7CiAgICAgICAgfSwKICAgICAgICBjemVjaDogZnVuY3Rpb24gY3plY2goZSkgewogICAgICAgICAgcmV0dXJuIDEgPT09IGUgPyAwIDogZSA+PSAyICYmIGUgPD0gNCA/IDEgOiAyOwogICAgICAgIH0sCiAgICAgICAgcG9saXNoOiBmdW5jdGlvbiBwb2xpc2goZSkgewogICAgICAgICAgaWYgKDEgPT09IGUpIHJldHVybiAwOwogICAgICAgICAgdmFyIHQgPSBlICUgMTA7CiAgICAgICAgICByZXR1cm4gMiA8PSB0ICYmIHQgPD0gNCAmJiAoZSAlIDEwMCA8IDEwIHx8IGUgJSAxMDAgPj0gMjApID8gMSA6IDI7CiAgICAgICAgfSwKICAgICAgICBpY2VsYW5kaWM6IGZ1bmN0aW9uIGljZWxhbmRpYyhlKSB7CiAgICAgICAgICByZXR1cm4gZSAlIDEwICE9IDEgfHwgZSAlIDEwMCA9PSAxMSA/IDEgOiAwOwogICAgICAgIH0sCiAgICAgICAgc2xvdmVuaWFuOiBmdW5jdGlvbiBzbG92ZW5pYW4oZSkgewogICAgICAgICAgdmFyIHQgPSBlICUgMTAwOwogICAgICAgICAgcmV0dXJuIDEgPT09IHQgPyAwIDogMiA9PT0gdCA/IDEgOiAzID09PSB0IHx8IDQgPT09IHQgPyAyIDogMzsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIHBsdXJhbFR5cGVUb0xhbmd1YWdlczogewogICAgICAgIGFyYWJpYzogWyJhciJdLAogICAgICAgIGJvc25pYW5fc2VyYmlhbjogWyJicy1MYXRuLUJBIiwgImJzLUN5cmwtQkEiLCAic3JsLVJTIiwgInNyLVJTIl0sCiAgICAgICAgY2hpbmVzZTogWyJpZCIsICJpZC1JRCIsICJqYSIsICJrbyIsICJrby1LUiIsICJsbyIsICJtcyIsICJ0aCIsICJ0aC1USCIsICJ6aCJdLAogICAgICAgIGNyb2F0aWFuOiBbImhyIiwgImhyLUhSIl0sCiAgICAgICAgZ2VybWFuOiBbImZhIiwgImRhIiwgImRlIiwgImVuIiwgImVzIiwgImZpIiwgImVsIiwgImhlIiwgImhpLUlOIiwgImh1IiwgImh1LUhVIiwgIml0IiwgIm5sIiwgIm5vIiwgInB0IiwgInN2IiwgInRyIl0sCiAgICAgICAgZnJlbmNoOiBbImZyIiwgInRsIiwgInB0LWJyIl0sCiAgICAgICAgcnVzc2lhbjogWyJydSIsICJydS1SVSJdLAogICAgICAgIGxpdGh1YW5pYW46IFsibHQiXSwKICAgICAgICBjemVjaDogWyJjcyIsICJjcy1DWiIsICJzayJdLAogICAgICAgIHBvbGlzaDogWyJwbCJdLAogICAgICAgIGljZWxhbmRpYzogWyJpcyJdLAogICAgICAgIHNsb3ZlbmlhbjogWyJzbC1TTCJdCiAgICAgIH0KICAgIH0sCiAgICAgICAgdyA9IC8lXHsoLio/KVx9L2c7CgogICAgYy5wcm90b3R5cGUubG9jYWxlID0gZnVuY3Rpb24gKGUpIHsKICAgICAgcmV0dXJuIGUgJiYgKHRoaXMuY3VycmVudExvY2FsZSA9IGUpLCB0aGlzLmN1cnJlbnRMb2NhbGU7CiAgICB9LCBjLnByb3RvdHlwZS5leHRlbmQgPSBmdW5jdGlvbiAoZSwgdCkgewogICAgICB1KGUsIGZ1bmN0aW9uIChlLCBuKSB7CiAgICAgICAgdmFyIHIgPSB0ID8gdCArICIuIiArIG4gOiBuOwogICAgICAgICJvYmplY3QiID09IF90eXBlb2YoZSkgPyB0aGlzLmV4dGVuZChlLCByKSA6IHRoaXMucGhyYXNlc1tyXSA9IGU7CiAgICAgIH0sIHRoaXMpOwogICAgfSwgYy5wcm90b3R5cGUudW5zZXQgPSBmdW5jdGlvbiAoZSwgdCkgewogICAgICAic3RyaW5nIiA9PSB0eXBlb2YgZSA/IGRlbGV0ZSB0aGlzLnBocmFzZXNbZV0gOiB1KGUsIGZ1bmN0aW9uIChlLCBuKSB7CiAgICAgICAgdmFyIHIgPSB0ID8gdCArICIuIiArIG4gOiBuOwogICAgICAgICJvYmplY3QiID09IF90eXBlb2YoZSkgPyB0aGlzLnVuc2V0KGUsIHIpIDogZGVsZXRlIHRoaXMucGhyYXNlc1tyXTsKICAgICAgfSwgdGhpcyk7CiAgICB9LCBjLnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uICgpIHsKICAgICAgdGhpcy5waHJhc2VzID0ge307CiAgICB9LCBjLnByb3RvdHlwZS5yZXBsYWNlID0gZnVuY3Rpb24gKGUpIHsKICAgICAgdGhpcy5jbGVhcigpLCB0aGlzLmV4dGVuZChlKTsKICAgIH0sIGMucHJvdG90eXBlLnQgPSBmdW5jdGlvbiAoZSwgdCkgewogICAgICB2YXIgbiwKICAgICAgICAgIHIsCiAgICAgICAgICBvID0gbnVsbCA9PSB0ID8ge30gOiB0OwogICAgICBpZiAoInN0cmluZyIgPT0gdHlwZW9mIHRoaXMucGhyYXNlc1tlXSkgbiA9IHRoaXMucGhyYXNlc1tlXTtlbHNlIGlmICgic3RyaW5nIiA9PSB0eXBlb2Ygby5fKSBuID0gby5fO2Vsc2UgaWYgKHRoaXMub25NaXNzaW5nS2V5KSB7CiAgICAgICAgdmFyIGkgPSB0aGlzLm9uTWlzc2luZ0tleTsKICAgICAgICByID0gaShlLCBvLCB0aGlzLmN1cnJlbnRMb2NhbGUsIHRoaXMudG9rZW5SZWdleCwgdGhpcy5wbHVyYWxSdWxlcyk7CiAgICAgIH0gZWxzZSB0aGlzLndhcm4oJ01pc3NpbmcgdHJhbnNsYXRpb24gZm9yIGtleTogIicgKyBlICsgJyInKSwgciA9IGU7CiAgICAgIHJldHVybiAic3RyaW5nIiA9PSB0eXBlb2YgbiAmJiAociA9IGwobiwgbywgdGhpcy5jdXJyZW50TG9jYWxlLCB0aGlzLnRva2VuUmVnZXgsIHRoaXMucGx1cmFsUnVsZXMpKSwgcjsKICAgIH0sIGMucHJvdG90eXBlLmhhcyA9IGZ1bmN0aW9uIChlKSB7CiAgICAgIHJldHVybiBwKHRoaXMucGhyYXNlcywgZSk7CiAgICB9LCBjLnRyYW5zZm9ybVBocmFzZSA9IGZ1bmN0aW9uIChlLCB0LCBuKSB7CiAgICAgIHJldHVybiBsKGUsIHQsIG4pOwogICAgfSwgZS5leHBvcnRzID0gYzsKICB9LCBmdW5jdGlvbiAoZSwgdCwgbikgewogICAgInVzZSBzdHJpY3QiOwoKICAgIGZ1bmN0aW9uIHIoZSkgewogICAgICBpZiAobnVsbCA9PT0gZSB8fCB2b2lkIDAgPT09IGUpIHRocm93IG5ldyBUeXBlRXJyb3IoIk9iamVjdC5hc3NpZ24gY2Fubm90IGJlIGNhbGxlZCB3aXRoIG51bGwgb3IgdW5kZWZpbmVkIik7CiAgICAgIHJldHVybiBPYmplY3QoZSk7CiAgICB9CiAgICAvKgogICAgb2JqZWN0LWFzc2lnbgogICAgKGMpIFNpbmRyZSBTb3JodXMKICAgIEBsaWNlbnNlIE1JVAogICAgKi8KCgogICAgdmFyIG8gPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzLAogICAgICAgIGkgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LAogICAgICAgIGEgPSBPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlOwogICAgZS5leHBvcnRzID0gZnVuY3Rpb24gKCkgewogICAgICB0cnkgewogICAgICAgIGlmICghT2JqZWN0LmFzc2lnbikgcmV0dXJuICExOwogICAgICAgIHZhciBlID0gbmV3IFN0cmluZygiYWJjIik7CiAgICAgICAgaWYgKGVbNV0gPSAiZGUiLCAiNSIgPT09IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGUpWzBdKSByZXR1cm4gITE7CgogICAgICAgIGZvciAodmFyIHQgPSB7fSwgbiA9IDA7IG4gPCAxMDsgbisrKSB7CiAgICAgICAgICB0WyJfIiArIFN0cmluZy5mcm9tQ2hhckNvZGUobildID0gbjsKICAgICAgICB9CgogICAgICAgIGlmICgiMDEyMzQ1Njc4OSIgIT09IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHQpLm1hcChmdW5jdGlvbiAoZSkgewogICAgICAgICAgcmV0dXJuIHRbZV07CiAgICAgICAgfSkuam9pbigiIikpIHJldHVybiAhMTsKICAgICAgICB2YXIgciA9IHt9OwogICAgICAgIHJldHVybiAiYWJjZGVmZ2hpamtsbW5vcHFyc3QiLnNwbGl0KCIiKS5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICByW2VdID0gZTsKICAgICAgICB9KSwgImFiY2RlZmdoaWprbG1ub3BxcnN0IiA9PT0gT2JqZWN0LmtleXMoT2JqZWN0LmFzc2lnbih7fSwgcikpLmpvaW4oIiIpOwogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgcmV0dXJuICExOwogICAgICB9CiAgICB9KCkgPyBPYmplY3QuYXNzaWduIDogZnVuY3Rpb24gKGUsIHQpIHsKICAgICAgZm9yICh2YXIgbiwgcywgbCA9IHIoZSksIGMgPSAxOyBjIDwgYXJndW1lbnRzLmxlbmd0aDsgYysrKSB7CiAgICAgICAgbiA9IE9iamVjdChhcmd1bWVudHNbY10pOwoKICAgICAgICBmb3IgKHZhciB1IGluIG4pIHsKICAgICAgICAgIGkuY2FsbChuLCB1KSAmJiAobFt1XSA9IG5bdV0pOwogICAgICAgIH0KCiAgICAgICAgaWYgKG8pIHsKICAgICAgICAgIHMgPSBvKG4pOwoKICAgICAgICAgIGZvciAodmFyIGQgPSAwOyBkIDwgcy5sZW5ndGg7IGQrKykgewogICAgICAgICAgICBhLmNhbGwobiwgc1tkXSkgJiYgKGxbc1tkXV0gPSBuW3NbZF1dKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiBsOwogICAgfTsKICB9LCBmdW5jdGlvbiAoZSwgdCwgbikgewogICAgInVzZSBzdHJpY3QiOwoKICAgIHZhciByOwoKICAgIGlmICghT2JqZWN0LmtleXMpIHsKICAgICAgdmFyIG8gPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LAogICAgICAgICAgaSA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcsCiAgICAgICAgICBhID0gbigxMCksCiAgICAgICAgICBzID0gT2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZSwKICAgICAgICAgIGwgPSAhcy5jYWxsKHsKICAgICAgICB0b1N0cmluZzogbnVsbAogICAgICB9LCAidG9TdHJpbmciKSwKICAgICAgICAgIGMgPSBzLmNhbGwoZnVuY3Rpb24gKCkge30sICJwcm90b3R5cGUiKSwKICAgICAgICAgIHUgPSBbInRvU3RyaW5nIiwgInRvTG9jYWxlU3RyaW5nIiwgInZhbHVlT2YiLCAiaGFzT3duUHJvcGVydHkiLCAiaXNQcm90b3R5cGVPZiIsICJwcm9wZXJ0eUlzRW51bWVyYWJsZSIsICJjb25zdHJ1Y3RvciJdLAogICAgICAgICAgZCA9IGZ1bmN0aW9uIGQoZSkgewogICAgICAgIHZhciB0ID0gZS5jb25zdHJ1Y3RvcjsKICAgICAgICByZXR1cm4gdCAmJiB0LnByb3RvdHlwZSA9PT0gZTsKICAgICAgfSwKICAgICAgICAgIHAgPSB7CiAgICAgICAgJGFwcGxpY2F0aW9uQ2FjaGU6ICEwLAogICAgICAgICRjb25zb2xlOiAhMCwKICAgICAgICAkZXh0ZXJuYWw6ICEwLAogICAgICAgICRmcmFtZTogITAsCiAgICAgICAgJGZyYW1lRWxlbWVudDogITAsCiAgICAgICAgJGZyYW1lczogITAsCiAgICAgICAgJGlubmVySGVpZ2h0OiAhMCwKICAgICAgICAkaW5uZXJXaWR0aDogITAsCiAgICAgICAgJG91dGVySGVpZ2h0OiAhMCwKICAgICAgICAkb3V0ZXJXaWR0aDogITAsCiAgICAgICAgJHBhZ2VYT2Zmc2V0OiAhMCwKICAgICAgICAkcGFnZVlPZmZzZXQ6ICEwLAogICAgICAgICRwYXJlbnQ6ICEwLAogICAgICAgICRzY3JvbGxMZWZ0OiAhMCwKICAgICAgICAkc2Nyb2xsVG9wOiAhMCwKICAgICAgICAkc2Nyb2xsWDogITAsCiAgICAgICAgJHNjcm9sbFk6ICEwLAogICAgICAgICRzZWxmOiAhMCwKICAgICAgICAkd2Via2l0SW5kZXhlZERCOiAhMCwKICAgICAgICAkd2Via2l0U3RvcmFnZUluZm86ICEwLAogICAgICAgICR3aW5kb3c6ICEwCiAgICAgIH0sCiAgICAgICAgICBmID0gZnVuY3Rpb24gKCkgewogICAgICAgIGlmICgidW5kZWZpbmVkIiA9PSB0eXBlb2Ygd2luZG93KSByZXR1cm4gITE7CgogICAgICAgIGZvciAodmFyIGUgaW4gd2luZG93KSB7CiAgICAgICAgICB0cnkgewogICAgICAgICAgICBpZiAoIXBbIiQiICsgZV0gJiYgby5jYWxsKHdpbmRvdywgZSkgJiYgbnVsbCAhPT0gd2luZG93W2VdICYmICJvYmplY3QiID09IF90eXBlb2Yod2luZG93W2VdKSkgdHJ5IHsKICAgICAgICAgICAgICBkKHdpbmRvd1tlXSk7CiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICByZXR1cm4gITA7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgcmV0dXJuICEwOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgcmV0dXJuICExOwogICAgICB9KCksCiAgICAgICAgICBoID0gZnVuY3Rpb24gaChlKSB7CiAgICAgICAgaWYgKCJ1bmRlZmluZWQiID09IHR5cGVvZiB3aW5kb3cgfHwgIWYpIHJldHVybiBkKGUpOwoKICAgICAgICB0cnkgewogICAgICAgICAgcmV0dXJuIGQoZSk7CiAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgcmV0dXJuICExOwogICAgICAgIH0KICAgICAgfTsKCiAgICAgIHIgPSBmdW5jdGlvbiByKGUpIHsKICAgICAgICB2YXIgdCA9IG51bGwgIT09IGUgJiYgIm9iamVjdCIgPT0gX3R5cGVvZihlKSwKICAgICAgICAgICAgbiA9ICJbb2JqZWN0IEZ1bmN0aW9uXSIgPT09IGkuY2FsbChlKSwKICAgICAgICAgICAgciA9IGEoZSksCiAgICAgICAgICAgIHMgPSB0ICYmICJbb2JqZWN0IFN0cmluZ10iID09PSBpLmNhbGwoZSksCiAgICAgICAgICAgIGQgPSBbXTsKCiAgICAgICAgaWYgKCF0ICYmICFuICYmICFyKSB0aHJvdyBuZXcgVHlwZUVycm9yKCJPYmplY3Qua2V5cyBjYWxsZWQgb24gYSBub24tb2JqZWN0Iik7CiAgICAgICAgdmFyIHAgPSBjICYmIG47CiAgICAgICAgaWYgKHMgJiYgZS5sZW5ndGggPiAwICYmICFvLmNhbGwoZSwgMCkpIGZvciAodmFyIGYgPSAwOyBmIDwgZS5sZW5ndGg7ICsrZikgewogICAgICAgICAgZC5wdXNoKFN0cmluZyhmKSk7CiAgICAgICAgfQogICAgICAgIGlmIChyICYmIGUubGVuZ3RoID4gMCkgZm9yICh2YXIgdiA9IDA7IHYgPCBlLmxlbmd0aDsgKyt2KSB7CiAgICAgICAgICBkLnB1c2goU3RyaW5nKHYpKTsKICAgICAgICB9IGVsc2UgZm9yICh2YXIgZyBpbiBlKSB7CiAgICAgICAgICBwICYmICJwcm90b3R5cGUiID09PSBnIHx8ICFvLmNhbGwoZSwgZykgfHwgZC5wdXNoKFN0cmluZyhnKSk7CiAgICAgICAgfQogICAgICAgIGlmIChsKSBmb3IgKHZhciBtID0gaChlKSwgeSA9IDA7IHkgPCB1Lmxlbmd0aDsgKyt5KSB7CiAgICAgICAgICBtICYmICJjb25zdHJ1Y3RvciIgPT09IHVbeV0gfHwgIW8uY2FsbChlLCB1W3ldKSB8fCBkLnB1c2godVt5XSk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBkOwogICAgICB9OwogICAgfQoKICAgIGUuZXhwb3J0cyA9IHI7CiAgfSwgZnVuY3Rpb24gKGUsIHQsIG4pIHsKICAgICJ1c2Ugc3RyaWN0IjsKCiAgICB2YXIgciA9IEFycmF5LnByb3RvdHlwZS5zbGljZSwKICAgICAgICBvID0gbigxMCksCiAgICAgICAgaSA9IE9iamVjdC5rZXlzLAogICAgICAgIGEgPSBpID8gZnVuY3Rpb24gKGUpIHsKICAgICAgcmV0dXJuIGkoZSk7CiAgICB9IDogbigzOSksCiAgICAgICAgcyA9IE9iamVjdC5rZXlzOwogICAgYS5zaGltID0gZnVuY3Rpb24gKCkgewogICAgICBpZiAoT2JqZWN0LmtleXMpIHsKICAgICAgICAoZnVuY3Rpb24gKCkgewogICAgICAgICAgdmFyIGUgPSBPYmplY3Qua2V5cyhhcmd1bWVudHMpOwogICAgICAgICAgcmV0dXJuIGUgJiYgZS5sZW5ndGggPT09IGFyZ3VtZW50cy5sZW5ndGg7CiAgICAgICAgfSkoMSwgMikgfHwgKE9iamVjdC5rZXlzID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICAgIHJldHVybiBzKG8oZSkgPyByLmNhbGwoZSkgOiBlKTsKICAgICAgICB9KTsKICAgICAgfSBlbHNlIE9iamVjdC5rZXlzID0gYTsKCiAgICAgIHJldHVybiBPYmplY3Qua2V5cyB8fCBhOwogICAgfSwgZS5leHBvcnRzID0gYTsKICB9LCBmdW5jdGlvbiAoZSwgdCkgewogICAgZnVuY3Rpb24gbigpIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKCJzZXRUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkIik7CiAgICB9CgogICAgZnVuY3Rpb24gcigpIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKCJjbGVhclRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWQiKTsKICAgIH0KCiAgICBmdW5jdGlvbiBvKGUpIHsKICAgICAgaWYgKHUgPT09IHNldFRpbWVvdXQpIHJldHVybiBzZXRUaW1lb3V0KGUsIDApOwogICAgICBpZiAoKHUgPT09IG4gfHwgIXUpICYmIHNldFRpbWVvdXQpIHJldHVybiB1ID0gc2V0VGltZW91dCwgc2V0VGltZW91dChlLCAwKTsKCiAgICAgIHRyeSB7CiAgICAgICAgcmV0dXJuIHUoZSwgMCk7CiAgICAgIH0gY2F0Y2ggKHQpIHsKICAgICAgICB0cnkgewogICAgICAgICAgcmV0dXJuIHUuY2FsbChudWxsLCBlLCAwKTsKICAgICAgICB9IGNhdGNoICh0KSB7CiAgICAgICAgICByZXR1cm4gdS5jYWxsKHRoaXMsIGUsIDApOwogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIGkoZSkgewogICAgICBpZiAoZCA9PT0gY2xlYXJUaW1lb3V0KSByZXR1cm4gY2xlYXJUaW1lb3V0KGUpOwogICAgICBpZiAoKGQgPT09IHIgfHwgIWQpICYmIGNsZWFyVGltZW91dCkgcmV0dXJuIGQgPSBjbGVhclRpbWVvdXQsIGNsZWFyVGltZW91dChlKTsKCiAgICAgIHRyeSB7CiAgICAgICAgcmV0dXJuIGQoZSk7CiAgICAgIH0gY2F0Y2ggKHQpIHsKICAgICAgICB0cnkgewogICAgICAgICAgcmV0dXJuIGQuY2FsbChudWxsLCBlKTsKICAgICAgICB9IGNhdGNoICh0KSB7CiAgICAgICAgICByZXR1cm4gZC5jYWxsKHRoaXMsIGUpOwogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIGEoKSB7CiAgICAgIHYgJiYgZiAmJiAodiA9ICExLCBmLmxlbmd0aCA/IGggPSBmLmNvbmNhdChoKSA6IGcgPSAtMSwgaC5sZW5ndGggJiYgcygpKTsKICAgIH0KCiAgICBmdW5jdGlvbiBzKCkgewogICAgICBpZiAoIXYpIHsKICAgICAgICB2YXIgZSA9IG8oYSk7CiAgICAgICAgdiA9ICEwOwoKICAgICAgICBmb3IgKHZhciB0ID0gaC5sZW5ndGg7IHQ7KSB7CiAgICAgICAgICBmb3IgKGYgPSBoLCBoID0gW107ICsrZyA8IHQ7KSB7CiAgICAgICAgICAgIGYgJiYgZltnXS5ydW4oKTsKICAgICAgICAgIH0KCiAgICAgICAgICBnID0gLTEsIHQgPSBoLmxlbmd0aDsKICAgICAgICB9CgogICAgICAgIGYgPSBudWxsLCB2ID0gITEsIGkoZSk7CiAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBsKGUsIHQpIHsKICAgICAgdGhpcy5mdW4gPSBlLCB0aGlzLmFycmF5ID0gdDsKICAgIH0KCiAgICBmdW5jdGlvbiBjKCkge30KCiAgICB2YXIgdSwKICAgICAgICBkLAogICAgICAgIHAgPSBlLmV4cG9ydHMgPSB7fTsKICAgICFmdW5jdGlvbiAoKSB7CiAgICAgIHRyeSB7CiAgICAgICAgdSA9ICJmdW5jdGlvbiIgPT0gdHlwZW9mIHNldFRpbWVvdXQgPyBzZXRUaW1lb3V0IDogbjsKICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgIHUgPSBuOwogICAgICB9CgogICAgICB0cnkgewogICAgICAgIGQgPSAiZnVuY3Rpb24iID09IHR5cGVvZiBjbGVhclRpbWVvdXQgPyBjbGVhclRpbWVvdXQgOiByOwogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgZCA9IHI7CiAgICAgIH0KICAgIH0oKTsKICAgIHZhciBmLAogICAgICAgIGggPSBbXSwKICAgICAgICB2ID0gITEsCiAgICAgICAgZyA9IC0xOwogICAgcC5uZXh0VGljayA9IGZ1bmN0aW9uIChlKSB7CiAgICAgIHZhciB0ID0gbmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGggLSAxKTsKICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSBmb3IgKHZhciBuID0gMTsgbiA8IGFyZ3VtZW50cy5sZW5ndGg7IG4rKykgewogICAgICAgIHRbbiAtIDFdID0gYXJndW1lbnRzW25dOwogICAgICB9CiAgICAgIGgucHVzaChuZXcgbChlLCB0KSksIDEgIT09IGgubGVuZ3RoIHx8IHYgfHwgbyhzKTsKICAgIH0sIGwucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHsKICAgICAgdGhpcy5mdW4uYXBwbHkobnVsbCwgdGhpcy5hcnJheSk7CiAgICB9LCBwLnRpdGxlID0gImJyb3dzZXIiLCBwLmJyb3dzZXIgPSAhMCwgcC5lbnYgPSB7fSwgcC5hcmd2ID0gW10sIHAudmVyc2lvbiA9ICIiLCBwLnZlcnNpb25zID0ge30sIHAub24gPSBjLCBwLmFkZExpc3RlbmVyID0gYywgcC5vbmNlID0gYywgcC5vZmYgPSBjLCBwLnJlbW92ZUxpc3RlbmVyID0gYywgcC5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBjLCBwLmVtaXQgPSBjLCBwLnByZXBlbmRMaXN0ZW5lciA9IGMsIHAucHJlcGVuZE9uY2VMaXN0ZW5lciA9IGMsIHAubGlzdGVuZXJzID0gZnVuY3Rpb24gKGUpIHsKICAgICAgcmV0dXJuIFtdOwogICAgfSwgcC5iaW5kaW5nID0gZnVuY3Rpb24gKGUpIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKCJwcm9jZXNzLmJpbmRpbmcgaXMgbm90IHN1cHBvcnRlZCIpOwogICAgfSwgcC5jd2QgPSBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiAiLyI7CiAgICB9LCBwLmNoZGlyID0gZnVuY3Rpb24gKGUpIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKCJwcm9jZXNzLmNoZGlyIGlzIG5vdCBzdXBwb3J0ZWQiKTsKICAgIH0sIHAudW1hc2sgPSBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiAwOwogICAgfTsKICB9LCBmdW5jdGlvbiAoZSwgdCwgbikgewogICAgInVzZSBzdHJpY3QiOwoKICAgIGZ1bmN0aW9uIHIoZSkgewogICAgICByZXR1cm4gZSA9IEpTT04uc3RyaW5naWZ5KGUpLCAhIS9eXHtbXHNcU10qXH0kLy50ZXN0KGUpOwogICAgfQoKICAgIGZ1bmN0aW9uIG8oZSkgewogICAgICByZXR1cm4gdm9pZCAwID09PSBlIHx8ICJmdW5jdGlvbiIgPT0gdHlwZW9mIGUgPyBlICsgIiIgOiBKU09OLnN0cmluZ2lmeShlKTsKICAgIH0KCiAgICBmdW5jdGlvbiBpKGUpIHsKICAgICAgaWYgKCJzdHJpbmciID09IHR5cGVvZiBlKSB0cnkgewogICAgICAgIHJldHVybiBKU09OLnBhcnNlKGUpOwogICAgICB9IGNhdGNoICh0KSB7CiAgICAgICAgcmV0dXJuIGU7CiAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBhKGUpIHsKICAgICAgcmV0dXJuICJbb2JqZWN0IEZ1bmN0aW9uXSIgPT09IHt9LnRvU3RyaW5nLmNhbGwoZSk7CiAgICB9CgogICAgZnVuY3Rpb24gcyhlKSB7CiAgICAgIHJldHVybiAiW29iamVjdCBBcnJheV0iID09PSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZSk7CiAgICB9CgogICAgZnVuY3Rpb24gbCgpIHsKICAgICAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIGwpKSByZXR1cm4gbmV3IGwoKTsKICAgIH0KCiAgICBmdW5jdGlvbiBjKGUsIHQpIHsKICAgICAgdmFyIG4gPSBhcmd1bWVudHMsCiAgICAgICAgICBvID0gbnVsbDsKICAgICAgaWYgKGQgfHwgKGQgPSBsKCkpLCAwID09PSBuLmxlbmd0aCkgcmV0dXJuIGQuZ2V0KCk7CgogICAgICBpZiAoMSA9PT0gbi5sZW5ndGgpIHsKICAgICAgICBpZiAoInN0cmluZyIgPT0gdHlwZW9mIGUpIHJldHVybiBkLmdldChlKTsKICAgICAgICBpZiAocihlKSkgcmV0dXJuIGQuc2V0KGUpOwogICAgICB9CgogICAgICBpZiAoMiA9PT0gbi5sZW5ndGggJiYgInN0cmluZyIgPT0gdHlwZW9mIGUpIHsKICAgICAgICBpZiAoIXQpIHJldHVybiBkLnJlbW92ZShlKTsKICAgICAgICBpZiAodCAmJiAic3RyaW5nIiA9PSB0eXBlb2YgdCkgcmV0dXJuIGQuc2V0KGUsIHQpOwogICAgICAgIHQgJiYgYSh0KSAmJiAobyA9IG51bGwsIG8gPSB0KGUsIGQuZ2V0KGUpKSwgYy5zZXQoZSwgbykpOwogICAgICB9CgogICAgICBpZiAoMiA9PT0gbi5sZW5ndGggJiYgcyhlKSAmJiBhKHQpKSBmb3IgKHZhciBpID0gMCwgdSA9IGUubGVuZ3RoOyBpIDwgdTsgaSsrKSB7CiAgICAgICAgbyA9IHQoZVtpXSwgZC5nZXQoZVtpXSkpLCBjLnNldChlW2ldLCBvKTsKICAgICAgfQogICAgICByZXR1cm4gYzsKICAgIH0KCiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgIl9fZXNNb2R1bGUiLCB7CiAgICAgIHZhbHVlOiAhMAogICAgfSk7CiAgICAvKiEKICAgICogc3RvcmVqcyB2MS4wLjI0CiAgICAqIExvY2FsIHN0b3JhZ2UgbG9jYWxzdG9yYWdlIHBhY2thZ2UgcHJvdmlkZXMgYSBzaW1wbGUgQVBJCiAgICAqIAogICAgKiBDb3B5cmlnaHQgKGMpIDIwMTgga2Vubnkgd2FuZyA8d293b2hvb0BxcS5jb20+CiAgICAqIGh0dHBzOi8vZ2l0aHViLmNvbS9qYXl3Y2psb3ZlL3N0b3JlLmpzCiAgICAqIAogICAgKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuCiAgICAqLwoKICAgIHZhciB1ID0gd2luZG93LmxvY2FsU3RvcmFnZTsKICAgIHUgPSBmdW5jdGlvbiAoZSkgewogICAgICB2YXIgdCA9ICJfSXNfSW5jb2duaXQiOwoKICAgICAgdHJ5IHsKICAgICAgICBlLnNldEl0ZW0odCwgInllcyIpOwogICAgICB9IGNhdGNoICh0KSB7CiAgICAgICAgaWYgKCJRdW90YUV4Y2VlZGVkRXJyb3IiID09PSB0Lm5hbWUpIHsKICAgICAgICAgIHZhciBuID0gZnVuY3Rpb24gbigpIHt9OwoKICAgICAgICAgIGUuX19wcm90b19fID0gewogICAgICAgICAgICBzZXRJdGVtOiBuLAogICAgICAgICAgICBnZXRJdGVtOiBuLAogICAgICAgICAgICByZW1vdmVJdGVtOiBuLAogICAgICAgICAgICBjbGVhcjogbgogICAgICAgICAgfTsKICAgICAgICB9CiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgInllcyIgPT09IGUuZ2V0SXRlbSh0KSAmJiBlLnJlbW92ZUl0ZW0odCk7CiAgICAgIH0KCiAgICAgIHJldHVybiBlOwogICAgfSh1KSwgbC5wcm90b3R5cGUgPSB7CiAgICAgIHNldDogZnVuY3Rpb24gc2V0KGUsIHQpIHsKICAgICAgICBpZiAoZSAmJiAhcihlKSkgdS5zZXRJdGVtKGUsIG8odCkpO2Vsc2UgaWYgKHIoZSkpIGZvciAodmFyIG4gaW4gZSkgewogICAgICAgICAgdGhpcy5zZXQobiwgZVtuXSk7CiAgICAgICAgfQogICAgICAgIHJldHVybiB0aGlzOwogICAgICB9LAogICAgICBnZXQ6IGZ1bmN0aW9uIGdldChlKSB7CiAgICAgICAgaWYgKCFlKSB7CiAgICAgICAgICB2YXIgdCA9IHt9OwogICAgICAgICAgcmV0dXJuIHRoaXMuZm9yRWFjaChmdW5jdGlvbiAoZSwgbikgewogICAgICAgICAgICByZXR1cm4gdFtlXSA9IG47CiAgICAgICAgICB9KSwgdDsKICAgICAgICB9CgogICAgICAgIGlmICgiPyIgPT09IGUuY2hhckF0KDApKSByZXR1cm4gdGhpcy5oYXMoZS5zdWJzdHIoMSkpOwogICAgICAgIHZhciBuID0gYXJndW1lbnRzOwoKICAgICAgICBpZiAobi5sZW5ndGggPiAxKSB7CiAgICAgICAgICBmb3IgKHZhciByID0ge30sIG8gPSAwLCBhID0gbi5sZW5ndGg7IG8gPCBhOyBvKyspIHsKICAgICAgICAgICAgdmFyIHMgPSBpKHUuZ2V0SXRlbShuW29dKSk7CiAgICAgICAgICAgIHMgJiYgKHJbbltvXV0gPSBzKTsKICAgICAgICAgIH0KCiAgICAgICAgICByZXR1cm4gcjsKICAgICAgICB9CgogICAgICAgIHJldHVybiBpKHUuZ2V0SXRlbShlKSk7CiAgICAgIH0sCiAgICAgIGNsZWFyOiBmdW5jdGlvbiBjbGVhcigpIHsKICAgICAgICByZXR1cm4gdS5jbGVhcigpLCB0aGlzOwogICAgICB9LAogICAgICByZW1vdmU6IGZ1bmN0aW9uIHJlbW92ZShlKSB7CiAgICAgICAgdmFyIHQgPSB0aGlzLmdldChlKTsKICAgICAgICByZXR1cm4gdS5yZW1vdmVJdGVtKGUpLCB0OwogICAgICB9LAogICAgICBoYXM6IGZ1bmN0aW9uIGhhcyhlKSB7CiAgICAgICAgcmV0dXJuIHt9Lmhhc093blByb3BlcnR5LmNhbGwodGhpcy5nZXQoKSwgZSk7CiAgICAgIH0sCiAgICAgIGtleXM6IGZ1bmN0aW9uIGtleXMoKSB7CiAgICAgICAgdmFyIGUgPSBbXTsKICAgICAgICByZXR1cm4gdGhpcy5mb3JFYWNoKGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICBlLnB1c2godCk7CiAgICAgICAgfSksIGU7CiAgICAgIH0sCiAgICAgIGZvckVhY2g6IGZ1bmN0aW9uIGZvckVhY2goZSkgewogICAgICAgIGZvciAodmFyIHQgPSAwLCBuID0gdS5sZW5ndGg7IHQgPCBuOyB0KyspIHsKICAgICAgICAgIHZhciByID0gdS5rZXkodCk7CiAgICAgICAgICBlKHIsIHRoaXMuZ2V0KHIpKTsKICAgICAgICB9CgogICAgICAgIHJldHVybiB0aGlzOwogICAgICB9LAogICAgICBzZWFyY2g6IGZ1bmN0aW9uIHNlYXJjaChlKSB7CiAgICAgICAgZm9yICh2YXIgdCA9IHRoaXMua2V5cygpLCBuID0ge30sIHIgPSAwLCBvID0gdC5sZW5ndGg7IHIgPCBvOyByKyspIHsKICAgICAgICAgIHRbcl0uaW5kZXhPZihlKSA+IC0xICYmIChuW3Rbcl1dID0gdGhpcy5nZXQodFtyXSkpOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIG47CiAgICAgIH0KICAgIH07CiAgICB2YXIgZCA9IG51bGw7CgogICAgZm9yICh2YXIgcCBpbiBsLnByb3RvdHlwZSkgewogICAgICBjW3BdID0gbC5wcm90b3R5cGVbcF07CiAgICB9CgogICAgdFsiZGVmYXVsdCJdID0gYzsKICB9LCBmdW5jdGlvbiAoZSwgdCwgbikgewogICAgInVzZSBzdHJpY3QiOwoKICAgIHZhciByID0gbigxMiksCiAgICAgICAgbyA9IG4oOSksCiAgICAgICAgaSA9IG4oMTEpLAogICAgICAgIGEgPSBuKDEzKSwKICAgICAgICBzID0gbig0OSksCiAgICAgICAgbCA9IHIoYSgpKTsKICAgIG8obCwgewogICAgICBnZXRQb2x5ZmlsbDogYSwKICAgICAgaW1wbGVtZW50YXRpb246IGksCiAgICAgIHNoaW06IHMKICAgIH0pLCBlLmV4cG9ydHMgPSBsOwogIH0sIGZ1bmN0aW9uIChlLCB0LCBuKSB7CiAgICAidXNlIHN0cmljdCI7CgogICAgdmFyIHIgPSBuKDEpLAogICAgICAgIG8gPSByKCIlU3RyaW5nJSIpLAogICAgICAgIGkgPSByKCIlVHlwZUVycm9yJSIpOwoKICAgIGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChlKSB7CiAgICAgIGlmICgic3ltYm9sIiA9PSBfdHlwZW9mKGUpKSB0aHJvdyBuZXcgaSgiQ2Fubm90IGNvbnZlcnQgYSBTeW1ib2wgdmFsdWUgdG8gYSBzdHJpbmciKTsKICAgICAgcmV0dXJuIG8oZSk7CiAgICB9OwogIH0sIGZ1bmN0aW9uIChlLCB0LCBuKSB7CiAgICAidXNlIHN0cmljdCI7CgogICAgdmFyIHIgPSBuKDEpLAogICAgICAgIG8gPSByKCIlVHlwZUVycm9yJSIpOwoKICAgIGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgIGlmIChudWxsID09IGUpIHRocm93IG5ldyBvKHQgfHwgIkNhbm5vdCBjYWxsIG1ldGhvZCBvbiAiICsgZSk7CiAgICAgIHJldHVybiBlOwogICAgfTsKICB9LCBmdW5jdGlvbiAoZSwgdCwgbikgewogICAgInVzZSBzdHJpY3QiOwoKICAgIHZhciByID0gbigxKSwKICAgICAgICBvID0gbigxMiksCiAgICAgICAgaSA9IG8ocigiU3RyaW5nLnByb3RvdHlwZS5pbmRleE9mIikpOwoKICAgIGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgIHZhciBuID0gcihlLCAhIXQpOwogICAgICByZXR1cm4gImZ1bmN0aW9uIiA9PSB0eXBlb2YgbiAmJiBpKGUsICIucHJvdG90eXBlLiIpID8gbyhuKSA6IG47CiAgICB9OwogIH0sIGZ1bmN0aW9uIChlLCB0LCBuKSB7CiAgICAidXNlIHN0cmljdCI7CgogICAgKGZ1bmN0aW9uICh0KSB7CiAgICAgIHZhciByID0gdC5TeW1ib2wsCiAgICAgICAgICBvID0gbig0OCk7CgogICAgICBlLmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuICJmdW5jdGlvbiIgPT0gdHlwZW9mIHIgJiYgImZ1bmN0aW9uIiA9PSB0eXBlb2YgU3ltYm9sICYmICJzeW1ib2wiID09IF90eXBlb2YocigiZm9vIikpICYmICJzeW1ib2wiID09IF90eXBlb2YoU3ltYm9sKCJiYXIiKSkgJiYgbygpOwogICAgICB9OwogICAgfSkuY2FsbCh0LCBuKDE0KSk7CiAgfSwgZnVuY3Rpb24gKGUsIHQsIG4pIHsKICAgICJ1c2Ugc3RyaWN0IjsKCiAgICBlLmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7CiAgICAgIGlmICgiZnVuY3Rpb24iICE9IHR5cGVvZiBTeW1ib2wgfHwgImZ1bmN0aW9uIiAhPSB0eXBlb2YgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgcmV0dXJuICExOwogICAgICBpZiAoInN5bWJvbCIgPT0gX3R5cGVvZihTeW1ib2wuaXRlcmF0b3IpKSByZXR1cm4gITA7CiAgICAgIHZhciBlID0ge30sCiAgICAgICAgICB0ID0gU3ltYm9sKCJ0ZXN0IiksCiAgICAgICAgICBuID0gT2JqZWN0KHQpOwogICAgICBpZiAoInN0cmluZyIgPT0gdHlwZW9mIHQpIHJldHVybiAhMTsKICAgICAgaWYgKCJbb2JqZWN0IFN5bWJvbF0iICE9PSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodCkpIHJldHVybiAhMTsKICAgICAgaWYgKCJbb2JqZWN0IFN5bWJvbF0iICE9PSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobikpIHJldHVybiAhMTsKICAgICAgZVt0XSA9IDQyOwoKICAgICAgZm9yICh0IGluIGUpIHsKICAgICAgICByZXR1cm4gITE7CiAgICAgIH0KCiAgICAgIGlmICgiZnVuY3Rpb24iID09IHR5cGVvZiBPYmplY3Qua2V5cyAmJiAwICE9PSBPYmplY3Qua2V5cyhlKS5sZW5ndGgpIHJldHVybiAhMTsKICAgICAgaWYgKCJmdW5jdGlvbiIgPT0gdHlwZW9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzICYmIDAgIT09IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGUpLmxlbmd0aCkgcmV0dXJuICExOwogICAgICB2YXIgciA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoZSk7CiAgICAgIGlmICgxICE9PSByLmxlbmd0aCB8fCByWzBdICE9PSB0KSByZXR1cm4gITE7CiAgICAgIGlmICghT2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKGUsIHQpKSByZXR1cm4gITE7CgogICAgICBpZiAoImZ1bmN0aW9uIiA9PSB0eXBlb2YgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcikgewogICAgICAgIHZhciBvID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLCB0KTsKICAgICAgICBpZiAoNDIgIT09IG8udmFsdWUgfHwgITAgIT09IG8uZW51bWVyYWJsZSkgcmV0dXJuICExOwogICAgICB9CgogICAgICByZXR1cm4gITA7CiAgICB9OwogIH0sIGZ1bmN0aW9uIChlLCB0LCBuKSB7CiAgICAidXNlIHN0cmljdCI7CgogICAgdmFyIHIgPSBuKDkpLAogICAgICAgIG8gPSBuKDEzKTsKCiAgICBlLmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBlID0gbygpOwogICAgICByZXR1cm4gcihTdHJpbmcucHJvdG90eXBlLCB7CiAgICAgICAgdHJpbTogZQogICAgICB9LCB7CiAgICAgICAgdHJpbTogZnVuY3Rpb24gdHJpbSgpIHsKICAgICAgICAgIHJldHVybiBTdHJpbmcucHJvdG90eXBlLnRyaW0gIT09IGU7CiAgICAgICAgfQogICAgICB9KSwgZTsKICAgIH07CiAgfSwgZnVuY3Rpb24gKGUsIHQsIG4pIHsKICAgICJ1c2Ugc3RyaWN0IjsKCiAgICAoZnVuY3Rpb24gKHQpIHsKICAgICAgdmFyIG4gPSAicHJvZHVjdGlvbiIgIT09IHQuZW52Lk5PREVfRU5WLAogICAgICAgICAgciA9IGZ1bmN0aW9uIHIoKSB7fTsKCiAgICAgIGlmIChuKSB7CiAgICAgICAgdmFyIG8gPSBmdW5jdGlvbiBvKGUsIHQpIHsKICAgICAgICAgIHZhciBuID0gYXJndW1lbnRzLmxlbmd0aDsKICAgICAgICAgIHQgPSBuZXcgQXJyYXkobiA+IDEgPyBuIC0gMSA6IDApOwoKICAgICAgICAgIGZvciAodmFyIHIgPSAxOyByIDwgbjsgcisrKSB7CiAgICAgICAgICAgIHRbciAtIDFdID0gYXJndW1lbnRzW3JdOwogICAgICAgICAgfQoKICAgICAgICAgIHZhciBvID0gMCwKICAgICAgICAgICAgICBpID0gIldhcm5pbmc6ICIgKyBlLnJlcGxhY2UoLyVzL2csIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgcmV0dXJuIHRbbysrXTsKICAgICAgICAgIH0pOwoKICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihpKTsKICAgICAgICAgIH0gY2F0Y2ggKGUpIHt9CiAgICAgICAgfTsKCiAgICAgICAgciA9IGZ1bmN0aW9uIHIoZSwgdCwgbikgewogICAgICAgICAgdmFyIHIgPSBhcmd1bWVudHMubGVuZ3RoOwogICAgICAgICAgbiA9IG5ldyBBcnJheShyID4gMiA/IHIgLSAyIDogMCk7CgogICAgICAgICAgZm9yICh2YXIgaSA9IDI7IGkgPCByOyBpKyspIHsKICAgICAgICAgICAgbltpIC0gMl0gPSBhcmd1bWVudHNbaV07CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKHZvaWQgMCA9PT0gdCkgdGhyb3cgbmV3IEVycm9yKCJgd2FybmluZyhjb25kaXRpb24sIGZvcm1hdCwgLi4uYXJncylgIHJlcXVpcmVzIGEgd2FybmluZyBtZXNzYWdlIGFyZ3VtZW50Iik7CiAgICAgICAgICBlIHx8IG8uYXBwbHkobnVsbCwgW3RdLmNvbmNhdChuKSk7CiAgICAgICAgfTsKICAgICAgfQoKICAgICAgZS5leHBvcnRzID0gcjsKICAgIH0pLmNhbGwodCwgbig0MSkpOwogIH0sIGZ1bmN0aW9uIChlLCB0LCBuKSB7CiAgICBmdW5jdGlvbiByKGUsIHQpIHsKICAgICAgcmV0dXJuIG5ldyBhKHQpLnByb2Nlc3MoZSk7CiAgICB9CgogICAgdmFyIG8gPSBuKDE1KSwKICAgICAgICBpID0gbigxNiksCiAgICAgICAgYSA9IG4oNTIpOwogICAgdCA9IGUuZXhwb3J0cyA9IHIsIHQuZmlsdGVyWFNTID0gciwgdC5GaWx0ZXJYU1MgPSBhOwoKICAgIGZvciAodmFyIHMgaW4gbykgewogICAgICB0W3NdID0gb1tzXTsKICAgIH0KCiAgICBmb3IgKHZhciBzIGluIGkpIHsKICAgICAgdFtzXSA9IGlbc107CiAgICB9CgogICAgInVuZGVmaW5lZCIgIT0gdHlwZW9mIHdpbmRvdyAmJiAod2luZG93LmZpbHRlclhTUyA9IGUuZXhwb3J0cyksIGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuICJ1bmRlZmluZWQiICE9IHR5cGVvZiBzZWxmICYmICJ1bmRlZmluZWQiICE9IHR5cGVvZiBEZWRpY2F0ZWRXb3JrZXJHbG9iYWxTY29wZSAmJiBzZWxmIGluc3RhbmNlb2YgRGVkaWNhdGVkV29ya2VyR2xvYmFsU2NvcGU7CiAgICB9KCkgJiYgKHNlbGYuZmlsdGVyWFNTID0gZS5leHBvcnRzKTsKICB9LCBmdW5jdGlvbiAoZSwgdCwgbikgewogICAgZnVuY3Rpb24gcihlKSB7CiAgICAgIHJldHVybiB2b2lkIDAgPT09IGUgfHwgbnVsbCA9PT0gZTsKICAgIH0KCiAgICBmdW5jdGlvbiBvKGUpIHsKICAgICAgdmFyIHQgPSBwLnNwYWNlSW5kZXgoZSk7CiAgICAgIGlmICgtMSA9PT0gdCkgcmV0dXJuIHsKICAgICAgICBodG1sOiAiIiwKICAgICAgICBjbG9zaW5nOiAiLyIgPT09IGVbZS5sZW5ndGggLSAyXQogICAgICB9OwogICAgICBlID0gcC50cmltKGUuc2xpY2UodCArIDEsIC0xKSk7CiAgICAgIHZhciBuID0gIi8iID09PSBlW2UubGVuZ3RoIC0gMV07CiAgICAgIHJldHVybiBuICYmIChlID0gcC50cmltKGUuc2xpY2UoMCwgLTEpKSksIHsKICAgICAgICBodG1sOiBlLAogICAgICAgIGNsb3Npbmc6IG4KICAgICAgfTsKICAgIH0KCiAgICBmdW5jdGlvbiBpKGUpIHsKICAgICAgdmFyIHQgPSB7fTsKCiAgICAgIGZvciAodmFyIG4gaW4gZSkgewogICAgICAgIHRbbl0gPSBlW25dOwogICAgICB9CgogICAgICByZXR1cm4gdDsKICAgIH0KCiAgICBmdW5jdGlvbiBhKGUpIHsKICAgICAgZSA9IGkoZSB8fCB7fSksIGUuc3RyaXBJZ25vcmVUYWcgJiYgKGUub25JZ25vcmVUYWcsIGUub25JZ25vcmVUYWcgPSBsLm9uSWdub3JlVGFnU3RyaXBBbGwpLCBlLndoaXRlTGlzdCA9IGUud2hpdGVMaXN0IHx8IGwud2hpdGVMaXN0LCBlLm9uVGFnID0gZS5vblRhZyB8fCBsLm9uVGFnLCBlLm9uVGFnQXR0ciA9IGUub25UYWdBdHRyIHx8IGwub25UYWdBdHRyLCBlLm9uSWdub3JlVGFnID0gZS5vbklnbm9yZVRhZyB8fCBsLm9uSWdub3JlVGFnLCBlLm9uSWdub3JlVGFnQXR0ciA9IGUub25JZ25vcmVUYWdBdHRyIHx8IGwub25JZ25vcmVUYWdBdHRyLCBlLnNhZmVBdHRyVmFsdWUgPSBlLnNhZmVBdHRyVmFsdWUgfHwgbC5zYWZlQXR0clZhbHVlLCBlLmVzY2FwZUh0bWwgPSBlLmVzY2FwZUh0bWwgfHwgbC5lc2NhcGVIdG1sLCB0aGlzLm9wdGlvbnMgPSBlLCAhMSA9PT0gZS5jc3MgPyB0aGlzLmNzc0ZpbHRlciA9ICExIDogKGUuY3NzID0gZS5jc3MgfHwge30sIHRoaXMuY3NzRmlsdGVyID0gbmV3IHMoZS5jc3MpKTsKICAgIH0KCiAgICB2YXIgcyA9IG4oMykuRmlsdGVyQ1NTLAogICAgICAgIGwgPSBuKDE1KSwKICAgICAgICBjID0gbigxNiksCiAgICAgICAgdSA9IGMucGFyc2VUYWcsCiAgICAgICAgZCA9IGMucGFyc2VBdHRyLAogICAgICAgIHAgPSBuKDUpOwogICAgYS5wcm90b3R5cGUucHJvY2VzcyA9IGZ1bmN0aW9uIChlKSB7CiAgICAgIGlmIChlID0gZSB8fCAiIiwgIShlID0gZS50b1N0cmluZygpKSkgcmV0dXJuICIiOwogICAgICB2YXIgdCA9IHRoaXMsCiAgICAgICAgICBuID0gdC5vcHRpb25zLAogICAgICAgICAgaSA9IG4ud2hpdGVMaXN0LAogICAgICAgICAgYSA9IG4ub25UYWcsCiAgICAgICAgICBzID0gbi5vbklnbm9yZVRhZywKICAgICAgICAgIGMgPSBuLm9uVGFnQXR0ciwKICAgICAgICAgIGYgPSBuLm9uSWdub3JlVGFnQXR0ciwKICAgICAgICAgIGggPSBuLnNhZmVBdHRyVmFsdWUsCiAgICAgICAgICB2ID0gbi5lc2NhcGVIdG1sLAogICAgICAgICAgZyA9IHQuY3NzRmlsdGVyOwogICAgICBuLnN0cmlwQmxhbmtDaGFyICYmIChlID0gbC5zdHJpcEJsYW5rQ2hhcihlKSksIG4uYWxsb3dDb21tZW50VGFnIHx8IChlID0gbC5zdHJpcENvbW1lbnRUYWcoZSkpOwogICAgICB2YXIgbSA9ICExOwoKICAgICAgaWYgKG4uc3RyaXBJZ25vcmVUYWdCb2R5KSB7CiAgICAgICAgdmFyIG0gPSBsLlN0cmlwVGFnQm9keShuLnN0cmlwSWdub3JlVGFnQm9keSwgcyk7CiAgICAgICAgcyA9IG0ub25JZ25vcmVUYWc7CiAgICAgIH0KCiAgICAgIHZhciB5ID0gdShlLCBmdW5jdGlvbiAoZSwgdCwgbiwgbCwgdSkgewogICAgICAgIHZhciBtID0gewogICAgICAgICAgc291cmNlUG9zaXRpb246IGUsCiAgICAgICAgICBwb3NpdGlvbjogdCwKICAgICAgICAgIGlzQ2xvc2luZzogdSwKICAgICAgICAgIGlzV2hpdGU6IGkuaGFzT3duUHJvcGVydHkobikKICAgICAgICB9LAogICAgICAgICAgICB5ID0gYShuLCBsLCBtKTsKICAgICAgICBpZiAoIXIoeSkpIHJldHVybiB5OwoKICAgICAgICBpZiAobS5pc1doaXRlKSB7CiAgICAgICAgICBpZiAobS5pc0Nsb3NpbmcpIHJldHVybiAiPC8iICsgbiArICI+IjsKICAgICAgICAgIHZhciBiID0gbyhsKSwKICAgICAgICAgICAgICB3ID0gaVtuXSwKICAgICAgICAgICAgICB4ID0gZChiLmh0bWwsIGZ1bmN0aW9uIChlLCB0KSB7CiAgICAgICAgICAgIHZhciBvID0gLTEgIT09IHAuaW5kZXhPZih3LCBlKSwKICAgICAgICAgICAgICAgIGkgPSBjKG4sIGUsIHQsIG8pOwogICAgICAgICAgICBpZiAoIXIoaSkpIHJldHVybiBpOwogICAgICAgICAgICBpZiAobykgcmV0dXJuIHQgPSBoKG4sIGUsIHQsIGcpLCB0ID8gZSArICc9IicgKyB0ICsgJyInIDogZTsKICAgICAgICAgICAgdmFyIGkgPSBmKG4sIGUsIHQsIG8pOwogICAgICAgICAgICByZXR1cm4gcihpKSA/IHZvaWQgMCA6IGk7CiAgICAgICAgICB9KSwKICAgICAgICAgICAgICBsID0gIjwiICsgbjsKICAgICAgICAgIHJldHVybiB4ICYmIChsICs9ICIgIiArIHgpLCBiLmNsb3NpbmcgJiYgKGwgKz0gIiAvIiksIGwgKz0gIj4iOwogICAgICAgIH0KCiAgICAgICAgdmFyIHkgPSBzKG4sIGwsIG0pOwogICAgICAgIHJldHVybiByKHkpID8gdihsKSA6IHk7CiAgICAgIH0sIHYpOwogICAgICByZXR1cm4gbSAmJiAoeSA9IG0ucmVtb3ZlKHkpKSwgeTsKICAgIH0sIGUuZXhwb3J0cyA9IGE7CiAgfSwgZnVuY3Rpb24gKGUsIHQpIHsKICAgIGUuZXhwb3J0cyA9IHsKICAgICAgc21pbGU6ICJlMy8yMDE4bmV3X3dlaXhpb2EwMl9vcmcucG5nIiwKICAgICAgbG92ZWx5OiAiMDkvMjAxOG5ld19rZWFpX29yZy5wbmciLAogICAgICBoYXBweTogIjFlLzIwMThuZXdfdGFpa2FpeGluX29yZy5wbmciLAogICAgICBjbGFwOiAiNmUvMjAxOG5ld19ndXpoYW5nX3RodW1iLnBuZyIsCiAgICAgIHdoZWU6ICIzMy8yMDE4bmV3X3hpeGlfdGh1bWIucG5nIiwKICAgICAgaGFoYTogIjhmLzIwMThuZXdfaGFoYV90aHVtYi5wbmciLAogICAgICAibGF1Z2ggYW5kIGNyeSI6ICI0YS8yMDE4bmV3X3hpYW9rdV90aHVtYi5wbmciLAogICAgICB3aW5rOiAiNDMvMjAxOG5ld19qaXlhbl9vcmcucG5nIiwKICAgICAgZ3JlZGR5OiAiZmEvMjAxOG5ld19jaGFuenVpX29yZy5wbmciLAogICAgICBhd2t3YXJkOiAiYTMvMjAxOG5ld19oZWl4aWFuX3RodW1iLnBuZyIsCiAgICAgIHN3ZWF0OiAiMjgvMjAxOG5ld19oYW5fb3JnLnBuZyIsCiAgICAgICJwaWNrIG5vc2UiOiAiOWEvMjAxOG5ld193YWJpX3RodW1iLnBuZyIsCiAgICAgIGh1bTogIjdjLzIwMThuZXdfaGVuZ190aHVtYi5wbmciLAogICAgICBhbmdyeTogImY2LzIwMThuZXdfbnVfdGh1bWIucG5nIiwKICAgICAgZ3JpZXZhbmNlOiAiYTUvMjAxOG5ld193ZWlxdV90aHVtYi5wbmciLAogICAgICBwb29yOiAiOTYvMjAxOG5ld19rZWxpYW5fb3JnLnBuZyIsCiAgICAgIGRpc2FwcG9pbnQ6ICJhYS8yMDE4bmV3X3NoaXdhbmdfdGh1bWIucG5nIiwKICAgICAgc2FkOiAiZWUvMjAxOG5ld19iZWlzaGFuZ19vcmcucG5nIiwKICAgICAgdGVhcjogIjZlLzIwMThuZXdfbGVpbXVfb3JnLnBuZyIsCiAgICAgICJubyB3YXkiOiAiODMvMjAxOG5ld19rdXhpYW9fb3JnLnBuZyIsCiAgICAgIHNoeTogImMxLzIwMThuZXdfaGFpeGl1X29yZy5wbmciLAogICAgICBkaXJ0OiAiMTAvMjAxOG5ld193dV90aHVtYi5wbmciLAogICAgICAibG92ZSB5b3UiOiAiZjYvMjAxOG5ld19haW5pX29yZy5wbmciLAogICAgICBraXNzOiAiMmMvMjAxOG5ld19xaW5xaW5fdGh1bWIucG5nIiwKICAgICAgYW1vcm91c25lc3M6ICI5ZC8yMDE4bmV3X2h1YXhpbl9vcmcucG5nIiwKICAgICAgbG9uZ2luZzogImM5LzIwMThuZXdfY2hvbmdqaW5nX29yZy5wbmciLAogICAgICBkZXNpcmU6ICIzZS8yMDE4bmV3X3RpYW5waW5nX3RodW1iLnBuZyIsCiAgICAgICJiYWQgbGF1Z2giOiAiNGQvMjAxOG5ld19odWFpeGlhb19vcmcucG5nIiwKICAgICAgYmxhY2tuZXNzOiAiOWUvMjAxOG5ld195aW54aWFuX29yZy5wbmciLAogICAgICAibGF1Z2ggd2l0aG91dCB3b3JkIjogIjJkLzIwMThuZXdfeGlhb2VyYnV5dV9vcmcucG5nIiwKICAgICAgdGl0dGVyOiAiNzEvMjAxOG5ld190b3V4aWFvX29yZy5wbmciLAogICAgICBjb29sOiAiYzQvMjAxOG5ld19rdV9vcmcucG5nIiwKICAgICAgIm5vdCBlYXN5IjogImFhLzIwMThuZXdfYmluZ2J1amlhbmRhbl90aHVtYi5wbmciLAogICAgICB0aGluazogIjMwLzIwMThuZXdfc2lrYW9fb3JnLnBuZyIsCiAgICAgIHF1ZXN0aW9uOiAiYjgvMjAxOG5ld19uaW5nd2VuX29yZy5wbmciLAogICAgICAibm8gaWRlYSI6ICIyYS8yMDE4bmV3X3dlbmhhb190aHVtYi5wbmciLAogICAgICBkaXp6eTogIjA3LzIwMThuZXdfeXVuX3RodW1iLnBuZyIsCiAgICAgIGJvbWI6ICJhMi8yMDE4bmV3X3NodWFpX3RodW1iLnBuZyIsCiAgICAgIGJvbmU6ICJhMS8yMDE4bmV3X2t1bG91X3RodW1iLnBuZyIsCiAgICAgICJiZSBxdWlldCI6ICJiMC8yMDE4bmV3X3h1X29yZy5wbmciLAogICAgICAic2h1dCB1cCI6ICI2Mi8yMDE4bmV3X2JpenVpX29yZy5wbmciLAogICAgICBzdHVwaWQ6ICJkZC8yMDE4bmV3X3NoYXlhbl9vcmcucG5nIiwKICAgICAgInN1cnByaXNlICI6ICI0OS8yMDE4bmV3X2NoaWppbmdfb3JnLnBuZyIsCiAgICAgIHZvbWl0OiAiMDgvMjAxOG5ld190dV9vcmcucG5nIiwKICAgICAgY29sZDogIjQwLzIwMThuZXdfa291emhhb190aHVtYi5wbmciLAogICAgICBzaWNrOiAiM2IvMjAxOG5ld19zaGVuZ2JpbmdfdGh1bWIucG5nIiwKICAgICAgYnllOiAiZmQvMjAxOG5ld19iYWliYWlfdGh1bWIucG5nIiwKICAgICAgImxvb2sgZG93biBvbiI6ICJkYS8yMDE4bmV3X2Jpc2hpX29yZy5wbmciLAogICAgICAid2hpdGUgZXllIjogImVmLzIwMThuZXdfbGFuZGVsaW5pX29yZy5wbmciLAogICAgICAibGVmdCBodW0iOiAiNDMvMjAxOG5ld196dW9oZW5naGVuZ190aHVtYi5wbmciLAogICAgICAicmlnaHQgaHVtIjogImMxLzIwMThuZXdfeW91aGVuZ2hlbmdfdGh1bWIucG5nIiwKICAgICAgY3Jhenk6ICIxNy8yMDE4bmV3X3podWFrdWFuZ19vcmcucG5nIiwKICAgICAgInNjb2xkICI6ICI4Ny8yMDE4bmV3X3pob3VtYV90aHVtYi5wbmciLAogICAgICAiaGl0IG9uIGZhY2UiOiAiY2IvMjAxOG5ld19kYWxpYW5fb3JnLnBuZyIsCiAgICAgIHdvdzogImFlLzIwMThuZXdfZGluZ19vcmcucG5nIiwKICAgICAgZmFuOiAiODYvMjAxOG5ld19odWZlbjAyX29yZy5wbmciLAogICAgICBtb25leTogImEyLzIwMThuZXdfcWlhbl90aHVtYi5wbmciLAogICAgICB5YXduOiAiNTUvMjAxOG5ld19kYWhhcWlhbl9vcmcucG5nIiwKICAgICAgc2xlZXB5OiAiM2MvMjAxOG5ld19rdW5fdGh1bWIucG5nIiwKICAgICAgc2xlZXA6ICJlMi8yMDE4bmV3X3NodWlqaWFvX3RodW1iLnBuZyIsCiAgICAgICJ3YXRlcm1lbG9uICI6ICIwMS8yMDE4bmV3X2NoaWd1YV90aHVtYi5wbmciLAogICAgICBkb2dlOiAiYTEvMjAxOG5ld19kb2dlMDJfb3JnLnBuZyIsCiAgICAgIGRvZzogIjIyLzIwMThuZXdfZXJoYV9vcmcucG5nIiwKICAgICAgY2F0OiAiN2IvMjAxOG5ld19taWFvbWlhb190aHVtYi5wbmciLAogICAgICB0aHVtYjogImU2LzIwMThuZXdfemFuX29yZy5wbmciLAogICAgICBnb29kOiAiOGEvMjAxOG5ld19nb29kX29yZy5wbmciLAogICAgICBvazogIjQ1LzIwMThuZXdfb2tfb3JnLnBuZyIsCiAgICAgIHllYWg6ICIyOS8yMDE4bmV3X3llX3RodW1iLnBuZyIsCiAgICAgICJzaGFjayBoYW5kIjogImU5LzIwMThuZXdfd29zaG91X3RodW1iLnBuZyIsCiAgICAgIGJvdzogImU3LzIwMThuZXdfenVveWlfb3JnLnBuZyIsCiAgICAgIGNvbWU6ICI0Mi8yMDE4bmV3X2d1b2xhaV90aHVtYi5wbmciLAogICAgICBwdW5jaDogIjg2LzIwMThuZXdfcXVhbnRvdV90aHVtYi5wbmciCiAgICB9OwogIH0sIGZ1bmN0aW9uIChlLCB0KSB7CiAgICBlLmV4cG9ydHMgPSB7CiAgICAgIG5pY2s6ICJOaWNrTmFtZSIsCiAgICAgIG1haWw6ICJFLU1haWwiLAogICAgICBsaW5rOiAiV2Vic2l0ZShodHRwOi8vKSIsCiAgICAgIG5pY2tGYWlsOiAiTmlja05hbWUgY2Fubm90IGJlIGxlc3MgdGhhbiAzIGJ5dGVzLiIsCiAgICAgIG1haWxGYWlsOiAiUGxlYXNlIGNvbmZpcm0geW91ciBlbWFpbCBhZGRyZXNzLiIsCiAgICAgIHNvZmE6ICJObyBjb21tZW50IHlldC4iLAogICAgICBzdWJtaXQ6ICJTdWJtaXQiLAogICAgICByZXBseTogIlJlcGx5IiwKICAgICAgY2FuY2VsUmVwbHk6ICJDYW5jZWwgcmVwbHkiLAogICAgICBjb21tZW50czogIkNvbW1lbnRzIiwKICAgICAgY2FuY2VsOiAiQ2FuY2VsIiwKICAgICAgY29uZmlybTogIkNvbmZpcm0iLAogICAgICAiY29udGludWUiOiAiQ29udGludWUiLAogICAgICBtb3JlOiAiTG9hZCBNb3JlLi4uIiwKICAgICAgcHJldmlldzogIlByZXZpZXciLAogICAgICBlbW9qaTogIkVtb2ppIiwKICAgICAgZXhwYW5kOiAiU2VlIG1vcmUuLi4uIiwKICAgICAgc2Vjb25kczogInNlY29uZHMgYWdvIiwKICAgICAgbWludXRlczogIm1pbnV0ZXMgYWdvIiwKICAgICAgaG91cnM6ICJob3VycyBhZ28iLAogICAgICBkYXlzOiAiZGF5cyBhZ28iLAogICAgICBub3c6ICJqdXN0IG5vdyIsCiAgICAgIHVwbG9hZGluZzogIlVwbG9hZGluZyAuLi4iLAogICAgICB1cGxvYWREb25lOiAiVXBsb2FkIGNvbXBsZXRlZCEiLAogICAgICBidXN5OiAiU3VibWl0IGlzIGJ1c3ksIHBsZWFzZSB3YWl0Li4uIiwKICAgICAgImNvZGUtOTgiOiAiVmFsaW5lIGluaXRpYWxpemF0aW9uIGZhaWxlZCwgcGxlYXNlIGNoZWNrIHlvdXIgdmVyc2lvbiBvZiBhdi1taW4uanMuIiwKICAgICAgImNvZGUtOTkiOiAiVmFsaW5lIGluaXRpYWxpemF0aW9uIGZhaWxlZCwgUGxlYXNlIGNoZWNrIHRoZSBgZWxgIGVsZW1lbnQgaW4gdGhlIGluaXQgbWV0aG9kLiIsCiAgICAgICJjb2RlLTEwMCI6ICJWYWxpbmUgaW5pdGlhbGl6YXRpb24gZmFpbGVkLCBQbGVhc2UgY2hlY2sgeW91ciBhcHBJZCBhbmQgYXBwS2V5LiIsCiAgICAgICJjb2RlLTE0MCI6ICJUaGUgdG90YWwgbnVtYmVyIG9mIEFQSSBjYWxscyB0b2RheSBoYXMgZXhjZWVkZWQgdGhlIGRldmVsb3BtZW50IHZlcnNpb24gbGltaXQuIiwKICAgICAgImNvZGUtNDAxIjogIlVuYXV0aG9yaXplZCBvcGVyYXRpb24sIFBsZWFzZSBjaGVjayB5b3VyIGFwcElkIGFuZCBhcHBLZXkuIiwKICAgICAgImNvZGUtNDAzIjogIkFjY2VzcyBkZW5pZWQgYnkgQVBJIGRvbWFpbiB3aGl0ZSBsaXN0LCBQbGVhc2UgY2hlY2sgeW91ciBzZWN1cml0eSBkb21haW4uIgogICAgfTsKICB9LCBmdW5jdGlvbiAoZSwgdCkgewogICAgZS5leHBvcnRzID0gewogICAgICBuaWNrOiAi44OL44OD44Kv44ON44O844OgIiwKICAgICAgbWFpbDogIuODoeODvOODq+OCouODieODrOOCuSIsCiAgICAgIGxpbms6ICLjgrXjgqTjg4goaHR0cDovLykiLAogICAgICBuaWNrRmFpbDogIjPjg5DjgqTjg4jku6XkuIrjga7jg4vjg4Pjgq/jg43jg7zjg6DjgpLjgZTlhaXlipvjgY/jgaDjgZXjgYQuIiwKICAgICAgbWFpbEZhaWw6ICLjg6Hjg7zjg6vjgqLjg4njg6zjgrnjgpLjgZTnorroqo3jgY/jgaDjgZXjgYQuIiwKICAgICAgc29mYTogIuOCs+ODoeODs+ODiOOBl+OBvuOBl+OCh+OBhn4iLAogICAgICBzdWJtaXQ6ICLmj5Dlh7rjgZnjgosiLAogICAgICByZXBseTogIui/lOS/oeOBmeOCiyIsCiAgICAgIGNhbmNlbFJlcGx5OiAi44Kt44Oj44Oz44K744OrIiwKICAgICAgY29tbWVudHM6ICLjgrPjg6Hjg7Pjg4giLAogICAgICBjYW5jZWw6ICLjgq3jg6Pjg7Pjgrvjg6siLAogICAgICBjb25maXJtOiAi56K66KqN44GZ44KLIiwKICAgICAgImNvbnRpbnVlIjogIue7p+e7rSIsCiAgICAgIG1vcmU6ICLjgZXjgonjgavoqq3jgb/ovrzjgoAuLi4iLAogICAgICBwcmV2aWV3OiAi44OX44Os44OT44Ol44O8IiwKICAgICAgZW1vamk6ICLntbXmloflrZciLAogICAgICBleHBhbmQ6ICLjgoLjgaPjgajopovjgosiLAogICAgICBzZWNvbmRzOiAi56eS5YmNIiwKICAgICAgbWludXRlczogIuWIhuWJjSIsCiAgICAgIGhvdXJzOiAi5pmC6ZaT5YmNIiwKICAgICAgZGF5czogIuaXpeWJjSIsCiAgICAgIG5vdzogIuOBn+OBo+OBoOS7iiIsCiAgICAgIHVwbG9hZGluZzogIuOCouODg+ODl+ODreODvOODieS4rS4uLiIsCiAgICAgIHVwbG9hZERvbmU6ICLjgqLjg4Pjg5fjg63jg7zjg4njgYzlrozkuobjgZfjgb7jgZfjgZ8hIiwKICAgICAgYnVzeTogIjIwIOenkumWk+malOOBp+aPkOWHuuOBl+OBpuOBj+OBoOOBleOBhCAgICAuLi4iLAogICAgICAiY29kZS05OCI6ICLjg63jg7zjg4njgqjjg6njg7zjgafjgZnjgIJhdi1taW4uanMg44Gu44OQ44O844K444On44Oz44KS56K66KqN44GX44Gm44GP44Gg44GV44GELiIsCiAgICAgICJjb2RlLTk5IjogIuODreODvOODieOCqOODqeODvOOBp+OBmeOAgmluaXTjgavjgYLjgotgZWxg44Ko44Os44Oh44Oz44OI44KS56K66KqN44GP44Gg44GV44GELiIsCiAgICAgICJjb2RlLTEwMCI6ICLjg63jg7zjg4njgqjjg6njg7zjgafjgZnjgIJBcHBJZOOBqEFwcEtleeOCkueiuuiqjeOBj+OBoOOBleOBhC4iLAogICAgICAiY29kZS0xNDAiOiAi5LuK5pel44GuQVBJ44Kz44O844Or44Gu57eP5pWw44GM6ZaL55m644OQ44O844K444On44Oz44Gu5LiK6ZmQ44KS6LaF44GI44GfLiIsCiAgICAgICJjb2RlLTQwMSI6ICLmqKnpmZDjgYzliLbpmZDjgZXjgozjgabjgYTjgb7jgZnjgIJBcHBJZOOBqEFwcEtleeOCkueiuuiqjeOBj+OBoOOBleOBhC4iLAogICAgICAiY29kZS00MDMiOiAi44Ki44Kv44K744K544GMQVBJ44Gq44Gp44Gr5Yi26ZmQ44GV44KM44G+44GX44Gf44CB44OJ44Oh44Kk44Oz5ZCN44Gu44K744Kt44Ol44Oq44OG44Kj6Kit5a6a44KS56K66KqN44GP44Gg44GV44GEIgogICAgfTsKICB9LCBmdW5jdGlvbiAoZSwgdCkgewogICAgZS5leHBvcnRzID0gewogICAgICBuaWNrOiAi5pi156ewIiwKICAgICAgbWFpbDogIumCrueusSIsCiAgICAgIGxpbms6ICLnvZHlnYAoaHR0cDovLykiLAogICAgICBuaWNrRmFpbDogIuaYteensOS4jeiDveWwkeS6jjPkuKrlrZfnrKYiLAogICAgICBtYWlsRmFpbDogIuivt+Whq+WGmeato+ehrueahOmCruS7tuWcsOWdgCIsCiAgICAgIHNvZmE6ICLmnaXlj5Hor4TorrrlkKd+IiwKICAgICAgc3VibWl0OiAi5o+Q5LqkIiwKICAgICAgcmVwbHk6ICLlm57lpI0iLAogICAgICBjYW5jZWxSZXBseTogIuWPlua2iOWbnuWkjSIsCiAgICAgIGNvbW1lbnRzOiAi6K+E6K66IiwKICAgICAgY2FuY2VsOiAi5Y+W5raIIiwKICAgICAgY29uZmlybTogIuehruiupCIsCiAgICAgICJjb250aW51ZSI6ICLnu6fnu60iLAogICAgICBtb3JlOiAi5Yqg6L295pu05aSaLi4uIiwKICAgICAgcHJldmlldzogIumihOiniCIsCiAgICAgIGVtb2ppOiAi6KGo5oOFIiwKICAgICAgZXhwYW5kOiAi5p+l55yL5pu05aSaLi4uIiwKICAgICAgc2Vjb25kczogIuenkuWJjSIsCiAgICAgIG1pbnV0ZXM6ICLliIbpkp/liY0iLAogICAgICBob3VyczogIuWwj+aXtuWJjSIsCiAgICAgIGRheXM6ICLlpKnliY0iLAogICAgICBub3c6ICLliJrliJoiLAogICAgICB1cGxvYWRpbmc6ICLmraPlnKjkvKDovpMuLi4iLAogICAgICB1cGxvYWREb25lOiAi5Lyg6L6T5a6M5oiQISIsCiAgICAgIGJ1c3k6ICLmk43kvZzpopHnuYHvvIzor7fnqI3lgJnlho3or5UuLi4iLAogICAgICAiY29kZS05OCI6ICJWYWxpbmUg5Yid5aeL5YyW5aSx6LSl77yM6K+35qOA5p+lIGF2LW1pbi5qcyDniYjmnKwiLAogICAgICAiY29kZS05OSI6ICJWYWxpbmUg5Yid5aeL5YyW5aSx6LSl77yM6K+35qOA5p+laW5pdOS4reeahGBlbGDlhYPntKAuIiwKICAgICAgImNvZGUtMTAwIjogIlZhbGluZSDliJ3lp4vljJblpLHotKXvvIzor7fmo4Dmn6XkvaDnmoRBcHBJZOWSjEFwcEtleS4iLAogICAgICAiY29kZS0xNDAiOiAi5LuK5pelIEFQSSDosIPnlKjmgLvmrKHmlbDlt7LotoXov4flvIDlj5HniYjpmZDliLYuIiwKICAgICAgImNvZGUtNDAxIjogIuacque7j+aOiOadg+eahOaTjeS9nO+8jOivt+ajgOafpeS9oOeahEFwcElk5ZKMQXBwS2V5LiIsCiAgICAgICJjb2RlLTQwMyI6ICLorr/pl67ooqtBUEnln5/lkI3nmb3lkI3ljZXmi5Lnu53vvIzor7fmo4Dmn6XkvaDnmoTlronlhajln5/lkI3orr7nva4uIgogICAgfTsKICB9LCBmdW5jdGlvbiAoZSwgdCkgewogICAgZS5leHBvcnRzID0gewogICAgICBuaWNrOiAi5pqx56ixIiwKICAgICAgbWFpbDogIumDteeusSIsCiAgICAgIGxpbms6ICLntrLlnYAoaHR0cDovLykiLAogICAgICBuaWNrRmFpbDogIuaYteeoseS4jeiDveWwkeaWvDPlgIvlrZfnrKYiLAogICAgICBtYWlsRmFpbDogIuiri+Whq+Wvq+ato+eiuueahOmDteS7tuWcsOWdgCIsCiAgICAgIHNvZmE6ICLkvobnmbzoqZXoq5blkKd+IiwKICAgICAgc3VibWl0OiAi5o+Q5LqkIiwKICAgICAgcmVwbHk6ICLlm57opoYiLAogICAgICBjYW5jZWxSZXBseTogIuWPlua2iOWbnuimhiIsCiAgICAgIGNvbW1lbnRzOiAi6KmV6KuWIiwKICAgICAgY2FuY2VsOiAi5Y+W5raIIiwKICAgICAgY29uZmlybTogIueiuuiqjSIsCiAgICAgICJjb250aW51ZSI6ICLnubznuowiLAogICAgICBtb3JlOiAi5Yqg6LyJ5pu05aSaLi4uIiwKICAgICAgcHJldmlldzogIumgkOimvSIsCiAgICAgIGVtb2ppOiAi6KGo5oOFIiwKICAgICAgZXhwYW5kOiAi5p+l55yL5pu05aSaLi4uIiwKICAgICAgc2Vjb25kczogIuenkuWJjSIsCiAgICAgIG1pbnV0ZXM6ICLliIbpkJjliY0iLAogICAgICBob3VyczogIuWwj+aZguWJjSIsCiAgICAgIGRheXM6ICLlpKnliY0iLAogICAgICBub3c6ICLliZvliZsiLAogICAgICB1cGxvYWRpbmc6ICLmraPlnKjkuIrlgrMuLi4iLAogICAgICB1cGxvYWREb25lOiAi5LiK5YKz5a6M5oiQISIsCiAgICAgIGJ1c3k6ICLmk43kvZzpoLvnuYHvvIzoq4vnqI3lgJnlho3oqaYuLi4iLAogICAgICAiY29kZS05OCI6ICJWYWxpbmUg5Yid5aeL5YyW5aSx5pWX77yM6KuL5qqi5p+lIGF2LW1pbi5qcyDniYjmnKwiLAogICAgICAiY29kZS05OSI6ICJWYWxpbmUg5Yid5aeL5YyW5aSx5pWX77yM6KuL5qqi5p+laW5pdOS4reeahGBlbGDlhYPntKAuIiwKICAgICAgImNvZGUtMTAwIjogIlZhbGluZSDliJ3lp4vljJblpLHmlZfvvIzoq4vmqqLmn6XkvaDnmoRBcHBJZOWSjEFwcEtleS4iLAogICAgICAiY29kZS0xNDAiOiAi5LuK5pelIEFQSSDoqr/nlKjnuL3mrKHmlbjlt7LotoXpgY7plovnmbzniYjpmZDliLYuIiwKICAgICAgImNvZGUtNDAxIjogIuacque2k+aOiOasiueahOaTjeS9nO+8jOiri+aqouafpeS9oOeahEFwcElk5ZKMQXBwS2V5LiIsCiAgICAgICJjb2RlLTQwMyI6ICLoqKrllY/ooqtBUEnln5/lkI3nmb3lkI3llq7mi5LntZXvvIzoq4vmqqLmn6XkvaDnmoTlronlhajln5/lkI3oqK3nva4uIgogICAgfTsKICB9LCBmdW5jdGlvbiAoZSwgdCwgbikgewogICAgdmFyIHIgPSBuKDU5KTsKICAgICJzdHJpbmciID09IHR5cGVvZiByICYmIChyID0gW1tlLmksIHIsICIiXV0pOwogICAgdmFyIG8gPSB7fTsKICAgIG8udHJhbnNmb3JtID0gdm9pZCAwOwogICAgbig2MSkociwgbyk7CiAgICByLmxvY2FscyAmJiAoZS5leHBvcnRzID0gci5sb2NhbHMpOwogIH0sIGZ1bmN0aW9uIChlLCB0LCBuKSB7CiAgICB0ID0gZS5leHBvcnRzID0gbig2MCkoITEpLCB0LnB1c2goW2UuaSwgJy52W2RhdGEtY2xhc3M9dl17Zm9udC1zaXplOjE2cHg7dGV4dC1hbGlnbjpsZWZ0fS52W2RhdGEtY2xhc3M9dl0gKnstd2Via2l0LWJveC1zaXppbmc6Ym9yZGVyLWJveDtib3gtc2l6aW5nOmJvcmRlci1ib3g7bGluZS1oZWlnaHQ6MS43NX0udltkYXRhLWNsYXNzPXZdIC5zdGF0dXMtYmFyLC52W2RhdGEtY2xhc3M9dl0gLnZlZGl0b3IsLnZbZGF0YS1jbGFzcz12XSAudmlucHV0LC52W2RhdGEtY2xhc3M9dl0gcCwudltkYXRhLWNsYXNzPXZdIHByZSBjb2Rle2NvbG9yOiM1NTV9LnZbZGF0YS1jbGFzcz12XSAudnN5cywudltkYXRhLWNsYXNzPXZdIC52dGltZXtjb2xvcjojYjNiM2IzfS52W2RhdGEtY2xhc3M9dl0gLnRleHQtcmlnaHR7dGV4dC1hbGlnbjpyaWdodH0udltkYXRhLWNsYXNzPXZdIC50ZXh0LWNlbnRlcnt0ZXh0LWFsaWduOmNlbnRlcn0udltkYXRhLWNsYXNzPXZdIGltZ3ttYXgtd2lkdGg6MTAwJTtib3JkZXI6bm9uZX0udltkYXRhLWNsYXNzPXZdIGhye21hcmdpbjouODI1ZW0gMDtib3JkZXItY29sb3I6I2Y2ZjZmNjtib3JkZXItc3R5bGU6ZGFzaGVkfS52W2RhdGEtY2xhc3M9dl0uaGlkZS1hdmF0YXIgLnZpbWd7ZGlzcGxheTpub25lfS52W2RhdGEtY2xhc3M9dl0gYXtwb3NpdGlvbjpyZWxhdGl2ZTtjdXJzb3I6cG9pbnRlcjtjb2xvcjojMWFiYzljO3RleHQtZGVjb3JhdGlvbjpub25lO2Rpc3BsYXk6aW5saW5lLWJsb2NrfS52W2RhdGEtY2xhc3M9dl0gYTpob3Zlcntjb2xvcjojZDcxOTFhfS52W2RhdGEtY2xhc3M9dl0gY29kZSwudltkYXRhLWNsYXNzPXZdIHByZXtiYWNrZ3JvdW5kLWNvbG9yOiNmOGY4Zjg7cGFkZGluZzouMmVtIC40ZW07Ym9yZGVyLXJhZGl1czozcHg7Zm9udC1zaXplOjg1JTttYXJnaW46MH0udltkYXRhLWNsYXNzPXZdIHByZXtwYWRkaW5nOjEwcHg7b3ZlcmZsb3c6YXV0bztsaW5lLWhlaWdodDoxLjQ1fS52W2RhdGEtY2xhc3M9dl0gcHJlIGNvZGV7cGFkZGluZzowO2JhY2tncm91bmQ6dHJhbnNwYXJlbnQ7d2hpdGUtc3BhY2U6cHJlLXdyYXA7d29yZC1icmVhazprZWVwLWFsbH0udltkYXRhLWNsYXNzPXZdIGJsb2NrcXVvdGV7Y29sb3I6IzY2NjttYXJnaW46LjVlbSAwO3BhZGRpbmc6MCAwIDAgMWVtO2JvcmRlci1sZWZ0OjhweCBzb2xpZCBoc2xhKDAsMCUsOTMlLC41KX0udltkYXRhLWNsYXNzPXZdIC52aW5wdXR7Ym9yZGVyOm5vbmU7cmVzaXplOm5vbmU7b3V0bGluZTpub25lO3BhZGRpbmc6MTBweCA1cHg7bWF4LXdpZHRoOjEwMCU7Zm9udC1zaXplOi43NzVlbX0udltkYXRhLWNsYXNzPXZdIGlucHV0W3R5cGU9Y2hlY2tib3hdLC52W2RhdGEtY2xhc3M9dl0gaW5wdXRbdHlwZT1yYWRpb117ZGlzcGxheTppbmxpbmUtYmxvY2s7dmVydGljYWwtYWxpZ246bWlkZGxlO21hcmdpbi10b3A6LTJweH0udltkYXRhLWNsYXNzPXZdIC52aWNvbntjdXJzb3I6cG9pbnRlcjtkaXNwbGF5OmlubGluZS1ibG9jaztvdmVyZmxvdzpoaWRkZW47ZmlsbDojNTU1O3ZlcnRpY2FsLWFsaWduOm1pZGRsZX0udltkYXRhLWNsYXNzPXZdIC52aWNvbisudmljb257bWFyZ2luLWxlZnQ6MTBweH0udltkYXRhLWNsYXNzPXZdIC52aWNvbi5hY3RpdmVke2ZpbGw6IzY2YjFmZn0udltkYXRhLWNsYXNzPXZdIC52cm93e2ZvbnQtc2l6ZTowO3BhZGRpbmc6MTBweCAwfS52W2RhdGEtY2xhc3M9dl0gLnZyb3cgLnZjb2x7ZGlzcGxheTppbmxpbmUtYmxvY2s7dmVydGljYWwtYWxpZ246bWlkZGxlO2ZvbnQtc2l6ZToxNHB4fS52W2RhdGEtY2xhc3M9dl0gLnZyb3cgLnZjb2wudmNvbC0yMHt3aWR0aDoyMCV9LnZbZGF0YS1jbGFzcz12XSAudnJvdyAudmNvbC52Y29sLTMwe3dpZHRoOjMwJX0udltkYXRhLWNsYXNzPXZdIC52cm93IC52Y29sLnZjb2wtNDB7d2lkdGg6NDAlfS52W2RhdGEtY2xhc3M9dl0gLnZyb3cgLnZjb2wudmNvbC01MHt3aWR0aDo1MCV9LnZbZGF0YS1jbGFzcz12XSAudnJvdyAudmNvbC52Y29sLTYwe3dpZHRoOjYwJX0udltkYXRhLWNsYXNzPXZdIC52cm93IC52Y29sLnZjb2wtNzB7d2lkdGg6NzAlfS52W2RhdGEtY2xhc3M9dl0gLnZyb3cgLnZjb2wudmNvbC04MHt3aWR0aDo4MCV9LnZbZGF0YS1jbGFzcz12XSAudnJvdyAudmNvbC52Y3RybHtmb250LXNpemU6MTJweH0udltkYXRhLWNsYXNzPXZdIC5lbW9qaSwudltkYXRhLWNsYXNzPXZdIC52ZW1vaml7bWF4LXdpZHRoOjI1cHg7dmVydGljYWwtYWxpZ246bWlkZGxlO21hcmdpbjowIDFweDtkaXNwbGF5OmlubGluZS1ibG9ja30udltkYXRhLWNsYXNzPXZdIC52d3JhcHtib3JkZXI6MXB4IHNvbGlkICNmMGYwZjA7Ym9yZGVyLXJhZGl1czo0cHg7bWFyZ2luLWJvdHRvbToxMHB4O292ZXJmbG93OmhpZGRlbjtwb3NpdGlvbjpyZWxhdGl2ZTtwYWRkaW5nOjEwcHh9LnZbZGF0YS1jbGFzcz12XSAudndyYXAgaW5wdXR7YmFja2dyb3VuZDp0cmFuc3BhcmVudH0udltkYXRhLWNsYXNzPXZdIC52d3JhcCAudmVkaXR7cG9zaXRpb246cmVsYXRpdmU7cGFkZGluZy10b3A6MTBweH0udltkYXRhLWNsYXNzPXZdIC52d3JhcCAuY2FuY2VsLXJlcGx5LWJ0bntwb3NpdGlvbjphYnNvbHV0ZTtyaWdodDo1cHg7dG9wOjVweDtjdXJzb3I6cG9pbnRlcn0udltkYXRhLWNsYXNzPXZdIC52d3JhcCAudmVtb2ppc3tkaXNwbGF5Om5vbmU7Zm9udC1zaXplOjE4cHg7bWF4LWhlaWdodDoxNDVweDtvdmVyZmxvdzphdXRvO3BhZGRpbmctYm90dG9tOjEwcHg7LXdlYmtpdC1ib3gtc2hhZG93OjAgMCAxcHggI2YwZjBmMDtib3gtc2hhZG93OjAgMCAxcHggI2YwZjBmMH0udltkYXRhLWNsYXNzPXZdIC52d3JhcCAudmVtb2ppcyBpe2ZvbnQtc3R5bGU6bm9ybWFsO3BhZGRpbmctdG9wOjdweDt3aWR0aDozNnB4O2N1cnNvcjpwb2ludGVyO3RleHQtYWxpZ246Y2VudGVyO2Rpc3BsYXk6aW5saW5lLWJsb2NrO3ZlcnRpY2FsLWFsaWduOm1pZGRsZX0udltkYXRhLWNsYXNzPXZdIC52d3JhcCAudnByZXZpZXd7cGFkZGluZzo3cHg7LXdlYmtpdC1ib3gtc2hhZG93OjAgMCAxcHggI2YwZjBmMDtib3gtc2hhZG93OjAgMCAxcHggI2YwZjBmMH0udltkYXRhLWNsYXNzPXZdIC52d3JhcCAudmhlYWRlciAudmlucHV0e3dpZHRoOjMzLjMzJTtib3JkZXItYm90dG9tOjFweCBkYXNoZWQgI2RlZGVkZX0udltkYXRhLWNsYXNzPXZdIC52d3JhcCAudmhlYWRlci5pdGVtMiAudmlucHV0e3dpZHRoOjUwJX0udltkYXRhLWNsYXNzPXZdIC52d3JhcCAudmhlYWRlci5pdGVtMSAudmlucHV0e3dpZHRoOjEwMCV9LnZbZGF0YS1jbGFzcz12XSAudndyYXAgLnZoZWFkZXIgLnZpbnB1dDpmb2N1c3tib3JkZXItYm90dG9tLWNvbG9yOiNlYjUwNTV9QG1lZGlhIHNjcmVlbiBhbmQgKG1heC13aWR0aDo1MjBweCl7LnZbZGF0YS1jbGFzcz12XSAudndyYXAgLnZoZWFkZXIuaXRlbTIgLnZpbnB1dCwudltkYXRhLWNsYXNzPXZdIC52d3JhcCAudmhlYWRlciAudmlucHV0e3dpZHRoOjEwMCV9fS52W2RhdGEtY2xhc3M9dl0gLnZwb3dlcntjb2xvcjojOTk5O2ZvbnQtc2l6ZTouNzVlbTtwYWRkaW5nOi41ZW0gMH0udltkYXRhLWNsYXNzPXZdIC52cG93ZXIgYXtmb250LXNpemU6Ljc1ZW19LnZbZGF0YS1jbGFzcz12XSAudmNvdW50e3BhZGRpbmc6NXB4O2ZvbnQtd2VpZ2h0OjYwMDtmb250LXNpemU6MS4yNWVtfS52W2RhdGEtY2xhc3M9dl0gb2wsLnZbZGF0YS1jbGFzcz12XSB1bHtwYWRkaW5nOjA7bWFyZ2luLWxlZnQ6MS4yNWVtfS52W2RhdGEtY2xhc3M9dl0gLnR4dC1jZW50ZXJ7dGV4dC1hbGlnbjpjZW50ZXJ9LnZbZGF0YS1jbGFzcz12XSAudHh0LXJpZ2h0e3RleHQtYWxpZ246cmlnaHR9LnZbZGF0YS1jbGFzcz12XSAucGQ1e3BhZGRpbmc6NXB4fS52W2RhdGEtY2xhc3M9dl0gLnBkMTB7cGFkZGluZzoxMHB4fS52W2RhdGEtY2xhc3M9dl0gLnZlZGl0b3J7d2lkdGg6MTAwJTttaW4taGVpZ2h0OjguNzVlbTtmb250LXNpemU6Ljg3NWVtO2JhY2tncm91bmQ6dHJhbnNwYXJlbnQ7cmVzaXplOnZlcnRpY2FsOy13ZWJraXQtdHJhbnNpdGlvbjphbGwgLjI1cyBlYXNlO3RyYW5zaXRpb246YWxsIC4yNXMgZWFzZX0udltkYXRhLWNsYXNzPXZdIC52YnRuey13ZWJraXQtdHJhbnNpdGlvbi1kdXJhdGlvbjouNHM7dHJhbnNpdGlvbi1kdXJhdGlvbjouNHM7dGV4dC1hbGlnbjpjZW50ZXI7Y29sb3I6IzU1NTtib3JkZXI6MXB4IHNvbGlkICNlZGVkZWQ7Ym9yZGVyLXJhZGl1czouM2VtO2Rpc3BsYXk6aW5saW5lLWJsb2NrO2JhY2tncm91bmQ6dHJhbnNwYXJlbnQ7bWFyZ2luLWJvdHRvbTowO2ZvbnQtd2VpZ2h0OjQwMDt2ZXJ0aWNhbC1hbGlnbjptaWRkbGU7LW1zLXRvdWNoLWFjdGlvbjptYW5pcHVsYXRpb247dG91Y2gtYWN0aW9uOm1hbmlwdWxhdGlvbjtjdXJzb3I6cG9pbnRlcjt3aGl0ZS1zcGFjZTpub3dyYXA7cGFkZGluZzouNWVtIDEuMjVlbTtmb250LXNpemU6Ljg3NWVtO2xpbmUtaGVpZ2h0OjEuNDI4NTcxNDM7LXdlYmtpdC11c2VyLXNlbGVjdDpub25lOy1tb3otdXNlci1zZWxlY3Q6bm9uZTstbXMtdXNlci1zZWxlY3Q6bm9uZTt1c2VyLXNlbGVjdDpub25lO291dGxpbmU6bm9uZX0udltkYXRhLWNsYXNzPXZdIC52YnRuKy52YnRue21hcmdpbi1sZWZ0OjEuMjVlbX0udltkYXRhLWNsYXNzPXZdIC52YnRuOmFjdGl2ZSwudltkYXRhLWNsYXNzPXZdIC52YnRuOmhvdmVye2NvbG9yOiMzMDkwZTQ7Ym9yZGVyLWNvbG9yOiMzMDkwZTR9LnZbZGF0YS1jbGFzcz12XSAudmJ0bjpkaXNhYmxlZHtib3JkZXItY29sb3I6I2UxZTFlMTtjb2xvcjojZTFlMWUxO2JhY2tncm91bmQtY29sb3I6I2ZkZmFmYTtjdXJzb3I6bm90LWFsbG93ZWR9LnZbZGF0YS1jbGFzcz12XSAudmVtcHR5e3BhZGRpbmc6MS4yNWVtO3RleHQtYWxpZ246Y2VudGVyO2NvbG9yOiM1NTU7b3ZlcmZsb3c6YXV0b30udltkYXRhLWNsYXNzPXZdIC52c3lze2Rpc3BsYXk6aW5saW5lLWJsb2NrO3BhZGRpbmc6LjJlbSAuNWVtO2ZvbnQtc2l6ZTouNzVlbTtib3JkZXItcmFkaXVzOi4yZW07bWFyZ2luLXJpZ2h0Oi4zZW19QG1lZGlhIHNjcmVlbiBhbmQgKG1heC13aWR0aDo1MjBweCl7LnZbZGF0YS1jbGFzcz12XSAudnN5c3tkaXNwbGF5Om5vbmV9fS52W2RhdGEtY2xhc3M9dl0gLnZjYXJkc3t3aWR0aDoxMDAlfS52W2RhdGEtY2xhc3M9dl0gLnZjYXJkcyAudmNhcmR7cGFkZGluZy10b3A6MS4yNWVtO3Bvc2l0aW9uOnJlbGF0aXZlO2Rpc3BsYXk6YmxvY2t9LnZbZGF0YS1jbGFzcz12XSAudmNhcmRzIC52Y2FyZDphZnRlcntjb250ZW50OiIiO2NsZWFyOmJvdGg7ZGlzcGxheTpibG9ja30udltkYXRhLWNsYXNzPXZdIC52Y2FyZHMgLnZjYXJkIC52aW1ne3dpZHRoOjMuMTI1ZW07aGVpZ2h0OjMuMTI1ZW07ZmxvYXQ6bGVmdDtib3JkZXItcmFkaXVzOjUwJTttYXJnaW4tcmlnaHQ6Ljc1MjVlbTtib3JkZXI6MXB4IHNvbGlkICNmNWY1ZjU7cGFkZGluZzouMTI1ZW19QG1lZGlhIHNjcmVlbiBhbmQgKG1heC13aWR0aDo3MjBweCl7LnZbZGF0YS1jbGFzcz12XSAudmNhcmRzIC52Y2FyZCAudmltZ3t3aWR0aDoyLjVlbTtoZWlnaHQ6Mi41ZW19fS52W2RhdGEtY2xhc3M9dl0gLnZjYXJkcyAudmNhcmQgLnZoZWFke2xpbmUtaGVpZ2h0OjEuNTttYXJnaW4tdG9wOjB9LnZbZGF0YS1jbGFzcz12XSAudmNhcmRzIC52Y2FyZCAudmhlYWQgLnZuaWNre3Bvc2l0aW9uOnJlbGF0aXZlO2ZvbnQtc2l6ZTouODc1ZW07Zm9udC13ZWlnaHQ6NTAwO21hcmdpbi1yaWdodDouODc1ZW07Y3Vyc29yOnBvaW50ZXI7dGV4dC1kZWNvcmF0aW9uOm5vbmU7ZGlzcGxheTppbmxpbmUtYmxvY2t9LnZbZGF0YS1jbGFzcz12XSAudmNhcmRzIC52Y2FyZCAudmhlYWQgLnZuaWNrOmhvdmVye2NvbG9yOiNkNzE5MWF9LnZbZGF0YS1jbGFzcz12XSAudmNhcmRzIC52Y2FyZCAudmh7b3ZlcmZsb3c6aGlkZGVuO3BhZGRpbmctYm90dG9tOi41ZW07Ym9yZGVyLWJvdHRvbToxcHggZGFzaGVkICNmNWY1ZjV9LnZbZGF0YS1jbGFzcz12XSAudmNhcmRzIC52Y2FyZCAudmggLnZ0aW1le2ZvbnQtc2l6ZTouNzVlbTttYXJnaW4tcmlnaHQ6Ljg3NWVtfS52W2RhdGEtY2xhc3M9dl0gLnZjYXJkcyAudmNhcmQgLnZoIC52bWV0YXtsaW5lLWhlaWdodDoxO3Bvc2l0aW9uOnJlbGF0aXZlfS52W2RhdGEtY2xhc3M9dl0gLnZjYXJkcyAudmNhcmQgLnZoIC52bWV0YSAudmF0e2ZvbnQtc2l6ZTouODEyNWVtO2NvbG9yOiNlZjJmMTE7Y3Vyc29yOnBvaW50ZXI7ZmxvYXQ6cmlnaHR9LnZbZGF0YS1jbGFzcz12XSAudmNhcmRzIC52Y2FyZDpsYXN0LWNoaWxkIC52aHtib3JkZXItYm90dG9tOm5vbmV9LnZbZGF0YS1jbGFzcz12XSAudmNhcmRzIC52Y2FyZCAudmNvbnRlbnR7d29yZC13cmFwOmJyZWFrLXdvcmQ7d29yZC1icmVhazpicmVhay1hbGw7Zm9udC1zaXplOi44NzVlbTtsaW5lLWhlaWdodDoyO3Bvc2l0aW9uOnJlbGF0aXZlO21hcmdpbi1ib3R0b206Ljc1ZW07cGFkZGluZy10b3A6LjYyNWVtfS52W2RhdGEtY2xhc3M9dl0gLnZjYXJkcyAudmNhcmQgLnZjb250ZW50LmV4cGFuZHtjdXJzb3I6cG9pbnRlcjttYXgtaGVpZ2h0OjhlbTtvdmVyZmxvdzpoaWRkZW59LnZbZGF0YS1jbGFzcz12XSAudmNhcmRzIC52Y2FyZCAudmNvbnRlbnQuZXhwYW5kOmJlZm9yZXtkaXNwbGF5OmJsb2NrO2NvbnRlbnQ6IiI7cG9zaXRpb246YWJzb2x1dGU7d2lkdGg6MTAwJTtsZWZ0OjA7dG9wOjA7Ym90dG9tOjMuMTVlbTtiYWNrZ3JvdW5kOi13ZWJraXQtZ3JhZGllbnQobGluZWFyLGxlZnQgdG9wLGxlZnQgYm90dG9tLGZyb20oaHNsYSgwLDAlLDEwMCUsMCkpLHRvKGhzbGEoMCwwJSwxMDAlLC45KSkpO2JhY2tncm91bmQ6bGluZWFyLWdyYWRpZW50KDE4MGRlZyxoc2xhKDAsMCUsMTAwJSwwKSxoc2xhKDAsMCUsMTAwJSwuOSkpO3otaW5kZXg6OTk5fS52W2RhdGEtY2xhc3M9dl0gLnZjYXJkcyAudmNhcmQgLnZjb250ZW50LmV4cGFuZDphZnRlcntkaXNwbGF5OmJsb2NrO2NvbnRlbnQ6YXR0cihkYXRhLWV4cGFuZCk7dGV4dC1hbGlnbjpjZW50ZXI7Y29sb3I6IzgyODU4Njtwb3NpdGlvbjphYnNvbHV0ZTt3aWR0aDoxMDAlO2hlaWdodDozLjE1ZW07bGluZS1oZWlnaHQ6My4xNWVtO2xlZnQ6MDtib3R0b206MDt6LWluZGV4Ojk5OTtiYWNrZ3JvdW5kOmhzbGEoMCwwJSwxMDAlLC45KX0udltkYXRhLWNsYXNzPXZdIC52Y2FyZHMgLnZjYXJkIC52cXVvdGV7cGFkZGluZy1sZWZ0OjFlbTtib3JkZXItbGVmdDoxcHggZGFzaGVkIGhzbGEoMCwwJSw5MyUsLjUpfS52W2RhdGEtY2xhc3M9dl0gLnZjYXJkcyAudmNhcmQgLnZxdW90ZSAudmltZ3t3aWR0aDoyLjIyNWVtO2hlaWdodDoyLjIyNWVtfS52W2RhdGEtY2xhc3M9dl0gLnZwYWdlIC52bW9yZXttYXJnaW46MWVtIDB9LnZbZGF0YS1jbGFzcz12XSAuY2xlYXJ7Y29udGVudDoiIjtkaXNwbGF5OmJsb2NrO2NsZWFyOmJvdGh9QC13ZWJraXQta2V5ZnJhbWVzIHNwaW57MCV7LXdlYmtpdC10cmFuc2Zvcm06cm90YXRlKDBkZWcpO3RyYW5zZm9ybTpyb3RhdGUoMGRlZyl9dG97LXdlYmtpdC10cmFuc2Zvcm06cm90YXRlKDF0dXJuKTt0cmFuc2Zvcm06cm90YXRlKDF0dXJuKX19QGtleWZyYW1lcyBzcGluezAley13ZWJraXQtdHJhbnNmb3JtOnJvdGF0ZSgwZGVnKTt0cmFuc2Zvcm06cm90YXRlKDBkZWcpfXRvey13ZWJraXQtdHJhbnNmb3JtOnJvdGF0ZSgxdHVybik7dHJhbnNmb3JtOnJvdGF0ZSgxdHVybil9fUAtd2Via2l0LWtleWZyYW1lcyBwdWxzZXs1MCV7YmFja2dyb3VuZDojZGNkY2RjfX1Aa2V5ZnJhbWVzIHB1bHNlezUwJXtiYWNrZ3JvdW5kOiNkY2RjZGN9fS52W2RhdGEtY2xhc3M9dl0gLnZzcGlubmVye3dpZHRoOjIycHg7aGVpZ2h0OjIycHg7ZGlzcGxheTppbmxpbmUtYmxvY2s7Ym9yZGVyOjZweCBkb3VibGUgI2EwYTBhMDtib3JkZXItdG9wLWNvbG9yOnRyYW5zcGFyZW50O2JvcmRlci1ib3R0b20tY29sb3I6dHJhbnNwYXJlbnQ7Ym9yZGVyLXJhZGl1czo1MCU7LXdlYmtpdC1hbmltYXRpb246c3BpbiAxcyBpbmZpbml0ZSBsaW5lYXI7YW5pbWF0aW9uOnNwaW4gMXMgaW5maW5pdGUgbGluZWFyO3Bvc2l0aW9uOnJlbGF0aXZlO3ZlcnRpY2FsLWFsaWduOm1pZGRsZTttYXJnaW46MCA1cHh9LmRhcmsgLnZbZGF0YS1jbGFzcz12XSAuc3RhdHVzLWJhciwuZGFyayAudltkYXRhLWNsYXNzPXZdIC52ZWRpdG9yLC5kYXJrIC52W2RhdGEtY2xhc3M9dl0gLnZpbnB1dCwuZGFyayAudltkYXRhLWNsYXNzPXZdIHAsLmRhcmsgLnZbZGF0YS1jbGFzcz12XSBwcmUgY29kZSwubmlnaHQgLnZbZGF0YS1jbGFzcz12XSAuc3RhdHVzLWJhciwubmlnaHQgLnZbZGF0YS1jbGFzcz12XSAudmVkaXRvciwubmlnaHQgLnZbZGF0YS1jbGFzcz12XSAudmlucHV0LC5uaWdodCAudltkYXRhLWNsYXNzPXZdIHAsLm5pZ2h0IC52W2RhdGEtY2xhc3M9dl0gcHJlIGNvZGUsLnRoZW1lX19kYXJrIC52W2RhdGEtY2xhc3M9dl0gLnN0YXR1cy1iYXIsLnRoZW1lX19kYXJrIC52W2RhdGEtY2xhc3M9dl0gLnZlZGl0b3IsLnRoZW1lX19kYXJrIC52W2RhdGEtY2xhc3M9dl0gLnZpbnB1dCwudGhlbWVfX2RhcmsgLnZbZGF0YS1jbGFzcz12XSBwLC50aGVtZV9fZGFyayAudltkYXRhLWNsYXNzPXZdIHByZSBjb2RlLFtkYXRhLXRoZW1lPWRhcmtdIC52W2RhdGEtY2xhc3M9dl0gLnN0YXR1cy1iYXIsW2RhdGEtdGhlbWU9ZGFya10gLnZbZGF0YS1jbGFzcz12XSAudmVkaXRvcixbZGF0YS10aGVtZT1kYXJrXSAudltkYXRhLWNsYXNzPXZdIC52aW5wdXQsW2RhdGEtdGhlbWU9ZGFya10gLnZbZGF0YS1jbGFzcz12XSBwLFtkYXRhLXRoZW1lPWRhcmtdIC52W2RhdGEtY2xhc3M9dl0gcHJlIGNvZGV7Y29sb3I6I2IyYjJiNX0uZGFyayAudltkYXRhLWNsYXNzPXZdIC52c3lzLC5kYXJrIC52W2RhdGEtY2xhc3M9dl0gLnZ0aW1lLC5uaWdodCAudltkYXRhLWNsYXNzPXZdIC52c3lzLC5uaWdodCAudltkYXRhLWNsYXNzPXZdIC52dGltZSwudGhlbWVfX2RhcmsgLnZbZGF0YS1jbGFzcz12XSAudnN5cywudGhlbWVfX2RhcmsgLnZbZGF0YS1jbGFzcz12XSAudnRpbWUsW2RhdGEtdGhlbWU9ZGFya10gLnZbZGF0YS1jbGFzcz12XSAudnN5cyxbZGF0YS10aGVtZT1kYXJrXSAudltkYXRhLWNsYXNzPXZdIC52dGltZXtjb2xvcjojOTI5Mjk4fS5kYXJrIC52W2RhdGEtY2xhc3M9dl0gY29kZSwuZGFyayAudltkYXRhLWNsYXNzPXZdIHByZSwuZGFyayAudltkYXRhLWNsYXNzPXZdIHByZSBjb2RlLC5uaWdodCAudltkYXRhLWNsYXNzPXZdIGNvZGUsLm5pZ2h0IC52W2RhdGEtY2xhc3M9dl0gcHJlLC5uaWdodCAudltkYXRhLWNsYXNzPXZdIHByZSBjb2RlLC50aGVtZV9fZGFyayAudltkYXRhLWNsYXNzPXZdIGNvZGUsLnRoZW1lX19kYXJrIC52W2RhdGEtY2xhc3M9dl0gcHJlLC50aGVtZV9fZGFyayAudltkYXRhLWNsYXNzPXZdIHByZSBjb2RlLFtkYXRhLXRoZW1lPWRhcmtdIC52W2RhdGEtY2xhc3M9dl0gY29kZSxbZGF0YS10aGVtZT1kYXJrXSAudltkYXRhLWNsYXNzPXZdIHByZSxbZGF0YS10aGVtZT1kYXJrXSAudltkYXRhLWNsYXNzPXZdIHByZSBjb2Rle2NvbG9yOiM5MjkyOTg7YmFja2dyb3VuZC1jb2xvcjojMTUxNDE0fS5kYXJrIC52W2RhdGEtY2xhc3M9dl0gLnZ3cmFwLC5uaWdodCAudltkYXRhLWNsYXNzPXZdIC52d3JhcCwudGhlbWVfX2RhcmsgLnZbZGF0YS1jbGFzcz12XSAudndyYXAsW2RhdGEtdGhlbWU9ZGFya10gLnZbZGF0YS1jbGFzcz12XSAudndyYXB7Ym9yZGVyLWNvbG9yOiNiMmIyYjV9LmRhcmsgLnZbZGF0YS1jbGFzcz12XSAudmljb24sLm5pZ2h0IC52W2RhdGEtY2xhc3M9dl0gLnZpY29uLC50aGVtZV9fZGFyayAudltkYXRhLWNsYXNzPXZdIC52aWNvbixbZGF0YS10aGVtZT1kYXJrXSAudltkYXRhLWNsYXNzPXZdIC52aWNvbntmaWxsOiNiMmIyYjV9LmRhcmsgLnZbZGF0YS1jbGFzcz12XSAudmljb24uYWN0aXZlZCwubmlnaHQgLnZbZGF0YS1jbGFzcz12XSAudmljb24uYWN0aXZlZCwudGhlbWVfX2RhcmsgLnZbZGF0YS1jbGFzcz12XSAudmljb24uYWN0aXZlZCxbZGF0YS10aGVtZT1kYXJrXSAudltkYXRhLWNsYXNzPXZdIC52aWNvbi5hY3RpdmVke2ZpbGw6IzY2YjFmZn0uZGFyayAudltkYXRhLWNsYXNzPXZdIC52YnRuLC5uaWdodCAudltkYXRhLWNsYXNzPXZdIC52YnRuLC50aGVtZV9fZGFyayAudltkYXRhLWNsYXNzPXZdIC52YnRuLFtkYXRhLXRoZW1lPWRhcmtdIC52W2RhdGEtY2xhc3M9dl0gLnZidG57Y29sb3I6I2IyYjJiNTtib3JkZXItY29sb3I6I2IyYjJiNX0uZGFyayAudltkYXRhLWNsYXNzPXZdIC52YnRuOmhvdmVyLC5uaWdodCAudltkYXRhLWNsYXNzPXZdIC52YnRuOmhvdmVyLC50aGVtZV9fZGFyayAudltkYXRhLWNsYXNzPXZdIC52YnRuOmhvdmVyLFtkYXRhLXRoZW1lPWRhcmtdIC52W2RhdGEtY2xhc3M9dl0gLnZidG46aG92ZXJ7Y29sb3I6IzY2YjFmZjtib3JkZXItY29sb3I6IzY2YjFmZn0uZGFyayAudltkYXRhLWNsYXNzPXZdIGE6aG92ZXIsLm5pZ2h0IC52W2RhdGEtY2xhc3M9dl0gYTpob3ZlciwudGhlbWVfX2RhcmsgLnZbZGF0YS1jbGFzcz12XSBhOmhvdmVyLFtkYXRhLXRoZW1lPWRhcmtdIC52W2RhdGEtY2xhc3M9dl0gYTpob3Zlcntjb2xvcjojZDcxOTFhfS5kYXJrIC52W2RhdGEtY2xhc3M9dl0gLnZjYXJkcyAudmNhcmQgLnZjb250ZW50LmV4cGFuZDpiZWZvcmUsLm5pZ2h0IC52W2RhdGEtY2xhc3M9dl0gLnZjYXJkcyAudmNhcmQgLnZjb250ZW50LmV4cGFuZDpiZWZvcmUsLnRoZW1lX19kYXJrIC52W2RhdGEtY2xhc3M9dl0gLnZjYXJkcyAudmNhcmQgLnZjb250ZW50LmV4cGFuZDpiZWZvcmUsW2RhdGEtdGhlbWU9ZGFya10gLnZbZGF0YS1jbGFzcz12XSAudmNhcmRzIC52Y2FyZCAudmNvbnRlbnQuZXhwYW5kOmJlZm9yZXtiYWNrZ3JvdW5kOi13ZWJraXQtZ3JhZGllbnQobGluZWFyLGxlZnQgdG9wLGxlZnQgYm90dG9tLGZyb20ocmdiYSgwLDAsMCwuMykpLHRvKHJnYmEoMCwwLDAsLjcpKSk7YmFja2dyb3VuZDpsaW5lYXItZ3JhZGllbnQoMTgwZGVnLHJnYmEoMCwwLDAsLjMpLHJnYmEoMCwwLDAsLjcpKX0uZGFyayAudltkYXRhLWNsYXNzPXZdIC52Y2FyZHMgLnZjYXJkIC52Y29udGVudC5leHBhbmQ6YWZ0ZXIsLm5pZ2h0IC52W2RhdGEtY2xhc3M9dl0gLnZjYXJkcyAudmNhcmQgLnZjb250ZW50LmV4cGFuZDphZnRlciwudGhlbWVfX2RhcmsgLnZbZGF0YS1jbGFzcz12XSAudmNhcmRzIC52Y2FyZCAudmNvbnRlbnQuZXhwYW5kOmFmdGVyLFtkYXRhLXRoZW1lPWRhcmtdIC52W2RhdGEtY2xhc3M9dl0gLnZjYXJkcyAudmNhcmQgLnZjb250ZW50LmV4cGFuZDphZnRlcntiYWNrZ3JvdW5kOnJnYmEoMCwwLDAsLjcpfUBtZWRpYSAocHJlZmVycy1jb2xvci1zY2hlbWU6ZGFyayl7LnZbZGF0YS1jbGFzcz12XSAuc3RhdHVzLWJhciwudltkYXRhLWNsYXNzPXZdIC52ZWRpdG9yLC52W2RhdGEtY2xhc3M9dl0gLnZpbnB1dCwudltkYXRhLWNsYXNzPXZdIHAsLnZbZGF0YS1jbGFzcz12XSBwcmUgY29kZXtjb2xvcjojYjJiMmI1fS52W2RhdGEtY2xhc3M9dl0gLnZzeXMsLnZbZGF0YS1jbGFzcz12XSAudnRpbWV7Y29sb3I6IzkyOTI5OH0udltkYXRhLWNsYXNzPXZdIGNvZGUsLnZbZGF0YS1jbGFzcz12XSBwcmUsLnZbZGF0YS1jbGFzcz12XSBwcmUgY29kZXtjb2xvcjojOTI5Mjk4O2JhY2tncm91bmQtY29sb3I6IzE1MTQxNH0udltkYXRhLWNsYXNzPXZdIC52d3JhcHtib3JkZXItY29sb3I6I2IyYjJiNX0udltkYXRhLWNsYXNzPXZdIC52aWNvbntmaWxsOiNiMmIyYjV9LnZbZGF0YS1jbGFzcz12XSAudmljb24uYWN0aXZlZHtmaWxsOiM2NmIxZmZ9LnZbZGF0YS1jbGFzcz12XSAudmJ0bntjb2xvcjojYjJiMmI1O2JvcmRlci1jb2xvcjojYjJiMmI1fS52W2RhdGEtY2xhc3M9dl0gLnZidG46aG92ZXJ7Y29sb3I6IzY2YjFmZjtib3JkZXItY29sb3I6IzY2YjFmZn0udltkYXRhLWNsYXNzPXZdIGE6aG92ZXJ7Y29sb3I6I2Q3MTkxYX0udltkYXRhLWNsYXNzPXZdIC52Y2FyZHMgLnZjYXJkIC52Y29udGVudC5leHBhbmQ6YmVmb3Jle2JhY2tncm91bmQ6LXdlYmtpdC1ncmFkaWVudChsaW5lYXIsbGVmdCB0b3AsbGVmdCBib3R0b20sZnJvbShyZ2JhKDAsMCwwLC4zKSksdG8ocmdiYSgwLDAsMCwuNykpKTtiYWNrZ3JvdW5kOmxpbmVhci1ncmFkaWVudCgxODBkZWcscmdiYSgwLDAsMCwuMykscmdiYSgwLDAsMCwuNykpfS52W2RhdGEtY2xhc3M9dl0gLnZjYXJkcyAudmNhcmQgLnZjb250ZW50LmV4cGFuZDphZnRlcntiYWNrZ3JvdW5kOnJnYmEoMCwwLDAsLjcpfX0nLCAiIl0pOwogIH0sIGZ1bmN0aW9uIChlLCB0KSB7CiAgICBmdW5jdGlvbiBuKGUsIHQpIHsKICAgICAgdmFyIG4gPSBlWzFdIHx8ICIiLAogICAgICAgICAgbyA9IGVbM107CiAgICAgIGlmICghbykgcmV0dXJuIG47CgogICAgICBpZiAodCAmJiAiZnVuY3Rpb24iID09IHR5cGVvZiBidG9hKSB7CiAgICAgICAgdmFyIGkgPSByKG8pOwogICAgICAgIHJldHVybiBbbl0uY29uY2F0KG8uc291cmNlcy5tYXAoZnVuY3Rpb24gKGUpIHsKICAgICAgICAgIHJldHVybiAiLyojIHNvdXJjZVVSTD0iICsgby5zb3VyY2VSb290ICsgZSArICIgKi8iOwogICAgICAgIH0pKS5jb25jYXQoW2ldKS5qb2luKCJcbiIpOwogICAgICB9CgogICAgICByZXR1cm4gW25dLmpvaW4oIlxuIik7CiAgICB9CgogICAgZnVuY3Rpb24gcihlKSB7CiAgICAgIHJldHVybiAiLyojIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmLTg7YmFzZTY0LCIgKyBidG9hKHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChKU09OLnN0cmluZ2lmeShlKSkpKSArICIgKi8iOwogICAgfQoKICAgIGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChlKSB7CiAgICAgIHZhciB0ID0gW107CiAgICAgIHJldHVybiB0LnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiB0aGlzLm1hcChmdW5jdGlvbiAodCkgewogICAgICAgICAgdmFyIHIgPSBuKHQsIGUpOwogICAgICAgICAgcmV0dXJuIHRbMl0gPyAiQG1lZGlhICIgKyB0WzJdICsgInsiICsgciArICJ9IiA6IHI7CiAgICAgICAgfSkuam9pbigiIik7CiAgICAgIH0sIHQuaSA9IGZ1bmN0aW9uIChlLCBuKSB7CiAgICAgICAgInN0cmluZyIgPT0gdHlwZW9mIGUgJiYgKGUgPSBbW251bGwsIGUsICIiXV0pOwoKICAgICAgICBmb3IgKHZhciByID0ge30sIG8gPSAwOyBvIDwgdGhpcy5sZW5ndGg7IG8rKykgewogICAgICAgICAgdmFyIGkgPSB0aGlzW29dWzBdOwogICAgICAgICAgIm51bWJlciIgPT0gdHlwZW9mIGkgJiYgKHJbaV0gPSAhMCk7CiAgICAgICAgfQoKICAgICAgICBmb3IgKG8gPSAwOyBvIDwgZS5sZW5ndGg7IG8rKykgewogICAgICAgICAgdmFyIGEgPSBlW29dOwogICAgICAgICAgIm51bWJlciIgPT0gdHlwZW9mIGFbMF0gJiYgclthWzBdXSB8fCAobiAmJiAhYVsyXSA/IGFbMl0gPSBuIDogbiAmJiAoYVsyXSA9ICIoIiArIGFbMl0gKyAiKSBhbmQgKCIgKyBuICsgIikiKSwgdC5wdXNoKGEpKTsKICAgICAgICB9CiAgICAgIH0sIHQ7CiAgICB9OwogIH0sIGZ1bmN0aW9uIChlLCB0LCBuKSB7CiAgICBmdW5jdGlvbiByKGUsIHQpIHsKICAgICAgZm9yICh2YXIgbiA9IDA7IG4gPCBlLmxlbmd0aDsgbisrKSB7CiAgICAgICAgdmFyIHIgPSBlW25dLAogICAgICAgICAgICBvID0gaFtyLmlkXTsKCiAgICAgICAgaWYgKG8pIHsKICAgICAgICAgIG8ucmVmcysrOwoKICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgby5wYXJ0cy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICBvLnBhcnRzW2ldKHIucGFydHNbaV0pOwogICAgICAgICAgfQoKICAgICAgICAgIGZvciAoOyBpIDwgci5wYXJ0cy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICBvLnBhcnRzLnB1c2godShyLnBhcnRzW2ldLCB0KSk7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGZvciAodmFyIGEgPSBbXSwgaSA9IDA7IGkgPCByLnBhcnRzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGEucHVzaCh1KHIucGFydHNbaV0sIHQpKTsKICAgICAgICAgIH0KCiAgICAgICAgICBoW3IuaWRdID0gewogICAgICAgICAgICBpZDogci5pZCwKICAgICAgICAgICAgcmVmczogMSwKICAgICAgICAgICAgcGFydHM6IGEKICAgICAgICAgIH07CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gbyhlLCB0KSB7CiAgICAgIGZvciAodmFyIG4gPSBbXSwgciA9IHt9LCBvID0gMDsgbyA8IGUubGVuZ3RoOyBvKyspIHsKICAgICAgICB2YXIgaSA9IGVbb10sCiAgICAgICAgICAgIGEgPSB0LmJhc2UgPyBpWzBdICsgdC5iYXNlIDogaVswXSwKICAgICAgICAgICAgcyA9IGlbMV0sCiAgICAgICAgICAgIGwgPSBpWzJdLAogICAgICAgICAgICBjID0gaVszXSwKICAgICAgICAgICAgdSA9IHsKICAgICAgICAgIGNzczogcywKICAgICAgICAgIG1lZGlhOiBsLAogICAgICAgICAgc291cmNlTWFwOiBjCiAgICAgICAgfTsKICAgICAgICByW2FdID8gclthXS5wYXJ0cy5wdXNoKHUpIDogbi5wdXNoKHJbYV0gPSB7CiAgICAgICAgICBpZDogYSwKICAgICAgICAgIHBhcnRzOiBbdV0KICAgICAgICB9KTsKICAgICAgfQoKICAgICAgcmV0dXJuIG47CiAgICB9CgogICAgZnVuY3Rpb24gaShlLCB0KSB7CiAgICAgIHZhciBuID0gZyhlLmluc2VydEludG8pOwogICAgICBpZiAoIW4pIHRocm93IG5ldyBFcnJvcigiQ291bGRuJ3QgZmluZCBhIHN0eWxlIHRhcmdldC4gVGhpcyBwcm9iYWJseSBtZWFucyB0aGF0IHRoZSB2YWx1ZSBmb3IgdGhlICdpbnNlcnRJbnRvJyBwYXJhbWV0ZXIgaXMgaW52YWxpZC4iKTsKICAgICAgdmFyIHIgPSBiW2IubGVuZ3RoIC0gMV07CiAgICAgIGlmICgidG9wIiA9PT0gZS5pbnNlcnRBdCkgciA/IHIubmV4dFNpYmxpbmcgPyBuLmluc2VydEJlZm9yZSh0LCByLm5leHRTaWJsaW5nKSA6IG4uYXBwZW5kQ2hpbGQodCkgOiBuLmluc2VydEJlZm9yZSh0LCBuLmZpcnN0Q2hpbGQpLCBiLnB1c2godCk7ZWxzZSB7CiAgICAgICAgaWYgKCJib3R0b20iICE9PSBlLmluc2VydEF0KSB0aHJvdyBuZXcgRXJyb3IoIkludmFsaWQgdmFsdWUgZm9yIHBhcmFtZXRlciAnaW5zZXJ0QXQnLiBNdXN0IGJlICd0b3AnIG9yICdib3R0b20nLiIpOwogICAgICAgIG4uYXBwZW5kQ2hpbGQodCk7CiAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBhKGUpIHsKICAgICAgaWYgKG51bGwgPT09IGUucGFyZW50Tm9kZSkgcmV0dXJuICExOwogICAgICBlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZSk7CiAgICAgIHZhciB0ID0gYi5pbmRleE9mKGUpOwogICAgICB0ID49IDAgJiYgYi5zcGxpY2UodCwgMSk7CiAgICB9CgogICAgZnVuY3Rpb24gcyhlKSB7CiAgICAgIHZhciB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3R5bGUiKTsKICAgICAgcmV0dXJuIGUuYXR0cnMudHlwZSA9ICJ0ZXh0L2NzcyIsIGModCwgZS5hdHRycyksIGkoZSwgdCksIHQ7CiAgICB9CgogICAgZnVuY3Rpb24gbChlKSB7CiAgICAgIHZhciB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgibGluayIpOwogICAgICByZXR1cm4gZS5hdHRycy50eXBlID0gInRleHQvY3NzIiwgZS5hdHRycy5yZWwgPSAic3R5bGVzaGVldCIsIGModCwgZS5hdHRycyksIGkoZSwgdCksIHQ7CiAgICB9CgogICAgZnVuY3Rpb24gYyhlLCB0KSB7CiAgICAgIE9iamVjdC5rZXlzKHQpLmZvckVhY2goZnVuY3Rpb24gKG4pIHsKICAgICAgICBlLnNldEF0dHJpYnV0ZShuLCB0W25dKTsKICAgICAgfSk7CiAgICB9CgogICAgZnVuY3Rpb24gdShlLCB0KSB7CiAgICAgIHZhciBuLCByLCBvLCBpOwoKICAgICAgaWYgKHQudHJhbnNmb3JtICYmIGUuY3NzKSB7CiAgICAgICAgaWYgKCEoaSA9IHQudHJhbnNmb3JtKGUuY3NzKSkpIHJldHVybiBmdW5jdGlvbiAoKSB7fTsKICAgICAgICBlLmNzcyA9IGk7CiAgICAgIH0KCiAgICAgIGlmICh0LnNpbmdsZXRvbikgewogICAgICAgIHZhciBjID0geSsrOwogICAgICAgIG4gPSBtIHx8IChtID0gcyh0KSksIHIgPSBkLmJpbmQobnVsbCwgbiwgYywgITEpLCBvID0gZC5iaW5kKG51bGwsIG4sIGMsICEwKTsKICAgICAgfSBlbHNlIGUuc291cmNlTWFwICYmICJmdW5jdGlvbiIgPT0gdHlwZW9mIFVSTCAmJiAiZnVuY3Rpb24iID09IHR5cGVvZiBVUkwuY3JlYXRlT2JqZWN0VVJMICYmICJmdW5jdGlvbiIgPT0gdHlwZW9mIFVSTC5yZXZva2VPYmplY3RVUkwgJiYgImZ1bmN0aW9uIiA9PSB0eXBlb2YgQmxvYiAmJiAiZnVuY3Rpb24iID09IHR5cGVvZiBidG9hID8gKG4gPSBsKHQpLCByID0gZi5iaW5kKG51bGwsIG4sIHQpLCBvID0gZnVuY3Rpb24gbygpIHsKICAgICAgICBhKG4pLCBuLmhyZWYgJiYgVVJMLnJldm9rZU9iamVjdFVSTChuLmhyZWYpOwogICAgICB9KSA6IChuID0gcyh0KSwgciA9IHAuYmluZChudWxsLCBuKSwgbyA9IGZ1bmN0aW9uIG8oKSB7CiAgICAgICAgYShuKTsKICAgICAgfSk7CgogICAgICByZXR1cm4gcihlKSwgZnVuY3Rpb24gKHQpIHsKICAgICAgICBpZiAodCkgewogICAgICAgICAgaWYgKHQuY3NzID09PSBlLmNzcyAmJiB0Lm1lZGlhID09PSBlLm1lZGlhICYmIHQuc291cmNlTWFwID09PSBlLnNvdXJjZU1hcCkgcmV0dXJuOwogICAgICAgICAgcihlID0gdCk7CiAgICAgICAgfSBlbHNlIG8oKTsKICAgICAgfTsKICAgIH0KCiAgICBmdW5jdGlvbiBkKGUsIHQsIG4sIHIpIHsKICAgICAgdmFyIG8gPSBuID8gIiIgOiByLmNzczsKICAgICAgaWYgKGUuc3R5bGVTaGVldCkgZS5zdHlsZVNoZWV0LmNzc1RleHQgPSB4KHQsIG8pO2Vsc2UgewogICAgICAgIHZhciBpID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUobyksCiAgICAgICAgICAgIGEgPSBlLmNoaWxkTm9kZXM7CiAgICAgICAgYVt0XSAmJiBlLnJlbW92ZUNoaWxkKGFbdF0pLCBhLmxlbmd0aCA/IGUuaW5zZXJ0QmVmb3JlKGksIGFbdF0pIDogZS5hcHBlbmRDaGlsZChpKTsKICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIHAoZSwgdCkgewogICAgICB2YXIgbiA9IHQuY3NzLAogICAgICAgICAgciA9IHQubWVkaWE7CiAgICAgIGlmIChyICYmIGUuc2V0QXR0cmlidXRlKCJtZWRpYSIsIHIpLCBlLnN0eWxlU2hlZXQpIGUuc3R5bGVTaGVldC5jc3NUZXh0ID0gbjtlbHNlIHsKICAgICAgICBmb3IgKDsgZS5maXJzdENoaWxkOykgewogICAgICAgICAgZS5yZW1vdmVDaGlsZChlLmZpcnN0Q2hpbGQpOwogICAgICAgIH0KCiAgICAgICAgZS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShuKSk7CiAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBmKGUsIHQsIG4pIHsKICAgICAgdmFyIHIgPSBuLmNzcywKICAgICAgICAgIG8gPSBuLnNvdXJjZU1hcCwKICAgICAgICAgIGkgPSB2b2lkIDAgPT09IHQuY29udmVydFRvQWJzb2x1dGVVcmxzICYmIG87CiAgICAgICh0LmNvbnZlcnRUb0Fic29sdXRlVXJscyB8fCBpKSAmJiAociA9IHcocikpLCBvICYmIChyICs9ICJcbi8qIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtiYXNlNjQsIiArIGJ0b2EodW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KEpTT04uc3RyaW5naWZ5KG8pKSkpICsgIiAqLyIpOwogICAgICB2YXIgYSA9IG5ldyBCbG9iKFtyXSwgewogICAgICAgIHR5cGU6ICJ0ZXh0L2NzcyIKICAgICAgfSksCiAgICAgICAgICBzID0gZS5ocmVmOwogICAgICBlLmhyZWYgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGEpLCBzICYmIFVSTC5yZXZva2VPYmplY3RVUkwocyk7CiAgICB9CgogICAgdmFyIGggPSB7fSwKICAgICAgICB2ID0gZnVuY3Rpb24gKGUpIHsKICAgICAgdmFyIHQ7CiAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIHZvaWQgMCA9PT0gdCAmJiAodCA9IGUuYXBwbHkodGhpcywgYXJndW1lbnRzKSksIHQ7CiAgICAgIH07CiAgICB9KGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIHdpbmRvdyAmJiBkb2N1bWVudCAmJiBkb2N1bWVudC5hbGwgJiYgIXdpbmRvdy5hdG9iOwogICAgfSksCiAgICAgICAgZyA9IGZ1bmN0aW9uIChlKSB7CiAgICAgIHZhciB0ID0ge307CiAgICAgIHJldHVybiBmdW5jdGlvbiAobikgewogICAgICAgIHJldHVybiB2b2lkIDAgPT09IHRbbl0gJiYgKHRbbl0gPSBlLmNhbGwodGhpcywgbikpLCB0W25dOwogICAgICB9OwogICAgfShmdW5jdGlvbiAoZSkgewogICAgICByZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihlKTsKICAgIH0pLAogICAgICAgIG0gPSBudWxsLAogICAgICAgIHkgPSAwLAogICAgICAgIGIgPSBbXSwKICAgICAgICB3ID0gbig2Mik7CgogICAgZS5leHBvcnRzID0gZnVuY3Rpb24gKGUsIHQpIHsKICAgICAgaWYgKCJ1bmRlZmluZWQiICE9IHR5cGVvZiBERUJVRyAmJiBERUJVRyAmJiAib2JqZWN0IiAhPSAodHlwZW9mIGRvY3VtZW50ID09PSAidW5kZWZpbmVkIiA/ICJ1bmRlZmluZWQiIDogX3R5cGVvZihkb2N1bWVudCkpKSB0aHJvdyBuZXcgRXJyb3IoIlRoZSBzdHlsZS1sb2FkZXIgY2Fubm90IGJlIHVzZWQgaW4gYSBub24tYnJvd3NlciBlbnZpcm9ubWVudCIpOwogICAgICB0ID0gdCB8fCB7fSwgdC5hdHRycyA9ICJvYmplY3QiID09IF90eXBlb2YodC5hdHRycykgPyB0LmF0dHJzIDoge30sIHQuc2luZ2xldG9uIHx8ICh0LnNpbmdsZXRvbiA9IHYoKSksIHQuaW5zZXJ0SW50byB8fCAodC5pbnNlcnRJbnRvID0gImhlYWQiKSwgdC5pbnNlcnRBdCB8fCAodC5pbnNlcnRBdCA9ICJib3R0b20iKTsKICAgICAgdmFyIG4gPSBvKGUsIHQpOwogICAgICByZXR1cm4gcihuLCB0KSwgZnVuY3Rpb24gKGUpIHsKICAgICAgICBmb3IgKHZhciBpID0gW10sIGEgPSAwOyBhIDwgbi5sZW5ndGg7IGErKykgewogICAgICAgICAgdmFyIHMgPSBuW2FdLAogICAgICAgICAgICAgIGwgPSBoW3MuaWRdOwogICAgICAgICAgbC5yZWZzLS0sIGkucHVzaChsKTsKICAgICAgICB9CgogICAgICAgIGlmIChlKSB7CiAgICAgICAgICByKG8oZSwgdCksIHQpOwogICAgICAgIH0KCiAgICAgICAgZm9yICh2YXIgYSA9IDA7IGEgPCBpLmxlbmd0aDsgYSsrKSB7CiAgICAgICAgICB2YXIgbCA9IGlbYV07CgogICAgICAgICAgaWYgKDAgPT09IGwucmVmcykgewogICAgICAgICAgICBmb3IgKHZhciBjID0gMDsgYyA8IGwucGFydHMubGVuZ3RoOyBjKyspIHsKICAgICAgICAgICAgICBsLnBhcnRzW2NdKCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGRlbGV0ZSBoW2wuaWRdOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfTsKICAgIH07CgogICAgdmFyIHggPSBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBlID0gW107CiAgICAgIHJldHVybiBmdW5jdGlvbiAodCwgbikgewogICAgICAgIHJldHVybiBlW3RdID0gbiwgZS5maWx0ZXIoQm9vbGVhbikuam9pbigiXG4iKTsKICAgICAgfTsKICAgIH0oKTsKICB9LCBmdW5jdGlvbiAoZSwgdCkgewogICAgZS5leHBvcnRzID0gZnVuY3Rpb24gKGUpIHsKICAgICAgdmFyIHQgPSAidW5kZWZpbmVkIiAhPSB0eXBlb2Ygd2luZG93ICYmIHdpbmRvdy5sb2NhdGlvbjsKICAgICAgaWYgKCF0KSB0aHJvdyBuZXcgRXJyb3IoImZpeFVybHMgcmVxdWlyZXMgd2luZG93LmxvY2F0aW9uIik7CiAgICAgIGlmICghZSB8fCAic3RyaW5nIiAhPSB0eXBlb2YgZSkgcmV0dXJuIGU7CiAgICAgIHZhciBuID0gdC5wcm90b2NvbCArICIvLyIgKyB0Lmhvc3QsCiAgICAgICAgICByID0gbiArIHQucGF0aG5hbWUucmVwbGFjZSgvXC9bXlwvXSokLywgIi8iKTsKICAgICAgcmV0dXJuIGUucmVwbGFjZSgvdXJsXHMqXCgoKD86W14pKF18XCgoPzpbXikoXSt8XChbXikoXSpcKSkqXCkpKilcKS9naSwgZnVuY3Rpb24gKGUsIHQpIHsKICAgICAgICB2YXIgbyA9IHQudHJpbSgpLnJlcGxhY2UoL14iKC4qKSIkLywgZnVuY3Rpb24gKGUsIHQpIHsKICAgICAgICAgIHJldHVybiB0OwogICAgICAgIH0pLnJlcGxhY2UoL14nKC4qKSckLywgZnVuY3Rpb24gKGUsIHQpIHsKICAgICAgICAgIHJldHVybiB0OwogICAgICAgIH0pOwogICAgICAgIGlmICgvXigjfGRhdGE6fGh0dHA6XC9cL3xodHRwczpcL1wvfGZpbGU6XC9cL1wvKS9pLnRlc3QobykpIHJldHVybiBlOwogICAgICAgIHZhciBpOwogICAgICAgIHJldHVybiBpID0gMCA9PT0gby5pbmRleE9mKCIvLyIpID8gbyA6IDAgPT09IG8uaW5kZXhPZigiLyIpID8gbiArIG8gOiByICsgby5yZXBsYWNlKC9eXC5cLy8sICIiKSwgInVybCgiICsgSlNPTi5zdHJpbmdpZnkoaSkgKyAiKSI7CiAgICAgIH0pOwogICAgfTsKICB9LCBmdW5jdGlvbiAoZSwgdCwgbikgewogICAgbig1OCksIGUuZXhwb3J0cyA9IG4oMTgpOwogIH1dKTsKfSk7"},null]}