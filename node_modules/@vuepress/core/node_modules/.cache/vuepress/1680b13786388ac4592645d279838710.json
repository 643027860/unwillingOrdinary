{"remainingRequest":"D:\\home\\vuepress-boke\\talent-baoda\\node_modules\\babel-loader\\lib\\index.js??ref--3-1!D:\\home\\vuepress-boke\\talent-baoda\\node_modules\\zooming\\build\\zooming.module.js","dependencies":[{"path":"D:\\home\\vuepress-boke\\talent-baoda\\node_modules\\zooming\\build\\zooming.module.js","mtime":499162500000},{"path":"D:\\home\\vuepress-boke\\talent-baoda\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\home\\vuepress-boke\\talent-baoda\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLmRlc2NyaXB0aW9uIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLml0ZXJhdG9yIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5iaW5kIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmNyZWF0ZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5kZWZpbmUtcHJvcGVydHkiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuZ2V0LW93bi1wcm9wZXJ0eS1uYW1lcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5nZXQtcHJvdG90eXBlLW9mIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnBhcnNlLWZsb2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLml0ZXJhdG9yIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIudGltZXJzIjsKaW1wb3J0IF90eXBlb2YyIGZyb20gIkQ6L2hvbWUvdnVlcHJlc3MtYm9rZS90YWxlbnQtYmFvZGEvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3R5cGVvZiI7CnZhciBjdXJzb3IgPSB7CiAgImRlZmF1bHQiOiAnYXV0bycsCiAgem9vbUluOiAnem9vbS1pbicsCiAgem9vbU91dDogJ3pvb20tb3V0JywKICBncmFiOiAnZ3JhYicsCiAgbW92ZTogJ21vdmUnCn07CgpmdW5jdGlvbiBsaXN0ZW4oZWwsIGV2ZW50LCBoYW5kbGVyKSB7CiAgdmFyIGFkZCA9IGFyZ3VtZW50cy5sZW5ndGggPiAzICYmIGFyZ3VtZW50c1szXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzNdIDogdHJ1ZTsKICB2YXIgb3B0aW9ucyA9IHsKICAgIHBhc3NpdmU6IGZhbHNlCiAgfTsKCiAgaWYgKGFkZCkgewogICAgZWwuYWRkRXZlbnRMaXN0ZW5lcihldmVudCwgaGFuZGxlciwgb3B0aW9ucyk7CiAgfSBlbHNlIHsKICAgIGVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnQsIGhhbmRsZXIsIG9wdGlvbnMpOwogIH0KfQoKZnVuY3Rpb24gbG9hZEltYWdlKHNyYywgY2IpIHsKICBpZiAoc3JjKSB7CiAgICB2YXIgaW1nID0gbmV3IEltYWdlKCk7CgogICAgaW1nLm9ubG9hZCA9IGZ1bmN0aW9uIG9uSW1hZ2VMb2FkKCkgewogICAgICBpZiAoY2IpIGNiKGltZyk7CiAgICB9OwoKICAgIGltZy5zcmMgPSBzcmM7CiAgfQp9CgpmdW5jdGlvbiBnZXRPcmlnaW5hbFNvdXJjZShlbCkgewogIGlmIChlbC5kYXRhc2V0Lm9yaWdpbmFsKSB7CiAgICByZXR1cm4gZWwuZGF0YXNldC5vcmlnaW5hbDsKICB9IGVsc2UgaWYgKGVsLnBhcmVudE5vZGUudGFnTmFtZSA9PT0gJ0EnKSB7CiAgICByZXR1cm4gZWwucGFyZW50Tm9kZS5nZXRBdHRyaWJ1dGUoJ2hyZWYnKTsKICB9IGVsc2UgewogICAgcmV0dXJuIG51bGw7CiAgfQp9CgpmdW5jdGlvbiBzZXRTdHlsZShlbCwgc3R5bGVzLCByZW1lbWJlcikgewogIGNoZWNrVHJhbnMoc3R5bGVzKTsKICB2YXIgcyA9IGVsLnN0eWxlOwogIHZhciBvcmlnaW5hbCA9IHt9OwoKICBmb3IgKHZhciBrZXkgaW4gc3R5bGVzKSB7CiAgICBpZiAocmVtZW1iZXIpIHsKICAgICAgb3JpZ2luYWxba2V5XSA9IHNba2V5XSB8fCAnJzsKICAgIH0KCiAgICBzW2tleV0gPSBzdHlsZXNba2V5XTsKICB9CgogIHJldHVybiBvcmlnaW5hbDsKfQoKZnVuY3Rpb24gYmluZEFsbChfdGhpcywgdGhhdCkgewogIHZhciBtZXRob2RzID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoT2JqZWN0LmdldFByb3RvdHlwZU9mKF90aGlzKSk7CiAgbWV0aG9kcy5mb3JFYWNoKGZ1bmN0aW9uIGJpbmRPbmUobWV0aG9kKSB7CiAgICBfdGhpc1ttZXRob2RdID0gX3RoaXNbbWV0aG9kXS5iaW5kKHRoYXQpOwogIH0pOwp9Cgp2YXIgdHJhbnMgPSB7CiAgdHJhbnNpdGlvblByb3A6ICd0cmFuc2l0aW9uJywKICB0cmFuc0VuZEV2ZW50OiAndHJhbnNpdGlvbmVuZCcsCiAgdHJhbnNmb3JtUHJvcDogJ3RyYW5zZm9ybScsCiAgdHJhbnNmb3JtQ3NzUHJvcDogJ3RyYW5zZm9ybScKfTsKdmFyIHRyYW5zZm9ybUNzc1Byb3AgPSB0cmFucy50cmFuc2Zvcm1Dc3NQcm9wLAogICAgdHJhbnNFbmRFdmVudCA9IHRyYW5zLnRyYW5zRW5kRXZlbnQ7CgpmdW5jdGlvbiBjaGVja1RyYW5zKHN0eWxlcykgewogIHZhciB0cmFuc2l0aW9uUHJvcCA9IHRyYW5zLnRyYW5zaXRpb25Qcm9wLAogICAgICB0cmFuc2Zvcm1Qcm9wID0gdHJhbnMudHJhbnNmb3JtUHJvcDsKCiAgaWYgKHN0eWxlcy50cmFuc2l0aW9uKSB7CiAgICB2YXIgdmFsdWUgPSBzdHlsZXMudHJhbnNpdGlvbjsKICAgIGRlbGV0ZSBzdHlsZXMudHJhbnNpdGlvbjsKICAgIHN0eWxlc1t0cmFuc2l0aW9uUHJvcF0gPSB2YWx1ZTsKICB9CgogIGlmIChzdHlsZXMudHJhbnNmb3JtKSB7CiAgICB2YXIgX3ZhbHVlID0gc3R5bGVzLnRyYW5zZm9ybTsKICAgIGRlbGV0ZSBzdHlsZXMudHJhbnNmb3JtOwogICAgc3R5bGVzW3RyYW5zZm9ybVByb3BdID0gX3ZhbHVlOwogIH0KfQoKdmFyIG5vb3AgPSBmdW5jdGlvbiBub29wKCkge307Cgp2YXIgREVGQVVMVF9PUFRJT05TID0gewogIC8qKgogICAqIFRvIGJlIGFibGUgdG8gZ3JhYiBhbmQgZHJhZyB0aGUgaW1hZ2UgZm9yIGV4dHJhIHpvb20taW4uCiAgICogQHR5cGUge2Jvb2xlYW59CiAgICovCiAgZW5hYmxlR3JhYjogdHJ1ZSwKCiAgLyoqCiAgICogUHJlbG9hZCB6b29tYWJsZSBpbWFnZXMuCiAgICogQHR5cGUge2Jvb2xlYW59CiAgICovCiAgcHJlbG9hZEltYWdlOiBmYWxzZSwKCiAgLyoqCiAgICogQ2xvc2UgdGhlIHpvb21lZCBpbWFnZSB3aGVuIGJyb3dzZXIgd2luZG93IGlzIHJlc2l6ZWQuCiAgICogQHR5cGUge2Jvb2xlYW59CiAgICovCiAgY2xvc2VPbldpbmRvd1Jlc2l6ZTogdHJ1ZSwKCiAgLyoqCiAgICogVHJhbnNpdGlvbiBkdXJhdGlvbiBpbiBzZWNvbmRzLgogICAqIEB0eXBlIHtudW1iZXJ9CiAgICovCiAgdHJhbnNpdGlvbkR1cmF0aW9uOiAwLjQsCgogIC8qKgogICAqIFRyYW5zaXRpb24gdGltaW5nIGZ1bmN0aW9uLgogICAqIEB0eXBlIHtzdHJpbmd9CiAgICovCiAgdHJhbnNpdGlvblRpbWluZ0Z1bmN0aW9uOiAnY3ViaWMtYmV6aWVyKDAuNCwgMCwgMCwgMSknLAoKICAvKioKICAgKiBPdmVybGF5IGJhY2tncm91bmQgY29sb3IuCiAgICogQHR5cGUge3N0cmluZ30KICAgKi8KICBiZ0NvbG9yOiAncmdiKDI1NSwgMjU1LCAyNTUpJywKCiAgLyoqCiAgICogT3ZlcmxheSBiYWNrZ3JvdW5kIG9wYWNpdHkuCiAgICogQHR5cGUge251bWJlcn0KICAgKi8KICBiZ09wYWNpdHk6IDEsCgogIC8qKgogICAqIFRoZSBiYXNlIHNjYWxlIGZhY3RvciBmb3Igem9vbWluZy4gQnkgZGVmYXVsdCBzY2FsZSB0byBmaXQgdGhlIHdpbmRvdy4KICAgKiBAdHlwZSB7bnVtYmVyfQogICAqLwogIHNjYWxlQmFzZTogMS4wLAoKICAvKioKICAgKiBUaGUgYWRkaXRpb25hbCBzY2FsZSBmYWN0b3Igd2hlbiBncmFiYmluZyB0aGUgaW1hZ2UuCiAgICogQHR5cGUge251bWJlcn0KICAgKi8KICBzY2FsZUV4dHJhOiAwLjUsCgogIC8qKgogICAqIEhvdyBtdWNoIHNjcm9sbGluZyBpdCB0YWtlcyBiZWZvcmUgY2xvc2luZyBvdXQuCiAgICogQHR5cGUge251bWJlcn0KICAgKi8KICBzY3JvbGxUaHJlc2hvbGQ6IDQwLAoKICAvKioKICAgKiBUaGUgei1pbmRleCB0aGF0IHRoZSBvdmVybGF5IHdpbGwgYmUgYWRkZWQgd2l0aC4KICAgKiBAdHlwZSB7bnVtYmVyfQogICAqLwogIHpJbmRleDogOTk4LAoKICAvKioKICAgKiBTY2FsZSAoem9vbSBpbikgdG8gZ2l2ZW4gd2lkdGggYW5kIGhlaWdodC4gSWdub3JlIHNjYWxlQmFzZSBpZiBzZXQuCiAgICogQWx0ZXJuYXRpdmVseSwgcHJvdmlkZSBhIHBlcmNlbnRhZ2UgdmFsdWUgcmVsYXRpdmUgdG8gdGhlIG9yaWdpbmFsIGltYWdlIHNpemUuCiAgICogQHR5cGUge09iamVjdHxTdHJpbmd9CiAgICogQGV4YW1wbGUKICAgKiBjdXN0b21TaXplOiB7IHdpZHRoOiA4MDAsIGhlaWdodDogNDAwIH0KICAgKiBjdXN0b21TaXplOiAxMDAlCiAgICovCiAgY3VzdG9tU2l6ZTogbnVsbCwKCiAgLyoqCiAgICogQSBjYWxsYmFjayBmdW5jdGlvbiB0aGF0IHdpbGwgYmUgY2FsbGVkIHdoZW4gYSB0YXJnZXQgaXMgb3BlbmVkIGFuZAogICAqIHRyYW5zaXRpb24gaGFzIGVuZGVkLiBJdCB3aWxsIGdldCB0aGUgdGFyZ2V0IGVsZW1lbnQgYXMgdGhlIGFyZ3VtZW50LgogICAqIEB0eXBlIHtGdW5jdGlvbn0KICAgKi8KICBvbk9wZW46IG5vb3AsCgogIC8qKgogICAqIFNhbWUgYXMgYWJvdmUsIGV4Y2VwdCBmaXJlZCB3aGVuIGNsb3NlZC4KICAgKiBAdHlwZSB7RnVuY3Rpb259CiAgICovCiAgb25DbG9zZTogbm9vcCwKCiAgLyoqCiAgICogU2FtZSBhcyBhYm92ZSwgZXhjZXB0IGZpcmVkIHdoZW4gZ3JhYmJlZC4KICAgKiBAdHlwZSB7RnVuY3Rpb259CiAgICovCiAgb25HcmFiOiBub29wLAoKICAvKioKICAgKiBTYW1lIGFzIGFib3ZlLCBleGNlcHQgZmlyZWQgd2hlbiBtb3ZlZC4KICAgKiBAdHlwZSB7RnVuY3Rpb259CiAgICovCiAgb25Nb3ZlOiBub29wLAoKICAvKioKICAgKiBTYW1lIGFzIGFib3ZlLCBleGNlcHQgZmlyZWQgd2hlbiByZWxlYXNlZC4KICAgKiBAdHlwZSB7RnVuY3Rpb259CiAgICovCiAgb25SZWxlYXNlOiBub29wLAoKICAvKioKICAgKiBBIGNhbGxiYWNrIGZ1bmN0aW9uIHRoYXQgd2lsbCBiZSBjYWxsZWQgYmVmb3JlIG9wZW4uCiAgICogQHR5cGUge0Z1bmN0aW9ufQogICAqLwogIG9uQmVmb3JlT3Blbjogbm9vcCwKCiAgLyoqCiAgICogQSBjYWxsYmFjayBmdW5jdGlvbiB0aGF0IHdpbGwgYmUgY2FsbGVkIGJlZm9yZSBjbG9zZS4KICAgKiBAdHlwZSB7RnVuY3Rpb259CiAgICovCiAgb25CZWZvcmVDbG9zZTogbm9vcCwKCiAgLyoqCiAgICogQSBjYWxsYmFjayBmdW5jdGlvbiB0aGF0IHdpbGwgYmUgY2FsbGVkIGJlZm9yZSBncmFiLgogICAqIEB0eXBlIHtGdW5jdGlvbn0KICAgKi8KICBvbkJlZm9yZUdyYWI6IG5vb3AsCgogIC8qKgogICAqIEEgY2FsbGJhY2sgZnVuY3Rpb24gdGhhdCB3aWxsIGJlIGNhbGxlZCBiZWZvcmUgcmVsZWFzZS4KICAgKiBAdHlwZSB7RnVuY3Rpb259CiAgICovCiAgb25CZWZvcmVSZWxlYXNlOiBub29wLAoKICAvKioKICAgKiBBIGNhbGxiYWNrIGZ1bmN0aW9uIHRoYXQgd2lsbCBiZSBjYWxsZWQgd2hlbiB0aGUgaGktcmVzIGltYWdlIGlzIGxvYWRpbmcuCiAgICogQHR5cGUge0Z1bmN0aW9ufQogICAqLwogIG9uSW1hZ2VMb2FkaW5nOiBub29wLAoKICAvKioKICAgKiBBIGNhbGxiYWNrIGZ1bmN0aW9uIHRoYXQgd2lsbCBiZSBjYWxsZWQgd2hlbiB0aGUgaGktcmVzIGltYWdlIGlzIGxvYWRlZC4KICAgKiBAdHlwZSB7RnVuY3Rpb259CiAgICovCiAgb25JbWFnZUxvYWRlZDogbm9vcAp9Owp2YXIgUFJFU1NfREVMQVkgPSAyMDA7CnZhciBoYW5kbGVyID0gewogIGluaXQ6IGZ1bmN0aW9uIGluaXQoaW5zdGFuY2UpIHsKICAgIGJpbmRBbGwodGhpcywgaW5zdGFuY2UpOwogIH0sCiAgY2xpY2s6IGZ1bmN0aW9uIGNsaWNrKGUpIHsKICAgIGUucHJldmVudERlZmF1bHQoKTsKCiAgICBpZiAoaXNQcmVzc2luZ01ldGFLZXkoZSkpIHsKICAgICAgcmV0dXJuIHdpbmRvdy5vcGVuKHRoaXMudGFyZ2V0LnNyY09yaWdpbmFsIHx8IGUuY3VycmVudFRhcmdldC5zcmMsICdfYmxhbmsnKTsKICAgIH0gZWxzZSB7CiAgICAgIGlmICh0aGlzLnNob3duKSB7CiAgICAgICAgaWYgKHRoaXMucmVsZWFzZWQpIHsKICAgICAgICAgIHRoaXMuY2xvc2UoKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5yZWxlYXNlKCk7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMub3BlbihlLmN1cnJlbnRUYXJnZXQpOwogICAgICB9CiAgICB9CiAgfSwKICBzY3JvbGw6IGZ1bmN0aW9uIHNjcm9sbCgpIHsKICAgIHZhciBlbCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCB8fCBkb2N1bWVudC5ib2R5LnBhcmVudE5vZGUgfHwgZG9jdW1lbnQuYm9keTsKICAgIHZhciBzY3JvbGxMZWZ0ID0gd2luZG93LnBhZ2VYT2Zmc2V0IHx8IGVsLnNjcm9sbExlZnQ7CiAgICB2YXIgc2Nyb2xsVG9wID0gd2luZG93LnBhZ2VZT2Zmc2V0IHx8IGVsLnNjcm9sbFRvcDsKCiAgICBpZiAodGhpcy5sYXN0U2Nyb2xsUG9zaXRpb24gPT09IG51bGwpIHsKICAgICAgdGhpcy5sYXN0U2Nyb2xsUG9zaXRpb24gPSB7CiAgICAgICAgeDogc2Nyb2xsTGVmdCwKICAgICAgICB5OiBzY3JvbGxUb3AKICAgICAgfTsKICAgIH0KCiAgICB2YXIgZGVsdGFYID0gdGhpcy5sYXN0U2Nyb2xsUG9zaXRpb24ueCAtIHNjcm9sbExlZnQ7CiAgICB2YXIgZGVsdGFZID0gdGhpcy5sYXN0U2Nyb2xsUG9zaXRpb24ueSAtIHNjcm9sbFRvcDsKICAgIHZhciB0aHJlc2hvbGQgPSB0aGlzLm9wdGlvbnMuc2Nyb2xsVGhyZXNob2xkOwoKICAgIGlmIChNYXRoLmFicyhkZWx0YVkpID49IHRocmVzaG9sZCB8fCBNYXRoLmFicyhkZWx0YVgpID49IHRocmVzaG9sZCkgewogICAgICB0aGlzLmxhc3RTY3JvbGxQb3NpdGlvbiA9IG51bGw7CiAgICAgIHRoaXMuY2xvc2UoKTsKICAgIH0KICB9LAogIGtleWRvd246IGZ1bmN0aW9uIGtleWRvd24oZSkgewogICAgaWYgKGlzRXNjYXBlKGUpKSB7CiAgICAgIGlmICh0aGlzLnJlbGVhc2VkKSB7CiAgICAgICAgdGhpcy5jbG9zZSgpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMucmVsZWFzZSh0aGlzLmNsb3NlKTsKICAgICAgfQogICAgfQogIH0sCiAgbW91c2Vkb3duOiBmdW5jdGlvbiBtb3VzZWRvd24oZSkgewogICAgaWYgKCFpc0xlZnRCdXR0b24oZSkgfHwgaXNQcmVzc2luZ01ldGFLZXkoZSkpIHJldHVybjsKICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgIHZhciBjbGllbnRYID0gZS5jbGllbnRYLAogICAgICAgIGNsaWVudFkgPSBlLmNsaWVudFk7CiAgICB0aGlzLnByZXNzVGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uIGdyYWJPbk1vdXNlRG93bigpIHsKICAgICAgdGhpcy5ncmFiKGNsaWVudFgsIGNsaWVudFkpOwogICAgfS5iaW5kKHRoaXMpLCBQUkVTU19ERUxBWSk7CiAgfSwKICBtb3VzZW1vdmU6IGZ1bmN0aW9uIG1vdXNlbW92ZShlKSB7CiAgICBpZiAodGhpcy5yZWxlYXNlZCkgcmV0dXJuOwogICAgdGhpcy5tb3ZlKGUuY2xpZW50WCwgZS5jbGllbnRZKTsKICB9LAogIG1vdXNldXA6IGZ1bmN0aW9uIG1vdXNldXAoZSkgewogICAgaWYgKCFpc0xlZnRCdXR0b24oZSkgfHwgaXNQcmVzc2luZ01ldGFLZXkoZSkpIHJldHVybjsKICAgIGNsZWFyVGltZW91dCh0aGlzLnByZXNzVGltZXIpOwoKICAgIGlmICh0aGlzLnJlbGVhc2VkKSB7CiAgICAgIHRoaXMuY2xvc2UoKTsKICAgIH0gZWxzZSB7CiAgICAgIHRoaXMucmVsZWFzZSgpOwogICAgfQogIH0sCiAgdG91Y2hzdGFydDogZnVuY3Rpb24gdG91Y2hzdGFydChlKSB7CiAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICB2YXIgX2UkdG91Y2hlcyQgPSBlLnRvdWNoZXNbMF0sCiAgICAgICAgY2xpZW50WCA9IF9lJHRvdWNoZXMkLmNsaWVudFgsCiAgICAgICAgY2xpZW50WSA9IF9lJHRvdWNoZXMkLmNsaWVudFk7CiAgICB0aGlzLnByZXNzVGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uIGdyYWJPblRvdWNoU3RhcnQoKSB7CiAgICAgIHRoaXMuZ3JhYihjbGllbnRYLCBjbGllbnRZKTsKICAgIH0uYmluZCh0aGlzKSwgUFJFU1NfREVMQVkpOwogIH0sCiAgdG91Y2htb3ZlOiBmdW5jdGlvbiB0b3VjaG1vdmUoZSkgewogICAgaWYgKHRoaXMucmVsZWFzZWQpIHJldHVybjsKICAgIHZhciBfZSR0b3VjaGVzJDIgPSBlLnRvdWNoZXNbMF0sCiAgICAgICAgY2xpZW50WCA9IF9lJHRvdWNoZXMkMi5jbGllbnRYLAogICAgICAgIGNsaWVudFkgPSBfZSR0b3VjaGVzJDIuY2xpZW50WTsKICAgIHRoaXMubW92ZShjbGllbnRYLCBjbGllbnRZKTsKICB9LAogIHRvdWNoZW5kOiBmdW5jdGlvbiB0b3VjaGVuZChlKSB7CiAgICBpZiAoaXNUb3VjaGluZyhlKSkgcmV0dXJuOwogICAgY2xlYXJUaW1lb3V0KHRoaXMucHJlc3NUaW1lcik7CgogICAgaWYgKHRoaXMucmVsZWFzZWQpIHsKICAgICAgdGhpcy5jbG9zZSgpOwogICAgfSBlbHNlIHsKICAgICAgdGhpcy5yZWxlYXNlKCk7CiAgICB9CiAgfSwKICBjbGlja092ZXJsYXk6IGZ1bmN0aW9uIGNsaWNrT3ZlcmxheSgpIHsKICAgIHRoaXMuY2xvc2UoKTsKICB9LAogIHJlc2l6ZVdpbmRvdzogZnVuY3Rpb24gcmVzaXplV2luZG93KCkgewogICAgdGhpcy5jbG9zZSgpOwogIH0KfTsKCmZ1bmN0aW9uIGlzTGVmdEJ1dHRvbihlKSB7CiAgcmV0dXJuIGUuYnV0dG9uID09PSAwOwp9CgpmdW5jdGlvbiBpc1ByZXNzaW5nTWV0YUtleShlKSB7CiAgcmV0dXJuIGUubWV0YUtleSB8fCBlLmN0cmxLZXk7Cn0KCmZ1bmN0aW9uIGlzVG91Y2hpbmcoZSkgewogIGUudGFyZ2V0VG91Y2hlcy5sZW5ndGggPiAwOwp9CgpmdW5jdGlvbiBpc0VzY2FwZShlKSB7CiAgdmFyIGNvZGUgPSBlLmtleSB8fCBlLmNvZGU7CiAgcmV0dXJuIGNvZGUgPT09ICdFc2NhcGUnIHx8IGUua2V5Q29kZSA9PT0gMjc7Cn0KCnZhciBvdmVybGF5ID0gewogIGluaXQ6IGZ1bmN0aW9uIGluaXQoaW5zdGFuY2UpIHsKICAgIHRoaXMuZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgIHRoaXMuaW5zdGFuY2UgPSBpbnN0YW5jZTsKICAgIHRoaXMucGFyZW50ID0gZG9jdW1lbnQuYm9keTsKICAgIHNldFN0eWxlKHRoaXMuZWwsIHsKICAgICAgcG9zaXRpb246ICdmaXhlZCcsCiAgICAgIHRvcDogMCwKICAgICAgbGVmdDogMCwKICAgICAgcmlnaHQ6IDAsCiAgICAgIGJvdHRvbTogMCwKICAgICAgb3BhY2l0eTogMAogICAgfSk7CiAgICB0aGlzLnVwZGF0ZVN0eWxlKGluc3RhbmNlLm9wdGlvbnMpOwogICAgbGlzdGVuKHRoaXMuZWwsICdjbGljaycsIGluc3RhbmNlLmhhbmRsZXIuY2xpY2tPdmVybGF5LmJpbmQoaW5zdGFuY2UpKTsKICB9LAogIHVwZGF0ZVN0eWxlOiBmdW5jdGlvbiB1cGRhdGVTdHlsZShvcHRpb25zKSB7CiAgICBzZXRTdHlsZSh0aGlzLmVsLCB7CiAgICAgIHpJbmRleDogb3B0aW9ucy56SW5kZXgsCiAgICAgIGJhY2tncm91bmRDb2xvcjogb3B0aW9ucy5iZ0NvbG9yLAogICAgICB0cmFuc2l0aW9uOiAnb3BhY2l0eVxuICAgICAgICAnICsgb3B0aW9ucy50cmFuc2l0aW9uRHVyYXRpb24gKyAnc1xuICAgICAgICAnICsgb3B0aW9ucy50cmFuc2l0aW9uVGltaW5nRnVuY3Rpb24KICAgIH0pOwogIH0sCiAgaW5zZXJ0OiBmdW5jdGlvbiBpbnNlcnQoKSB7CiAgICB0aGlzLnBhcmVudC5hcHBlbmRDaGlsZCh0aGlzLmVsKTsKICB9LAogIHJlbW92ZTogZnVuY3Rpb24gcmVtb3ZlKCkgewogICAgdGhpcy5wYXJlbnQucmVtb3ZlQ2hpbGQodGhpcy5lbCk7CiAgfSwKICBmYWRlSW46IGZ1bmN0aW9uIGZhZGVJbigpIHsKICAgIHRoaXMuZWwub2Zmc2V0V2lkdGg7CiAgICB0aGlzLmVsLnN0eWxlLm9wYWNpdHkgPSB0aGlzLmluc3RhbmNlLm9wdGlvbnMuYmdPcGFjaXR5OwogIH0sCiAgZmFkZU91dDogZnVuY3Rpb24gZmFkZU91dCgpIHsKICAgIHRoaXMuZWwuc3R5bGUub3BhY2l0eSA9IDA7CiAgfQp9OwoKdmFyIF90eXBlb2YgPSB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIF90eXBlb2YyKFN5bWJvbC5pdGVyYXRvcikgPT09ICJzeW1ib2wiID8gZnVuY3Rpb24gKG9iaikgewogIHJldHVybiBfdHlwZW9mMihvYmopOwp9IDogZnVuY3Rpb24gKG9iaikgewogIHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyAic3ltYm9sIiA6IF90eXBlb2YyKG9iaik7Cn07Cgp2YXIgY2xhc3NDYWxsQ2hlY2sgPSBmdW5jdGlvbiBjbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsKICBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgewogICAgdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIik7CiAgfQp9OwoKdmFyIGNyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgewogIGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgewogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgewogICAgICB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOwogICAgICBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7CiAgICAgIGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsKICAgICAgaWYgKCJ2YWx1ZSIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7CiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsKICAgIH0KICB9CgogIHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7CiAgICBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOwogICAgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7CiAgICByZXR1cm4gQ29uc3RydWN0b3I7CiAgfTsKfSgpOwoKdmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7CiAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsKICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07CgogICAgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgewogICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgewogICAgICAgIHRhcmdldFtrZXldID0gc291cmNlW2tleV07CiAgICAgIH0KICAgIH0KICB9CgogIHJldHVybiB0YXJnZXQ7Cn07IC8vIFRyYW5zbGF0ZSB6LWF4aXMgdG8gZml4IENTUyBncmlkIGRpc3BsYXkgaXNzdWUgaW4gQ2hyb21lOgovLyBodHRwczovL2dpdGh1Yi5jb20va2luZ2RpZG85OTkvem9vbWluZy9pc3N1ZXMvNDIKCgp2YXIgVFJBTlNMQVRFX1ogPSAwOwp2YXIgdGFyZ2V0ID0gewogIGluaXQ6IGZ1bmN0aW9uIGluaXQoZWwsIGluc3RhbmNlKSB7CiAgICB0aGlzLmVsID0gZWw7CiAgICB0aGlzLmluc3RhbmNlID0gaW5zdGFuY2U7CiAgICB0aGlzLnNyY1RodW1ibmFpbCA9IHRoaXMuZWwuZ2V0QXR0cmlidXRlKCdzcmMnKTsKICAgIHRoaXMuc3Jjc2V0ID0gdGhpcy5lbC5nZXRBdHRyaWJ1dGUoJ3NyY3NldCcpOwogICAgdGhpcy5zcmNPcmlnaW5hbCA9IGdldE9yaWdpbmFsU291cmNlKHRoaXMuZWwpOwogICAgdGhpcy5yZWN0ID0gdGhpcy5lbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsKICAgIHRoaXMudHJhbnNsYXRlID0gbnVsbDsKICAgIHRoaXMuc2NhbGUgPSBudWxsOwogICAgdGhpcy5zdHlsZU9wZW4gPSBudWxsOwogICAgdGhpcy5zdHlsZUNsb3NlID0gbnVsbDsKICB9LAogIHpvb21JbjogZnVuY3Rpb24gem9vbUluKCkgewogICAgdmFyIF9pbnN0YW5jZSRvcHRpb25zID0gdGhpcy5pbnN0YW5jZS5vcHRpb25zLAogICAgICAgIHpJbmRleCA9IF9pbnN0YW5jZSRvcHRpb25zLnpJbmRleCwKICAgICAgICBlbmFibGVHcmFiID0gX2luc3RhbmNlJG9wdGlvbnMuZW5hYmxlR3JhYiwKICAgICAgICB0cmFuc2l0aW9uRHVyYXRpb24gPSBfaW5zdGFuY2Ukb3B0aW9ucy50cmFuc2l0aW9uRHVyYXRpb24sCiAgICAgICAgdHJhbnNpdGlvblRpbWluZ0Z1bmN0aW9uID0gX2luc3RhbmNlJG9wdGlvbnMudHJhbnNpdGlvblRpbWluZ0Z1bmN0aW9uOwogICAgdGhpcy50cmFuc2xhdGUgPSB0aGlzLmNhbGN1bGF0ZVRyYW5zbGF0ZSgpOwogICAgdGhpcy5zY2FsZSA9IHRoaXMuY2FsY3VsYXRlU2NhbGUoKTsKICAgIHRoaXMuc3R5bGVPcGVuID0gewogICAgICBwb3NpdGlvbjogJ3JlbGF0aXZlJywKICAgICAgekluZGV4OiB6SW5kZXggKyAxLAogICAgICBjdXJzb3I6IGVuYWJsZUdyYWIgPyBjdXJzb3IuZ3JhYiA6IGN1cnNvci56b29tT3V0LAogICAgICB0cmFuc2l0aW9uOiB0cmFuc2Zvcm1Dc3NQcm9wICsgJ1xuICAgICAgICAnICsgdHJhbnNpdGlvbkR1cmF0aW9uICsgJ3NcbiAgICAgICAgJyArIHRyYW5zaXRpb25UaW1pbmdGdW5jdGlvbiwKICAgICAgdHJhbnNmb3JtOiAndHJhbnNsYXRlM2QoJyArIHRoaXMudHJhbnNsYXRlLnggKyAncHgsICcgKyB0aGlzLnRyYW5zbGF0ZS55ICsgJ3B4LCAnICsgVFJBTlNMQVRFX1ogKyAncHgpXG4gICAgICAgIHNjYWxlKCcgKyB0aGlzLnNjYWxlLnggKyAnLCcgKyB0aGlzLnNjYWxlLnkgKyAnKScsCiAgICAgIGhlaWdodDogdGhpcy5yZWN0LmhlaWdodCArICdweCcsCiAgICAgIHdpZHRoOiB0aGlzLnJlY3Qud2lkdGggKyAncHgnIC8vIEZvcmNlIGxheW91dCB1cGRhdGUKCiAgICB9OwogICAgdGhpcy5lbC5vZmZzZXRXaWR0aDsgLy8gVHJpZ2dlciB0cmFuc2l0aW9uCgogICAgdGhpcy5zdHlsZUNsb3NlID0gc2V0U3R5bGUodGhpcy5lbCwgdGhpcy5zdHlsZU9wZW4sIHRydWUpOwogIH0sCiAgem9vbU91dDogZnVuY3Rpb24gem9vbU91dCgpIHsKICAgIC8vIEZvcmNlIGxheW91dCB1cGRhdGUKICAgIHRoaXMuZWwub2Zmc2V0V2lkdGg7CiAgICBzZXRTdHlsZSh0aGlzLmVsLCB7CiAgICAgIHRyYW5zZm9ybTogJ25vbmUnCiAgICB9KTsKICB9LAogIGdyYWI6IGZ1bmN0aW9uIGdyYWIoeCwgeSwgc2NhbGVFeHRyYSkgewogICAgdmFyIHdpbmRvd0NlbnRlciA9IGdldFdpbmRvd0NlbnRlcigpOwogICAgdmFyIGR4ID0gd2luZG93Q2VudGVyLnggLSB4LAogICAgICAgIGR5ID0gd2luZG93Q2VudGVyLnkgLSB5OwogICAgc2V0U3R5bGUodGhpcy5lbCwgewogICAgICBjdXJzb3I6IGN1cnNvci5tb3ZlLAogICAgICB0cmFuc2Zvcm06ICd0cmFuc2xhdGUzZChcbiAgICAgICAgJyArICh0aGlzLnRyYW5zbGF0ZS54ICsgZHgpICsgJ3B4LCAnICsgKHRoaXMudHJhbnNsYXRlLnkgKyBkeSkgKyAncHgsICcgKyBUUkFOU0xBVEVfWiArICdweClcbiAgICAgICAgc2NhbGUoJyArICh0aGlzLnNjYWxlLnggKyBzY2FsZUV4dHJhKSArICcsJyArICh0aGlzLnNjYWxlLnkgKyBzY2FsZUV4dHJhKSArICcpJwogICAgfSk7CiAgfSwKICBtb3ZlOiBmdW5jdGlvbiBtb3ZlKHgsIHksIHNjYWxlRXh0cmEpIHsKICAgIHZhciB3aW5kb3dDZW50ZXIgPSBnZXRXaW5kb3dDZW50ZXIoKTsKICAgIHZhciBkeCA9IHdpbmRvd0NlbnRlci54IC0geCwKICAgICAgICBkeSA9IHdpbmRvd0NlbnRlci55IC0geTsKICAgIHNldFN0eWxlKHRoaXMuZWwsIHsKICAgICAgdHJhbnNpdGlvbjogdHJhbnNmb3JtQ3NzUHJvcCwKICAgICAgdHJhbnNmb3JtOiAndHJhbnNsYXRlM2QoXG4gICAgICAgICcgKyAodGhpcy50cmFuc2xhdGUueCArIGR4KSArICdweCwgJyArICh0aGlzLnRyYW5zbGF0ZS55ICsgZHkpICsgJ3B4LCAnICsgVFJBTlNMQVRFX1ogKyAncHgpXG4gICAgICAgIHNjYWxlKCcgKyAodGhpcy5zY2FsZS54ICsgc2NhbGVFeHRyYSkgKyAnLCcgKyAodGhpcy5zY2FsZS55ICsgc2NhbGVFeHRyYSkgKyAnKScKICAgIH0pOwogIH0sCiAgcmVzdG9yZUNsb3NlU3R5bGU6IGZ1bmN0aW9uIHJlc3RvcmVDbG9zZVN0eWxlKCkgewogICAgc2V0U3R5bGUodGhpcy5lbCwgdGhpcy5zdHlsZUNsb3NlKTsKICB9LAogIHJlc3RvcmVPcGVuU3R5bGU6IGZ1bmN0aW9uIHJlc3RvcmVPcGVuU3R5bGUoKSB7CiAgICBzZXRTdHlsZSh0aGlzLmVsLCB0aGlzLnN0eWxlT3Blbik7CiAgfSwKICB1cGdyYWRlU291cmNlOiBmdW5jdGlvbiB1cGdyYWRlU291cmNlKCkgewogICAgaWYgKHRoaXMuc3JjT3JpZ2luYWwpIHsKICAgICAgdmFyIHBhcmVudE5vZGUgPSB0aGlzLmVsLnBhcmVudE5vZGU7CgogICAgICBpZiAodGhpcy5zcmNzZXQpIHsKICAgICAgICB0aGlzLmVsLnJlbW92ZUF0dHJpYnV0ZSgnc3Jjc2V0Jyk7CiAgICAgIH0KCiAgICAgIHZhciB0ZW1wID0gdGhpcy5lbC5jbG9uZU5vZGUoZmFsc2UpOyAvLyBGb3JjZSBjb21wdXRlIHRoZSBoaS1yZXMgaW1hZ2UgaW4gRE9NIHRvIHByZXZlbnQKICAgICAgLy8gaW1hZ2UgZmxpY2tlcmluZyB3aGlsZSB1cGRhdGluZyBzcmMKCiAgICAgIHRlbXAuc2V0QXR0cmlidXRlKCdzcmMnLCB0aGlzLnNyY09yaWdpbmFsKTsKICAgICAgdGVtcC5zdHlsZS5wb3NpdGlvbiA9ICdmaXhlZCc7CiAgICAgIHRlbXAuc3R5bGUudmlzaWJpbGl0eSA9ICdoaWRkZW4nOwogICAgICBwYXJlbnROb2RlLmFwcGVuZENoaWxkKHRlbXApOyAvLyBBZGQgZGVsYXkgdG8gcHJldmVudCBGaXJlZm94IGZyb20gZmxpY2tlcmluZwoKICAgICAgc2V0VGltZW91dChmdW5jdGlvbiB1cGRhdGVTcmMoKSB7CiAgICAgICAgdGhpcy5lbC5zZXRBdHRyaWJ1dGUoJ3NyYycsIHRoaXMuc3JjT3JpZ2luYWwpOwogICAgICAgIHBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGVtcCk7CiAgICAgIH0uYmluZCh0aGlzKSwgNTApOwogICAgfQogIH0sCiAgZG93bmdyYWRlU291cmNlOiBmdW5jdGlvbiBkb3duZ3JhZGVTb3VyY2UoKSB7CiAgICBpZiAodGhpcy5zcmNPcmlnaW5hbCkgewogICAgICBpZiAodGhpcy5zcmNzZXQpIHsKICAgICAgICB0aGlzLmVsLnNldEF0dHJpYnV0ZSgnc3Jjc2V0JywgdGhpcy5zcmNzZXQpOwogICAgICB9CgogICAgICB0aGlzLmVsLnNldEF0dHJpYnV0ZSgnc3JjJywgdGhpcy5zcmNUaHVtYm5haWwpOwogICAgfQogIH0sCiAgY2FsY3VsYXRlVHJhbnNsYXRlOiBmdW5jdGlvbiBjYWxjdWxhdGVUcmFuc2xhdGUoKSB7CiAgICB2YXIgd2luZG93Q2VudGVyID0gZ2V0V2luZG93Q2VudGVyKCk7CiAgICB2YXIgdGFyZ2V0Q2VudGVyID0gewogICAgICB4OiB0aGlzLnJlY3QubGVmdCArIHRoaXMucmVjdC53aWR0aCAvIDIsCiAgICAgIHk6IHRoaXMucmVjdC50b3AgKyB0aGlzLnJlY3QuaGVpZ2h0IC8gMiAvLyBUaGUgdmVjdG9yIHRvIHRyYW5zbGF0ZSBpbWFnZSB0byB0aGUgd2luZG93IGNlbnRlcgoKICAgIH07CiAgICByZXR1cm4gewogICAgICB4OiB3aW5kb3dDZW50ZXIueCAtIHRhcmdldENlbnRlci54LAogICAgICB5OiB3aW5kb3dDZW50ZXIueSAtIHRhcmdldENlbnRlci55CiAgICB9OwogIH0sCiAgY2FsY3VsYXRlU2NhbGU6IGZ1bmN0aW9uIGNhbGN1bGF0ZVNjYWxlKCkgewogICAgdmFyIF9lbCRkYXRhc2V0ID0gdGhpcy5lbC5kYXRhc2V0LAogICAgICAgIHpvb21pbmdIZWlnaHQgPSBfZWwkZGF0YXNldC56b29taW5nSGVpZ2h0LAogICAgICAgIHpvb21pbmdXaWR0aCA9IF9lbCRkYXRhc2V0Lnpvb21pbmdXaWR0aDsKICAgIHZhciBfaW5zdGFuY2Ukb3B0aW9uczIgPSB0aGlzLmluc3RhbmNlLm9wdGlvbnMsCiAgICAgICAgY3VzdG9tU2l6ZSA9IF9pbnN0YW5jZSRvcHRpb25zMi5jdXN0b21TaXplLAogICAgICAgIHNjYWxlQmFzZSA9IF9pbnN0YW5jZSRvcHRpb25zMi5zY2FsZUJhc2U7CgogICAgaWYgKCFjdXN0b21TaXplICYmIHpvb21pbmdIZWlnaHQgJiYgem9vbWluZ1dpZHRoKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgeDogem9vbWluZ1dpZHRoIC8gdGhpcy5yZWN0LndpZHRoLAogICAgICAgIHk6IHpvb21pbmdIZWlnaHQgLyB0aGlzLnJlY3QuaGVpZ2h0CiAgICAgIH07CiAgICB9IGVsc2UgaWYgKGN1c3RvbVNpemUgJiYgKHR5cGVvZiBjdXN0b21TaXplID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZihjdXN0b21TaXplKSkgPT09ICdvYmplY3QnKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgeDogY3VzdG9tU2l6ZS53aWR0aCAvIHRoaXMucmVjdC53aWR0aCwKICAgICAgICB5OiBjdXN0b21TaXplLmhlaWdodCAvIHRoaXMucmVjdC5oZWlnaHQKICAgICAgfTsKICAgIH0gZWxzZSB7CiAgICAgIHZhciB0YXJnZXRIYWxmV2lkdGggPSB0aGlzLnJlY3Qud2lkdGggLyAyOwogICAgICB2YXIgdGFyZ2V0SGFsZkhlaWdodCA9IHRoaXMucmVjdC5oZWlnaHQgLyAyOwogICAgICB2YXIgd2luZG93Q2VudGVyID0gZ2V0V2luZG93Q2VudGVyKCk7IC8vIFRoZSBkaXN0YW5jZSBiZXR3ZWVuIHRhcmdldCBlZGdlIGFuZCB3aW5kb3cgZWRnZQoKICAgICAgdmFyIHRhcmdldEVkZ2VUb1dpbmRvd0VkZ2UgPSB7CiAgICAgICAgeDogd2luZG93Q2VudGVyLnggLSB0YXJnZXRIYWxmV2lkdGgsCiAgICAgICAgeTogd2luZG93Q2VudGVyLnkgLSB0YXJnZXRIYWxmSGVpZ2h0CiAgICAgIH07CiAgICAgIHZhciBzY2FsZUhvcml6b250YWxseSA9IHRhcmdldEVkZ2VUb1dpbmRvd0VkZ2UueCAvIHRhcmdldEhhbGZXaWR0aDsKICAgICAgdmFyIHNjYWxlVmVydGljYWxseSA9IHRhcmdldEVkZ2VUb1dpbmRvd0VkZ2UueSAvIHRhcmdldEhhbGZIZWlnaHQ7IC8vIFRoZSBhZGRpdGlvbmFsIHNjYWxlIGlzIGJhc2VkIG9uIHRoZSBzbWFsbGVyIHZhbHVlIG9mCiAgICAgIC8vIHNjYWxpbmcgaG9yaXpvbnRhbGx5IGFuZCBzY2FsaW5nIHZlcnRpY2FsbHkKCiAgICAgIHZhciBzY2FsZSA9IHNjYWxlQmFzZSArIE1hdGgubWluKHNjYWxlSG9yaXpvbnRhbGx5LCBzY2FsZVZlcnRpY2FsbHkpOwoKICAgICAgaWYgKGN1c3RvbVNpemUgJiYgdHlwZW9mIGN1c3RvbVNpemUgPT09ICdzdHJpbmcnKSB7CiAgICAgICAgLy8gVXNlIHpvb21pbmdXaWR0aCBhbmQgem9vbWluZ0hlaWdodCBpZiBhdmFpbGFibGUKICAgICAgICB2YXIgbmF0dXJhbFdpZHRoID0gem9vbWluZ1dpZHRoIHx8IHRoaXMuZWwubmF0dXJhbFdpZHRoOwogICAgICAgIHZhciBuYXR1cmFsSGVpZ2h0ID0gem9vbWluZ0hlaWdodCB8fCB0aGlzLmVsLm5hdHVyYWxIZWlnaHQ7CiAgICAgICAgdmFyIG1heFpvb21pbmdXaWR0aCA9IHBhcnNlRmxvYXQoY3VzdG9tU2l6ZSkgKiBuYXR1cmFsV2lkdGggLyAoMTAwICogdGhpcy5yZWN0LndpZHRoKTsKICAgICAgICB2YXIgbWF4Wm9vbWluZ0hlaWdodCA9IHBhcnNlRmxvYXQoY3VzdG9tU2l6ZSkgKiBuYXR1cmFsSGVpZ2h0IC8gKDEwMCAqIHRoaXMucmVjdC5oZWlnaHQpOyAvLyBPbmx5IHNjYWxlIGltYWdlIHVwIHRvIHRoZSBzcGVjaWZpZWQgY3VzdG9tU2l6ZSBwZXJjZW50YWdlCgogICAgICAgIGlmIChzY2FsZSA+IG1heFpvb21pbmdXaWR0aCB8fCBzY2FsZSA+IG1heFpvb21pbmdIZWlnaHQpIHsKICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIHg6IG1heFpvb21pbmdXaWR0aCwKICAgICAgICAgICAgeTogbWF4Wm9vbWluZ0hlaWdodAogICAgICAgICAgfTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiB7CiAgICAgICAgeDogc2NhbGUsCiAgICAgICAgeTogc2NhbGUKICAgICAgfTsKICAgIH0KICB9Cn07CgpmdW5jdGlvbiBnZXRXaW5kb3dDZW50ZXIoKSB7CiAgdmFyIGRvY0VsID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50OwogIHZhciB3aW5kb3dXaWR0aCA9IE1hdGgubWluKGRvY0VsLmNsaWVudFdpZHRoLCB3aW5kb3cuaW5uZXJXaWR0aCk7CiAgdmFyIHdpbmRvd0hlaWdodCA9IE1hdGgubWluKGRvY0VsLmNsaWVudEhlaWdodCwgd2luZG93LmlubmVySGVpZ2h0KTsKICByZXR1cm4gewogICAgeDogd2luZG93V2lkdGggLyAyLAogICAgeTogd2luZG93SGVpZ2h0IC8gMgogIH07Cn0KLyoqCiAqIFpvb21pbmcgaW5zdGFuY2UuCiAqLwoKCnZhciBab29taW5nID0gZnVuY3Rpb24gKCkgewogIC8qKgogICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc10gVXBkYXRlIGRlZmF1bHQgb3B0aW9ucyBpZiBwcm92aWRlZC4KICAgKi8KICBmdW5jdGlvbiBab29taW5nKG9wdGlvbnMpIHsKICAgIGNsYXNzQ2FsbENoZWNrKHRoaXMsIFpvb21pbmcpOwogICAgdGhpcy50YXJnZXQgPSBPYmplY3QuY3JlYXRlKHRhcmdldCk7CiAgICB0aGlzLm92ZXJsYXkgPSBPYmplY3QuY3JlYXRlKG92ZXJsYXkpOwogICAgdGhpcy5oYW5kbGVyID0gT2JqZWN0LmNyZWF0ZShoYW5kbGVyKTsKICAgIHRoaXMuYm9keSA9IGRvY3VtZW50LmJvZHk7CiAgICB0aGlzLnNob3duID0gZmFsc2U7CiAgICB0aGlzLmxvY2sgPSBmYWxzZTsKICAgIHRoaXMucmVsZWFzZWQgPSB0cnVlOwogICAgdGhpcy5sYXN0U2Nyb2xsUG9zaXRpb24gPSBudWxsOwogICAgdGhpcy5wcmVzc1RpbWVyID0gbnVsbDsKICAgIHRoaXMub3B0aW9ucyA9IF9leHRlbmRzKHt9LCBERUZBVUxUX09QVElPTlMsIG9wdGlvbnMpOwogICAgdGhpcy5vdmVybGF5LmluaXQodGhpcyk7CiAgICB0aGlzLmhhbmRsZXIuaW5pdCh0aGlzKTsKICB9CiAgLyoqCiAgICogTWFrZSBlbGVtZW50KHMpIHpvb21hYmxlLgogICAqIEBwYXJhbSAge3N0cmluZ3xFbGVtZW50fSBlbCBBIGNzcyBzZWxlY3RvciBvciBhbiBFbGVtZW50LgogICAqIEByZXR1cm4ge3RoaXN9CiAgICovCgoKICBjcmVhdGVDbGFzcyhab29taW5nLCBbewogICAga2V5OiAnbGlzdGVuJywKICAgIHZhbHVlOiBmdW5jdGlvbiBsaXN0ZW4kJDEoZWwpIHsKICAgICAgaWYgKHR5cGVvZiBlbCA9PT0gJ3N0cmluZycpIHsKICAgICAgICB2YXIgZWxzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChlbCk7CiAgICAgICAgdmFyIGkgPSBlbHMubGVuZ3RoOwoKICAgICAgICB3aGlsZSAoaS0tKSB7CiAgICAgICAgICB0aGlzLmxpc3RlbihlbHNbaV0pOwogICAgICAgIH0KICAgICAgfSBlbHNlIGlmIChlbC50YWdOYW1lID09PSAnSU1HJykgewogICAgICAgIGVsLnN0eWxlLmN1cnNvciA9IGN1cnNvci56b29tSW47CiAgICAgICAgbGlzdGVuKGVsLCAnY2xpY2snLCB0aGlzLmhhbmRsZXIuY2xpY2spOwoKICAgICAgICBpZiAodGhpcy5vcHRpb25zLnByZWxvYWRJbWFnZSkgewogICAgICAgICAgbG9hZEltYWdlKGdldE9yaWdpbmFsU291cmNlKGVsKSk7CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gdGhpczsKICAgIH0KICAgIC8qKgogICAgICogVXBkYXRlIG9wdGlvbnMgb3IgcmV0dXJuIGN1cnJlbnQgb3B0aW9ucyBpZiBubyBhcmd1bWVudCBpcyBwcm92aWRlZC4KICAgICAqIEBwYXJhbSAge09iamVjdH0gb3B0aW9ucyBBbiBPYmplY3QgdGhhdCBjb250YWlucyB0aGlzLm9wdGlvbnMuCiAgICAgKiBAcmV0dXJuIHt0aGlzfHRoaXMub3B0aW9uc30KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdjb25maWcnLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNvbmZpZyhvcHRpb25zKSB7CiAgICAgIGlmIChvcHRpb25zKSB7CiAgICAgICAgX2V4dGVuZHModGhpcy5vcHRpb25zLCBvcHRpb25zKTsKCiAgICAgICAgdGhpcy5vdmVybGF5LnVwZGF0ZVN0eWxlKHRoaXMub3B0aW9ucyk7CiAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9uczsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBPcGVuICh6b29tIGluKSB0aGUgRWxlbWVudC4KICAgICAqIEBwYXJhbSAge0VsZW1lbnR9IGVsIFRoZSBFbGVtZW50IHRvIG9wZW4uCiAgICAgKiBAcGFyYW0gIHtGdW5jdGlvbn0gW2NiPXRoaXMub3B0aW9ucy5vbk9wZW5dIEEgY2FsbGJhY2sgZnVuY3Rpb24gdGhhdCB3aWxsCiAgICAgKiBiZSBjYWxsZWQgd2hlbiBhIHRhcmdldCBpcyBvcGVuZWQgYW5kIHRyYW5zaXRpb24gaGFzIGVuZGVkLiBJdCB3aWxsIGdldAogICAgICogdGhlIHRhcmdldCBlbGVtZW50IGFzIHRoZSBhcmd1bWVudC4KICAgICAqIEByZXR1cm4ge3RoaXN9CiAgICAgKi8KCiAgfSwgewogICAga2V5OiAnb3BlbicsCiAgICB2YWx1ZTogZnVuY3Rpb24gb3BlbihlbCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdmFyIGNiID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB0aGlzLm9wdGlvbnMub25PcGVuOwogICAgICBpZiAodGhpcy5zaG93biB8fCB0aGlzLmxvY2spIHJldHVybjsKICAgICAgdmFyIHRhcmdldCQkMSA9IHR5cGVvZiBlbCA9PT0gJ3N0cmluZycgPyBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGVsKSA6IGVsOwogICAgICBpZiAodGFyZ2V0JCQxLnRhZ05hbWUgIT09ICdJTUcnKSByZXR1cm47CiAgICAgIHRoaXMub3B0aW9ucy5vbkJlZm9yZU9wZW4odGFyZ2V0JCQxKTsKICAgICAgdGhpcy50YXJnZXQuaW5pdCh0YXJnZXQkJDEsIHRoaXMpOwoKICAgICAgaWYgKCF0aGlzLm9wdGlvbnMucHJlbG9hZEltYWdlKSB7CiAgICAgICAgdmFyIHNyY09yaWdpbmFsID0gdGhpcy50YXJnZXQuc3JjT3JpZ2luYWw7CgogICAgICAgIGlmIChzcmNPcmlnaW5hbCAhPSBudWxsKSB7CiAgICAgICAgICB0aGlzLm9wdGlvbnMub25JbWFnZUxvYWRpbmcodGFyZ2V0JCQxKTsKICAgICAgICAgIGxvYWRJbWFnZShzcmNPcmlnaW5hbCwgdGhpcy5vcHRpb25zLm9uSW1hZ2VMb2FkZWQpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgdGhpcy5zaG93biA9IHRydWU7CiAgICAgIHRoaXMubG9jayA9IHRydWU7CiAgICAgIHRoaXMudGFyZ2V0Lnpvb21JbigpOwogICAgICB0aGlzLm92ZXJsYXkuaW5zZXJ0KCk7CiAgICAgIHRoaXMub3ZlcmxheS5mYWRlSW4oKTsKICAgICAgbGlzdGVuKGRvY3VtZW50LCAnc2Nyb2xsJywgdGhpcy5oYW5kbGVyLnNjcm9sbCk7CiAgICAgIGxpc3Rlbihkb2N1bWVudCwgJ2tleWRvd24nLCB0aGlzLmhhbmRsZXIua2V5ZG93bik7CgogICAgICBpZiAodGhpcy5vcHRpb25zLmNsb3NlT25XaW5kb3dSZXNpemUpIHsKICAgICAgICBsaXN0ZW4od2luZG93LCAncmVzaXplJywgdGhpcy5oYW5kbGVyLnJlc2l6ZVdpbmRvdyk7CiAgICAgIH0KCiAgICAgIHZhciBvbk9wZW5FbmQgPSBmdW5jdGlvbiBvbk9wZW5FbmQoKSB7CiAgICAgICAgbGlzdGVuKHRhcmdldCQkMSwgdHJhbnNFbmRFdmVudCwgb25PcGVuRW5kLCBmYWxzZSk7CiAgICAgICAgX3RoaXMubG9jayA9IGZhbHNlOwoKICAgICAgICBfdGhpcy50YXJnZXQudXBncmFkZVNvdXJjZSgpOwoKICAgICAgICBpZiAoX3RoaXMub3B0aW9ucy5lbmFibGVHcmFiKSB7CiAgICAgICAgICB0b2dnbGVHcmFiTGlzdGVuZXJzKGRvY3VtZW50LCBfdGhpcy5oYW5kbGVyLCB0cnVlKTsKICAgICAgICB9CgogICAgICAgIGNiKHRhcmdldCQkMSk7CiAgICAgIH07CgogICAgICBsaXN0ZW4odGFyZ2V0JCQxLCB0cmFuc0VuZEV2ZW50LCBvbk9wZW5FbmQpOwogICAgICByZXR1cm4gdGhpczsKICAgIH0KICAgIC8qKgogICAgICogQ2xvc2UgKHpvb20gb3V0KSB0aGUgRWxlbWVudCBjdXJyZW50bHkgb3BlbmVkLgogICAgICogQHBhcmFtICB7RnVuY3Rpb259IFtjYj10aGlzLm9wdGlvbnMub25DbG9zZV0gQSBjYWxsYmFjayBmdW5jdGlvbiB0aGF0IHdpbGwKICAgICAqIGJlIGNhbGxlZCB3aGVuIGEgdGFyZ2V0IGlzIGNsb3NlZCBhbmQgdHJhbnNpdGlvbiBoYXMgZW5kZWQuIEl0IHdpbGwgZ2V0CiAgICAgKiB0aGUgdGFyZ2V0IGVsZW1lbnQgYXMgdGhlIGFyZ3VtZW50LgogICAgICogQHJldHVybiB7dGhpc30KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICdjbG9zZScsCiAgICB2YWx1ZTogZnVuY3Rpb24gY2xvc2UoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdmFyIGNiID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB0aGlzLm9wdGlvbnMub25DbG9zZTsKICAgICAgaWYgKCF0aGlzLnNob3duIHx8IHRoaXMubG9jaykgcmV0dXJuOwogICAgICB2YXIgdGFyZ2V0JCQxID0gdGhpcy50YXJnZXQuZWw7CiAgICAgIHRoaXMub3B0aW9ucy5vbkJlZm9yZUNsb3NlKHRhcmdldCQkMSk7CiAgICAgIHRoaXMubG9jayA9IHRydWU7CiAgICAgIHRoaXMuYm9keS5zdHlsZS5jdXJzb3IgPSBjdXJzb3JbImRlZmF1bHQiXTsKICAgICAgdGhpcy5vdmVybGF5LmZhZGVPdXQoKTsKICAgICAgdGhpcy50YXJnZXQuem9vbU91dCgpOwogICAgICBsaXN0ZW4oZG9jdW1lbnQsICdzY3JvbGwnLCB0aGlzLmhhbmRsZXIuc2Nyb2xsLCBmYWxzZSk7CiAgICAgIGxpc3Rlbihkb2N1bWVudCwgJ2tleWRvd24nLCB0aGlzLmhhbmRsZXIua2V5ZG93biwgZmFsc2UpOwoKICAgICAgaWYgKHRoaXMub3B0aW9ucy5jbG9zZU9uV2luZG93UmVzaXplKSB7CiAgICAgICAgbGlzdGVuKHdpbmRvdywgJ3Jlc2l6ZScsIHRoaXMuaGFuZGxlci5yZXNpemVXaW5kb3csIGZhbHNlKTsKICAgICAgfQoKICAgICAgdmFyIG9uQ2xvc2VFbmQgPSBmdW5jdGlvbiBvbkNsb3NlRW5kKCkgewogICAgICAgIGxpc3Rlbih0YXJnZXQkJDEsIHRyYW5zRW5kRXZlbnQsIG9uQ2xvc2VFbmQsIGZhbHNlKTsKICAgICAgICBfdGhpczIuc2hvd24gPSBmYWxzZTsKICAgICAgICBfdGhpczIubG9jayA9IGZhbHNlOwoKICAgICAgICBfdGhpczIudGFyZ2V0LmRvd25ncmFkZVNvdXJjZSgpOwoKICAgICAgICBpZiAoX3RoaXMyLm9wdGlvbnMuZW5hYmxlR3JhYikgewogICAgICAgICAgdG9nZ2xlR3JhYkxpc3RlbmVycyhkb2N1bWVudCwgX3RoaXMyLmhhbmRsZXIsIGZhbHNlKTsKICAgICAgICB9CgogICAgICAgIF90aGlzMi50YXJnZXQucmVzdG9yZUNsb3NlU3R5bGUoKTsKCiAgICAgICAgX3RoaXMyLm92ZXJsYXkucmVtb3ZlKCk7CgogICAgICAgIGNiKHRhcmdldCQkMSk7CiAgICAgIH07CgogICAgICBsaXN0ZW4odGFyZ2V0JCQxLCB0cmFuc0VuZEV2ZW50LCBvbkNsb3NlRW5kKTsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgICAvKioKICAgICAqIEdyYWIgdGhlIEVsZW1lbnQgY3VycmVudGx5IG9wZW5lZCBnaXZlbiBhIHBvc2l0aW9uIGFuZCBhcHBseSBleHRyYSB6b29tLWluLgogICAgICogQHBhcmFtICB7bnVtYmVyfSAgIHggVGhlIFgtYXhpcyBvZiB3aGVyZSB0aGUgcHJlc3MgaGFwcGVuZWQuCiAgICAgKiBAcGFyYW0gIHtudW1iZXJ9ICAgeSBUaGUgWS1heGlzIG9mIHdoZXJlIHRoZSBwcmVzcyBoYXBwZW5lZC4KICAgICAqIEBwYXJhbSAge251bWJlcn0gICBzY2FsZUV4dHJhIEV4dHJhIHpvb20taW4gdG8gYXBwbHkuCiAgICAgKiBAcGFyYW0gIHtGdW5jdGlvbn0gW2NiPXRoaXMub3B0aW9ucy5vbkdyYWJdIEEgY2FsbGJhY2sgZnVuY3Rpb24gdGhhdAogICAgICogd2lsbCBiZSBjYWxsZWQgd2hlbiBhIHRhcmdldCBpcyBncmFiYmVkIGFuZCB0cmFuc2l0aW9uIGhhcyBlbmRlZC4gSXQKICAgICAqIHdpbGwgZ2V0IHRoZSB0YXJnZXQgZWxlbWVudCBhcyB0aGUgYXJndW1lbnQuCiAgICAgKiBAcmV0dXJuIHt0aGlzfQogICAgICovCgogIH0sIHsKICAgIGtleTogJ2dyYWInLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdyYWIoeCwgeSkgewogICAgICB2YXIgc2NhbGVFeHRyYSA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDogdGhpcy5vcHRpb25zLnNjYWxlRXh0cmE7CiAgICAgIHZhciBjYiA9IGFyZ3VtZW50cy5sZW5ndGggPiAzICYmIGFyZ3VtZW50c1szXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzNdIDogdGhpcy5vcHRpb25zLm9uR3JhYjsKICAgICAgaWYgKCF0aGlzLnNob3duIHx8IHRoaXMubG9jaykgcmV0dXJuOwogICAgICB2YXIgdGFyZ2V0JCQxID0gdGhpcy50YXJnZXQuZWw7CiAgICAgIHRoaXMub3B0aW9ucy5vbkJlZm9yZUdyYWIodGFyZ2V0JCQxKTsKICAgICAgdGhpcy5yZWxlYXNlZCA9IGZhbHNlOwogICAgICB0aGlzLnRhcmdldC5ncmFiKHgsIHksIHNjYWxlRXh0cmEpOwoKICAgICAgdmFyIG9uR3JhYkVuZCA9IGZ1bmN0aW9uIG9uR3JhYkVuZCgpIHsKICAgICAgICBsaXN0ZW4odGFyZ2V0JCQxLCB0cmFuc0VuZEV2ZW50LCBvbkdyYWJFbmQsIGZhbHNlKTsKICAgICAgICBjYih0YXJnZXQkJDEpOwogICAgICB9OwoKICAgICAgbGlzdGVuKHRhcmdldCQkMSwgdHJhbnNFbmRFdmVudCwgb25HcmFiRW5kKTsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgICAvKioKICAgICAqIE1vdmUgdGhlIEVsZW1lbnQgY3VycmVudGx5IGdyYWJiZWQgZ2l2ZW4gYSBwb3NpdGlvbiBhbmQgYXBwbHkgZXh0cmEgem9vbS1pbi4KICAgICAqIEBwYXJhbSAge251bWJlcn0gICB4IFRoZSBYLWF4aXMgb2Ygd2hlcmUgdGhlIHByZXNzIGhhcHBlbmVkLgogICAgICogQHBhcmFtICB7bnVtYmVyfSAgIHkgVGhlIFktYXhpcyBvZiB3aGVyZSB0aGUgcHJlc3MgaGFwcGVuZWQuCiAgICAgKiBAcGFyYW0gIHtudW1iZXJ9ICAgc2NhbGVFeHRyYSBFeHRyYSB6b29tLWluIHRvIGFwcGx5LgogICAgICogQHBhcmFtICB7RnVuY3Rpb259IFtjYj10aGlzLm9wdGlvbnMub25Nb3ZlXSBBIGNhbGxiYWNrIGZ1bmN0aW9uIHRoYXQKICAgICAqIHdpbGwgYmUgY2FsbGVkIHdoZW4gYSB0YXJnZXQgaXMgbW92ZWQgYW5kIHRyYW5zaXRpb24gaGFzIGVuZGVkLiBJdCB3aWxsCiAgICAgKiBnZXQgdGhlIHRhcmdldCBlbGVtZW50IGFzIHRoZSBhcmd1bWVudC4KICAgICAqIEByZXR1cm4ge3RoaXN9CiAgICAgKi8KCiAgfSwgewogICAga2V5OiAnbW92ZScsCiAgICB2YWx1ZTogZnVuY3Rpb24gbW92ZSh4LCB5KSB7CiAgICAgIHZhciBzY2FsZUV4dHJhID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiB0aGlzLm9wdGlvbnMuc2NhbGVFeHRyYTsKICAgICAgdmFyIGNiID0gYXJndW1lbnRzLmxlbmd0aCA+IDMgJiYgYXJndW1lbnRzWzNdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbM10gOiB0aGlzLm9wdGlvbnMub25Nb3ZlOwogICAgICBpZiAoIXRoaXMuc2hvd24gfHwgdGhpcy5sb2NrKSByZXR1cm47CiAgICAgIHRoaXMucmVsZWFzZWQgPSBmYWxzZTsKICAgICAgdGhpcy5ib2R5LnN0eWxlLmN1cnNvciA9IGN1cnNvci5tb3ZlOwogICAgICB0aGlzLnRhcmdldC5tb3ZlKHgsIHksIHNjYWxlRXh0cmEpOwogICAgICB2YXIgdGFyZ2V0JCQxID0gdGhpcy50YXJnZXQuZWw7CgogICAgICB2YXIgb25Nb3ZlRW5kID0gZnVuY3Rpb24gb25Nb3ZlRW5kKCkgewogICAgICAgIGxpc3Rlbih0YXJnZXQkJDEsIHRyYW5zRW5kRXZlbnQsIG9uTW92ZUVuZCwgZmFsc2UpOwogICAgICAgIGNiKHRhcmdldCQkMSk7CiAgICAgIH07CgogICAgICBsaXN0ZW4odGFyZ2V0JCQxLCB0cmFuc0VuZEV2ZW50LCBvbk1vdmVFbmQpOwogICAgICByZXR1cm4gdGhpczsKICAgIH0KICAgIC8qKgogICAgICogUmVsZWFzZSB0aGUgRWxlbWVudCBjdXJyZW50bHkgZ3JhYmJlZC4KICAgICAqIEBwYXJhbSAge0Z1bmN0aW9ufSBbY2I9dGhpcy5vcHRpb25zLm9uUmVsZWFzZV0gQSBjYWxsYmFjayBmdW5jdGlvbiB0aGF0CiAgICAgKiB3aWxsIGJlIGNhbGxlZCB3aGVuIGEgdGFyZ2V0IGlzIHJlbGVhc2VkIGFuZCB0cmFuc2l0aW9uIGhhcyBlbmRlZC4gSXQKICAgICAqIHdpbGwgZ2V0IHRoZSB0YXJnZXQgZWxlbWVudCBhcyB0aGUgYXJndW1lbnQuCiAgICAgKiBAcmV0dXJuIHt0aGlzfQogICAgICovCgogIH0sIHsKICAgIGtleTogJ3JlbGVhc2UnLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlbGVhc2UoKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgdmFyIGNiID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB0aGlzLm9wdGlvbnMub25SZWxlYXNlOwogICAgICBpZiAoIXRoaXMuc2hvd24gfHwgdGhpcy5sb2NrKSByZXR1cm47CiAgICAgIHZhciB0YXJnZXQkJDEgPSB0aGlzLnRhcmdldC5lbDsKICAgICAgdGhpcy5vcHRpb25zLm9uQmVmb3JlUmVsZWFzZSh0YXJnZXQkJDEpOwogICAgICB0aGlzLmxvY2sgPSB0cnVlOwogICAgICB0aGlzLmJvZHkuc3R5bGUuY3Vyc29yID0gY3Vyc29yWyJkZWZhdWx0Il07CiAgICAgIHRoaXMudGFyZ2V0LnJlc3RvcmVPcGVuU3R5bGUoKTsKCiAgICAgIHZhciBvblJlbGVhc2VFbmQgPSBmdW5jdGlvbiBvblJlbGVhc2VFbmQoKSB7CiAgICAgICAgbGlzdGVuKHRhcmdldCQkMSwgdHJhbnNFbmRFdmVudCwgb25SZWxlYXNlRW5kLCBmYWxzZSk7CiAgICAgICAgX3RoaXMzLmxvY2sgPSBmYWxzZTsKICAgICAgICBfdGhpczMucmVsZWFzZWQgPSB0cnVlOwogICAgICAgIGNiKHRhcmdldCQkMSk7CiAgICAgIH07CgogICAgICBsaXN0ZW4odGFyZ2V0JCQxLCB0cmFuc0VuZEV2ZW50LCBvblJlbGVhc2VFbmQpOwogICAgICByZXR1cm4gdGhpczsKICAgIH0KICB9XSk7CiAgcmV0dXJuIFpvb21pbmc7Cn0oKTsKCmZ1bmN0aW9uIHRvZ2dsZUdyYWJMaXN0ZW5lcnMoZWwsIGhhbmRsZXIkJDEsIGFkZCkgewogIHZhciB0eXBlcyA9IFsnbW91c2Vkb3duJywgJ21vdXNlbW92ZScsICdtb3VzZXVwJywgJ3RvdWNoc3RhcnQnLCAndG91Y2htb3ZlJywgJ3RvdWNoZW5kJ107CiAgdHlwZXMuZm9yRWFjaChmdW5jdGlvbiB0b2dnbGVMaXN0ZW5lcih0eXBlKSB7CiAgICBsaXN0ZW4oZWwsIHR5cGUsIGhhbmRsZXIkJDFbdHlwZV0sIGFkZCk7CiAgfSk7Cn0KCmV4cG9ydCBkZWZhdWx0IFpvb21pbmc7"},{"version":3,"sources":["D:/home/vuepress-boke/talent-baoda/node_modules/zooming/build/zooming.module.js"],"names":["cursor","zoomIn","zoomOut","grab","move","listen","el","event","handler","add","arguments","length","undefined","options","passive","addEventListener","removeEventListener","loadImage","src","cb","img","Image","onload","onImageLoad","getOriginalSource","dataset","original","parentNode","tagName","getAttribute","setStyle","styles","remember","checkTrans","s","style","key","bindAll","_this","that","methods","Object","getOwnPropertyNames","getPrototypeOf","forEach","bindOne","method","bind","trans","transitionProp","transEndEvent","transformProp","transformCssProp","transition","value","transform","_value","noop","DEFAULT_OPTIONS","enableGrab","preloadImage","closeOnWindowResize","transitionDuration","transitionTimingFunction","bgColor","bgOpacity","scaleBase","scaleExtra","scrollThreshold","zIndex","customSize","onOpen","onClose","onGrab","onMove","onRelease","onBeforeOpen","onBeforeClose","onBeforeGrab","onBeforeRelease","onImageLoading","onImageLoaded","PRESS_DELAY","init","instance","click","e","preventDefault","isPressingMetaKey","window","open","target","srcOriginal","currentTarget","shown","released","close","release","scroll","document","documentElement","body","scrollLeft","pageXOffset","scrollTop","pageYOffset","lastScrollPosition","x","y","deltaX","deltaY","threshold","Math","abs","keydown","isEscape","mousedown","isLeftButton","clientX","clientY","pressTimer","setTimeout","grabOnMouseDown","mousemove","mouseup","clearTimeout","touchstart","_e$touches$","touches","grabOnTouchStart","touchmove","_e$touches$2","touchend","isTouching","clickOverlay","resizeWindow","button","metaKey","ctrlKey","targetTouches","code","keyCode","overlay","createElement","parent","position","top","left","right","bottom","opacity","updateStyle","backgroundColor","insert","appendChild","remove","removeChild","fadeIn","offsetWidth","fadeOut","_typeof","Symbol","iterator","obj","constructor","prototype","classCallCheck","Constructor","TypeError","createClass","defineProperties","props","i","descriptor","enumerable","configurable","writable","defineProperty","protoProps","staticProps","_extends","assign","source","hasOwnProperty","call","TRANSLATE_Z","srcThumbnail","srcset","rect","getBoundingClientRect","translate","scale","styleOpen","styleClose","_instance$options","calculateTranslate","calculateScale","height","width","windowCenter","getWindowCenter","dx","dy","restoreCloseStyle","restoreOpenStyle","upgradeSource","removeAttribute","temp","cloneNode","setAttribute","visibility","updateSrc","downgradeSource","targetCenter","_el$dataset","zoomingHeight","zoomingWidth","_instance$options2","targetHalfWidth","targetHalfHeight","targetEdgeToWindowEdge","scaleHorizontally","scaleVertically","min","naturalWidth","naturalHeight","maxZoomingWidth","parseFloat","maxZoomingHeight","docEl","windowWidth","clientWidth","innerWidth","windowHeight","clientHeight","innerHeight","Zooming","create","lock","listen$$1","els","querySelectorAll","config","target$$1","querySelector","onOpenEnd","toggleGrabListeners","_this2","onCloseEnd","onGrabEnd","onMoveEnd","_this3","onReleaseEnd","handler$$1","types","toggleListener","type"],"mappings":"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","sourcesContent":["var cursor = {\n  default: 'auto',\n  zoomIn: 'zoom-in',\n  zoomOut: 'zoom-out',\n  grab: 'grab',\n  move: 'move'\n};\n\nfunction listen(el, event, handler) {\n  var add = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : true;\n\n  var options = { passive: false };\n\n  if (add) {\n    el.addEventListener(event, handler, options);\n  } else {\n    el.removeEventListener(event, handler, options);\n  }\n}\n\nfunction loadImage(src, cb) {\n  if (src) {\n    var img = new Image();\n\n    img.onload = function onImageLoad() {\n      if (cb) cb(img);\n    };\n\n    img.src = src;\n  }\n}\n\nfunction getOriginalSource(el) {\n  if (el.dataset.original) {\n    return el.dataset.original;\n  } else if (el.parentNode.tagName === 'A') {\n    return el.parentNode.getAttribute('href');\n  } else {\n    return null;\n  }\n}\n\nfunction setStyle(el, styles, remember) {\n  checkTrans(styles);\n\n  var s = el.style;\n  var original = {};\n\n  for (var key in styles) {\n    if (remember) {\n      original[key] = s[key] || '';\n    }\n\n    s[key] = styles[key];\n  }\n\n  return original;\n}\n\nfunction bindAll(_this, that) {\n  var methods = Object.getOwnPropertyNames(Object.getPrototypeOf(_this));\n  methods.forEach(function bindOne(method) {\n    _this[method] = _this[method].bind(that);\n  });\n}\n\nvar trans = {\n  transitionProp: 'transition',\n  transEndEvent: 'transitionend',\n  transformProp: 'transform',\n  transformCssProp: 'transform'\n};\nvar transformCssProp = trans.transformCssProp,\n    transEndEvent = trans.transEndEvent;\n\n\nfunction checkTrans(styles) {\n  var transitionProp = trans.transitionProp,\n      transformProp = trans.transformProp;\n\n\n  if (styles.transition) {\n    var value = styles.transition;\n    delete styles.transition;\n    styles[transitionProp] = value;\n  }\n\n  if (styles.transform) {\n    var _value = styles.transform;\n    delete styles.transform;\n    styles[transformProp] = _value;\n  }\n}\n\nvar noop = function noop() {};\n\nvar DEFAULT_OPTIONS = {\n  /**\n   * To be able to grab and drag the image for extra zoom-in.\n   * @type {boolean}\n   */\n  enableGrab: true,\n\n  /**\n   * Preload zoomable images.\n   * @type {boolean}\n   */\n  preloadImage: false,\n\n  /**\n   * Close the zoomed image when browser window is resized.\n   * @type {boolean}\n   */\n  closeOnWindowResize: true,\n\n  /**\n   * Transition duration in seconds.\n   * @type {number}\n   */\n  transitionDuration: 0.4,\n\n  /**\n   * Transition timing function.\n   * @type {string}\n   */\n  transitionTimingFunction: 'cubic-bezier(0.4, 0, 0, 1)',\n\n  /**\n   * Overlay background color.\n   * @type {string}\n   */\n  bgColor: 'rgb(255, 255, 255)',\n\n  /**\n   * Overlay background opacity.\n   * @type {number}\n   */\n  bgOpacity: 1,\n\n  /**\n   * The base scale factor for zooming. By default scale to fit the window.\n   * @type {number}\n   */\n  scaleBase: 1.0,\n\n  /**\n   * The additional scale factor when grabbing the image.\n   * @type {number}\n   */\n  scaleExtra: 0.5,\n\n  /**\n   * How much scrolling it takes before closing out.\n   * @type {number}\n   */\n  scrollThreshold: 40,\n\n  /**\n   * The z-index that the overlay will be added with.\n   * @type {number}\n   */\n  zIndex: 998,\n\n  /**\n   * Scale (zoom in) to given width and height. Ignore scaleBase if set.\n   * Alternatively, provide a percentage value relative to the original image size.\n   * @type {Object|String}\n   * @example\n   * customSize: { width: 800, height: 400 }\n   * customSize: 100%\n   */\n  customSize: null,\n\n  /**\n   * A callback function that will be called when a target is opened and\n   * transition has ended. It will get the target element as the argument.\n   * @type {Function}\n   */\n  onOpen: noop,\n\n  /**\n   * Same as above, except fired when closed.\n   * @type {Function}\n   */\n  onClose: noop,\n\n  /**\n   * Same as above, except fired when grabbed.\n   * @type {Function}\n   */\n  onGrab: noop,\n\n  /**\n   * Same as above, except fired when moved.\n   * @type {Function}\n   */\n  onMove: noop,\n\n  /**\n   * Same as above, except fired when released.\n   * @type {Function}\n   */\n  onRelease: noop,\n\n  /**\n   * A callback function that will be called before open.\n   * @type {Function}\n   */\n  onBeforeOpen: noop,\n\n  /**\n   * A callback function that will be called before close.\n   * @type {Function}\n   */\n  onBeforeClose: noop,\n\n  /**\n   * A callback function that will be called before grab.\n   * @type {Function}\n   */\n  onBeforeGrab: noop,\n\n  /**\n   * A callback function that will be called before release.\n   * @type {Function}\n   */\n  onBeforeRelease: noop,\n\n  /**\n   * A callback function that will be called when the hi-res image is loading.\n   * @type {Function}\n   */\n  onImageLoading: noop,\n\n  /**\n   * A callback function that will be called when the hi-res image is loaded.\n   * @type {Function}\n   */\n  onImageLoaded: noop\n};\n\nvar PRESS_DELAY = 200;\n\nvar handler = {\n  init: function init(instance) {\n    bindAll(this, instance);\n  },\n  click: function click(e) {\n    e.preventDefault();\n\n    if (isPressingMetaKey(e)) {\n      return window.open(this.target.srcOriginal || e.currentTarget.src, '_blank');\n    } else {\n      if (this.shown) {\n        if (this.released) {\n          this.close();\n        } else {\n          this.release();\n        }\n      } else {\n        this.open(e.currentTarget);\n      }\n    }\n  },\n  scroll: function scroll() {\n    var el = document.documentElement || document.body.parentNode || document.body;\n    var scrollLeft = window.pageXOffset || el.scrollLeft;\n    var scrollTop = window.pageYOffset || el.scrollTop;\n\n    if (this.lastScrollPosition === null) {\n      this.lastScrollPosition = {\n        x: scrollLeft,\n        y: scrollTop\n      };\n    }\n\n    var deltaX = this.lastScrollPosition.x - scrollLeft;\n    var deltaY = this.lastScrollPosition.y - scrollTop;\n    var threshold = this.options.scrollThreshold;\n\n    if (Math.abs(deltaY) >= threshold || Math.abs(deltaX) >= threshold) {\n      this.lastScrollPosition = null;\n      this.close();\n    }\n  },\n  keydown: function keydown(e) {\n    if (isEscape(e)) {\n      if (this.released) {\n        this.close();\n      } else {\n        this.release(this.close);\n      }\n    }\n  },\n  mousedown: function mousedown(e) {\n    if (!isLeftButton(e) || isPressingMetaKey(e)) return;\n    e.preventDefault();\n    var clientX = e.clientX,\n        clientY = e.clientY;\n\n\n    this.pressTimer = setTimeout(function grabOnMouseDown() {\n      this.grab(clientX, clientY);\n    }.bind(this), PRESS_DELAY);\n  },\n  mousemove: function mousemove(e) {\n    if (this.released) return;\n    this.move(e.clientX, e.clientY);\n  },\n  mouseup: function mouseup(e) {\n    if (!isLeftButton(e) || isPressingMetaKey(e)) return;\n    clearTimeout(this.pressTimer);\n\n    if (this.released) {\n      this.close();\n    } else {\n      this.release();\n    }\n  },\n  touchstart: function touchstart(e) {\n    e.preventDefault();\n    var _e$touches$ = e.touches[0],\n        clientX = _e$touches$.clientX,\n        clientY = _e$touches$.clientY;\n\n\n    this.pressTimer = setTimeout(function grabOnTouchStart() {\n      this.grab(clientX, clientY);\n    }.bind(this), PRESS_DELAY);\n  },\n  touchmove: function touchmove(e) {\n    if (this.released) return;\n\n    var _e$touches$2 = e.touches[0],\n        clientX = _e$touches$2.clientX,\n        clientY = _e$touches$2.clientY;\n\n    this.move(clientX, clientY);\n  },\n  touchend: function touchend(e) {\n    if (isTouching(e)) return;\n    clearTimeout(this.pressTimer);\n\n    if (this.released) {\n      this.close();\n    } else {\n      this.release();\n    }\n  },\n  clickOverlay: function clickOverlay() {\n    this.close();\n  },\n  resizeWindow: function resizeWindow() {\n    this.close();\n  }\n};\n\nfunction isLeftButton(e) {\n  return e.button === 0;\n}\n\nfunction isPressingMetaKey(e) {\n  return e.metaKey || e.ctrlKey;\n}\n\nfunction isTouching(e) {\n  e.targetTouches.length > 0;\n}\n\nfunction isEscape(e) {\n  var code = e.key || e.code;\n  return code === 'Escape' || e.keyCode === 27;\n}\n\nvar overlay = {\n  init: function init(instance) {\n    this.el = document.createElement('div');\n    this.instance = instance;\n    this.parent = document.body;\n\n    setStyle(this.el, {\n      position: 'fixed',\n      top: 0,\n      left: 0,\n      right: 0,\n      bottom: 0,\n      opacity: 0\n    });\n\n    this.updateStyle(instance.options);\n    listen(this.el, 'click', instance.handler.clickOverlay.bind(instance));\n  },\n  updateStyle: function updateStyle(options) {\n    setStyle(this.el, {\n      zIndex: options.zIndex,\n      backgroundColor: options.bgColor,\n      transition: 'opacity\\n        ' + options.transitionDuration + 's\\n        ' + options.transitionTimingFunction\n    });\n  },\n  insert: function insert() {\n    this.parent.appendChild(this.el);\n  },\n  remove: function remove() {\n    this.parent.removeChild(this.el);\n  },\n  fadeIn: function fadeIn() {\n    this.el.offsetWidth;\n    this.el.style.opacity = this.instance.options.bgOpacity;\n  },\n  fadeOut: function fadeOut() {\n    this.el.style.opacity = 0;\n  }\n};\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n  return typeof obj;\n} : function (obj) {\n  return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n};\n\nvar classCallCheck = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\nvar createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\n// Translate z-axis to fix CSS grid display issue in Chrome:\n// https://github.com/kingdido999/zooming/issues/42\nvar TRANSLATE_Z = 0;\n\nvar target = {\n  init: function init(el, instance) {\n    this.el = el;\n    this.instance = instance;\n    this.srcThumbnail = this.el.getAttribute('src');\n    this.srcset = this.el.getAttribute('srcset');\n    this.srcOriginal = getOriginalSource(this.el);\n    this.rect = this.el.getBoundingClientRect();\n    this.translate = null;\n    this.scale = null;\n    this.styleOpen = null;\n    this.styleClose = null;\n  },\n  zoomIn: function zoomIn() {\n    var _instance$options = this.instance.options,\n        zIndex = _instance$options.zIndex,\n        enableGrab = _instance$options.enableGrab,\n        transitionDuration = _instance$options.transitionDuration,\n        transitionTimingFunction = _instance$options.transitionTimingFunction;\n\n    this.translate = this.calculateTranslate();\n    this.scale = this.calculateScale();\n\n    this.styleOpen = {\n      position: 'relative',\n      zIndex: zIndex + 1,\n      cursor: enableGrab ? cursor.grab : cursor.zoomOut,\n      transition: transformCssProp + '\\n        ' + transitionDuration + 's\\n        ' + transitionTimingFunction,\n      transform: 'translate3d(' + this.translate.x + 'px, ' + this.translate.y + 'px, ' + TRANSLATE_Z + 'px)\\n        scale(' + this.scale.x + ',' + this.scale.y + ')',\n      height: this.rect.height + 'px',\n      width: this.rect.width + 'px'\n\n      // Force layout update\n    };this.el.offsetWidth;\n\n    // Trigger transition\n    this.styleClose = setStyle(this.el, this.styleOpen, true);\n  },\n  zoomOut: function zoomOut() {\n    // Force layout update\n    this.el.offsetWidth;\n\n    setStyle(this.el, { transform: 'none' });\n  },\n  grab: function grab(x, y, scaleExtra) {\n    var windowCenter = getWindowCenter();\n    var dx = windowCenter.x - x,\n        dy = windowCenter.y - y;\n\n\n    setStyle(this.el, {\n      cursor: cursor.move,\n      transform: 'translate3d(\\n        ' + (this.translate.x + dx) + 'px, ' + (this.translate.y + dy) + 'px, ' + TRANSLATE_Z + 'px)\\n        scale(' + (this.scale.x + scaleExtra) + ',' + (this.scale.y + scaleExtra) + ')'\n    });\n  },\n  move: function move(x, y, scaleExtra) {\n    var windowCenter = getWindowCenter();\n    var dx = windowCenter.x - x,\n        dy = windowCenter.y - y;\n\n\n    setStyle(this.el, {\n      transition: transformCssProp,\n      transform: 'translate3d(\\n        ' + (this.translate.x + dx) + 'px, ' + (this.translate.y + dy) + 'px, ' + TRANSLATE_Z + 'px)\\n        scale(' + (this.scale.x + scaleExtra) + ',' + (this.scale.y + scaleExtra) + ')'\n    });\n  },\n  restoreCloseStyle: function restoreCloseStyle() {\n    setStyle(this.el, this.styleClose);\n  },\n  restoreOpenStyle: function restoreOpenStyle() {\n    setStyle(this.el, this.styleOpen);\n  },\n  upgradeSource: function upgradeSource() {\n    if (this.srcOriginal) {\n      var parentNode = this.el.parentNode;\n\n      if (this.srcset) {\n        this.el.removeAttribute('srcset');\n      }\n\n      var temp = this.el.cloneNode(false);\n\n      // Force compute the hi-res image in DOM to prevent\n      // image flickering while updating src\n      temp.setAttribute('src', this.srcOriginal);\n      temp.style.position = 'fixed';\n      temp.style.visibility = 'hidden';\n      parentNode.appendChild(temp);\n\n      // Add delay to prevent Firefox from flickering\n      setTimeout(function updateSrc() {\n        this.el.setAttribute('src', this.srcOriginal);\n        parentNode.removeChild(temp);\n      }.bind(this), 50);\n    }\n  },\n  downgradeSource: function downgradeSource() {\n    if (this.srcOriginal) {\n      if (this.srcset) {\n        this.el.setAttribute('srcset', this.srcset);\n      }\n      this.el.setAttribute('src', this.srcThumbnail);\n    }\n  },\n  calculateTranslate: function calculateTranslate() {\n    var windowCenter = getWindowCenter();\n    var targetCenter = {\n      x: this.rect.left + this.rect.width / 2,\n      y: this.rect.top + this.rect.height / 2\n\n      // The vector to translate image to the window center\n    };return {\n      x: windowCenter.x - targetCenter.x,\n      y: windowCenter.y - targetCenter.y\n    };\n  },\n  calculateScale: function calculateScale() {\n    var _el$dataset = this.el.dataset,\n        zoomingHeight = _el$dataset.zoomingHeight,\n        zoomingWidth = _el$dataset.zoomingWidth;\n    var _instance$options2 = this.instance.options,\n        customSize = _instance$options2.customSize,\n        scaleBase = _instance$options2.scaleBase;\n\n\n    if (!customSize && zoomingHeight && zoomingWidth) {\n      return {\n        x: zoomingWidth / this.rect.width,\n        y: zoomingHeight / this.rect.height\n      };\n    } else if (customSize && (typeof customSize === 'undefined' ? 'undefined' : _typeof(customSize)) === 'object') {\n      return {\n        x: customSize.width / this.rect.width,\n        y: customSize.height / this.rect.height\n      };\n    } else {\n      var targetHalfWidth = this.rect.width / 2;\n      var targetHalfHeight = this.rect.height / 2;\n      var windowCenter = getWindowCenter();\n\n      // The distance between target edge and window edge\n      var targetEdgeToWindowEdge = {\n        x: windowCenter.x - targetHalfWidth,\n        y: windowCenter.y - targetHalfHeight\n      };\n\n      var scaleHorizontally = targetEdgeToWindowEdge.x / targetHalfWidth;\n      var scaleVertically = targetEdgeToWindowEdge.y / targetHalfHeight;\n\n      // The additional scale is based on the smaller value of\n      // scaling horizontally and scaling vertically\n      var scale = scaleBase + Math.min(scaleHorizontally, scaleVertically);\n\n      if (customSize && typeof customSize === 'string') {\n        // Use zoomingWidth and zoomingHeight if available\n        var naturalWidth = zoomingWidth || this.el.naturalWidth;\n        var naturalHeight = zoomingHeight || this.el.naturalHeight;\n        var maxZoomingWidth = parseFloat(customSize) * naturalWidth / (100 * this.rect.width);\n        var maxZoomingHeight = parseFloat(customSize) * naturalHeight / (100 * this.rect.height);\n\n        // Only scale image up to the specified customSize percentage\n        if (scale > maxZoomingWidth || scale > maxZoomingHeight) {\n          return {\n            x: maxZoomingWidth,\n            y: maxZoomingHeight\n          };\n        }\n      }\n\n      return {\n        x: scale,\n        y: scale\n      };\n    }\n  }\n};\n\nfunction getWindowCenter() {\n  var docEl = document.documentElement;\n  var windowWidth = Math.min(docEl.clientWidth, window.innerWidth);\n  var windowHeight = Math.min(docEl.clientHeight, window.innerHeight);\n\n  return {\n    x: windowWidth / 2,\n    y: windowHeight / 2\n  };\n}\n\n/**\n * Zooming instance.\n */\n\nvar Zooming = function () {\n  /**\n   * @param {Object} [options] Update default options if provided.\n   */\n  function Zooming(options) {\n    classCallCheck(this, Zooming);\n\n    this.target = Object.create(target);\n    this.overlay = Object.create(overlay);\n    this.handler = Object.create(handler);\n    this.body = document.body;\n\n    this.shown = false;\n    this.lock = false;\n    this.released = true;\n    this.lastScrollPosition = null;\n    this.pressTimer = null;\n\n    this.options = _extends({}, DEFAULT_OPTIONS, options);\n    this.overlay.init(this);\n    this.handler.init(this);\n  }\n\n  /**\n   * Make element(s) zoomable.\n   * @param  {string|Element} el A css selector or an Element.\n   * @return {this}\n   */\n\n\n  createClass(Zooming, [{\n    key: 'listen',\n    value: function listen$$1(el) {\n      if (typeof el === 'string') {\n        var els = document.querySelectorAll(el);\n        var i = els.length;\n\n        while (i--) {\n          this.listen(els[i]);\n        }\n      } else if (el.tagName === 'IMG') {\n        el.style.cursor = cursor.zoomIn;\n        listen(el, 'click', this.handler.click);\n\n        if (this.options.preloadImage) {\n          loadImage(getOriginalSource(el));\n        }\n      }\n\n      return this;\n    }\n\n    /**\n     * Update options or return current options if no argument is provided.\n     * @param  {Object} options An Object that contains this.options.\n     * @return {this|this.options}\n     */\n\n  }, {\n    key: 'config',\n    value: function config(options) {\n      if (options) {\n        _extends(this.options, options);\n        this.overlay.updateStyle(this.options);\n        return this;\n      } else {\n        return this.options;\n      }\n    }\n\n    /**\n     * Open (zoom in) the Element.\n     * @param  {Element} el The Element to open.\n     * @param  {Function} [cb=this.options.onOpen] A callback function that will\n     * be called when a target is opened and transition has ended. It will get\n     * the target element as the argument.\n     * @return {this}\n     */\n\n  }, {\n    key: 'open',\n    value: function open(el) {\n      var _this = this;\n\n      var cb = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.options.onOpen;\n\n      if (this.shown || this.lock) return;\n\n      var target$$1 = typeof el === 'string' ? document.querySelector(el) : el;\n\n      if (target$$1.tagName !== 'IMG') return;\n\n      this.options.onBeforeOpen(target$$1);\n\n      this.target.init(target$$1, this);\n\n      if (!this.options.preloadImage) {\n        var srcOriginal = this.target.srcOriginal;\n\n\n        if (srcOriginal != null) {\n          this.options.onImageLoading(target$$1);\n          loadImage(srcOriginal, this.options.onImageLoaded);\n        }\n      }\n\n      this.shown = true;\n      this.lock = true;\n\n      this.target.zoomIn();\n      this.overlay.insert();\n      this.overlay.fadeIn();\n\n      listen(document, 'scroll', this.handler.scroll);\n      listen(document, 'keydown', this.handler.keydown);\n\n      if (this.options.closeOnWindowResize) {\n        listen(window, 'resize', this.handler.resizeWindow);\n      }\n\n      var onOpenEnd = function onOpenEnd() {\n        listen(target$$1, transEndEvent, onOpenEnd, false);\n        _this.lock = false;\n        _this.target.upgradeSource();\n\n        if (_this.options.enableGrab) {\n          toggleGrabListeners(document, _this.handler, true);\n        }\n\n        cb(target$$1);\n      };\n\n      listen(target$$1, transEndEvent, onOpenEnd);\n\n      return this;\n    }\n\n    /**\n     * Close (zoom out) the Element currently opened.\n     * @param  {Function} [cb=this.options.onClose] A callback function that will\n     * be called when a target is closed and transition has ended. It will get\n     * the target element as the argument.\n     * @return {this}\n     */\n\n  }, {\n    key: 'close',\n    value: function close() {\n      var _this2 = this;\n\n      var cb = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.options.onClose;\n\n      if (!this.shown || this.lock) return;\n\n      var target$$1 = this.target.el;\n\n      this.options.onBeforeClose(target$$1);\n\n      this.lock = true;\n      this.body.style.cursor = cursor.default;\n      this.overlay.fadeOut();\n      this.target.zoomOut();\n\n      listen(document, 'scroll', this.handler.scroll, false);\n      listen(document, 'keydown', this.handler.keydown, false);\n\n      if (this.options.closeOnWindowResize) {\n        listen(window, 'resize', this.handler.resizeWindow, false);\n      }\n\n      var onCloseEnd = function onCloseEnd() {\n        listen(target$$1, transEndEvent, onCloseEnd, false);\n\n        _this2.shown = false;\n        _this2.lock = false;\n\n        _this2.target.downgradeSource();\n\n        if (_this2.options.enableGrab) {\n          toggleGrabListeners(document, _this2.handler, false);\n        }\n\n        _this2.target.restoreCloseStyle();\n        _this2.overlay.remove();\n\n        cb(target$$1);\n      };\n\n      listen(target$$1, transEndEvent, onCloseEnd);\n\n      return this;\n    }\n\n    /**\n     * Grab the Element currently opened given a position and apply extra zoom-in.\n     * @param  {number}   x The X-axis of where the press happened.\n     * @param  {number}   y The Y-axis of where the press happened.\n     * @param  {number}   scaleExtra Extra zoom-in to apply.\n     * @param  {Function} [cb=this.options.onGrab] A callback function that\n     * will be called when a target is grabbed and transition has ended. It\n     * will get the target element as the argument.\n     * @return {this}\n     */\n\n  }, {\n    key: 'grab',\n    value: function grab(x, y) {\n      var scaleExtra = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : this.options.scaleExtra;\n      var cb = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : this.options.onGrab;\n\n      if (!this.shown || this.lock) return;\n\n      var target$$1 = this.target.el;\n\n      this.options.onBeforeGrab(target$$1);\n\n      this.released = false;\n      this.target.grab(x, y, scaleExtra);\n\n      var onGrabEnd = function onGrabEnd() {\n        listen(target$$1, transEndEvent, onGrabEnd, false);\n        cb(target$$1);\n      };\n\n      listen(target$$1, transEndEvent, onGrabEnd);\n\n      return this;\n    }\n\n    /**\n     * Move the Element currently grabbed given a position and apply extra zoom-in.\n     * @param  {number}   x The X-axis of where the press happened.\n     * @param  {number}   y The Y-axis of where the press happened.\n     * @param  {number}   scaleExtra Extra zoom-in to apply.\n     * @param  {Function} [cb=this.options.onMove] A callback function that\n     * will be called when a target is moved and transition has ended. It will\n     * get the target element as the argument.\n     * @return {this}\n     */\n\n  }, {\n    key: 'move',\n    value: function move(x, y) {\n      var scaleExtra = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : this.options.scaleExtra;\n      var cb = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : this.options.onMove;\n\n      if (!this.shown || this.lock) return;\n\n      this.released = false;\n      this.body.style.cursor = cursor.move;\n      this.target.move(x, y, scaleExtra);\n\n      var target$$1 = this.target.el;\n\n      var onMoveEnd = function onMoveEnd() {\n        listen(target$$1, transEndEvent, onMoveEnd, false);\n        cb(target$$1);\n      };\n\n      listen(target$$1, transEndEvent, onMoveEnd);\n\n      return this;\n    }\n\n    /**\n     * Release the Element currently grabbed.\n     * @param  {Function} [cb=this.options.onRelease] A callback function that\n     * will be called when a target is released and transition has ended. It\n     * will get the target element as the argument.\n     * @return {this}\n     */\n\n  }, {\n    key: 'release',\n    value: function release() {\n      var _this3 = this;\n\n      var cb = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.options.onRelease;\n\n      if (!this.shown || this.lock) return;\n\n      var target$$1 = this.target.el;\n\n      this.options.onBeforeRelease(target$$1);\n\n      this.lock = true;\n      this.body.style.cursor = cursor.default;\n      this.target.restoreOpenStyle();\n\n      var onReleaseEnd = function onReleaseEnd() {\n        listen(target$$1, transEndEvent, onReleaseEnd, false);\n        _this3.lock = false;\n        _this3.released = true;\n        cb(target$$1);\n      };\n\n      listen(target$$1, transEndEvent, onReleaseEnd);\n\n      return this;\n    }\n  }]);\n  return Zooming;\n}();\n\n\nfunction toggleGrabListeners(el, handler$$1, add) {\n  var types = ['mousedown', 'mousemove', 'mouseup', 'touchstart', 'touchmove', 'touchend'];\n\n  types.forEach(function toggleListener(type) {\n    listen(el, type, handler$$1[type], add);\n  });\n}\n\nexport default Zooming;\n"]}]}